module.exports=[163227,a=>{"use strict";let b=Symbol.for("drizzle:entityKind"),c=Symbol.for("drizzle:hasOwnEntityKind");function d(a,c){if(!a||"object"!=typeof a)return!1;if(a instanceof c)return!0;if(!Object.prototype.hasOwnProperty.call(c,b))throw Error(`Class "${c.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let d=Object.getPrototypeOf(a).constructor;if(d)for(;d;){if(b in d&&d[b]===c[b])return!0;d=Object.getPrototypeOf(d)}return!1}a.s(["entityKind",()=>b,"hasOwnEntityKind",()=>c,"is",()=>d])},417981,907484,a=>{"use strict";var b=a.i(163227);class c{static [b.entityKind]="ConsoleLogWriter";write(a){console.log(a)}}class d{static [b.entityKind]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new c}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class e{static [b.entityKind]="NoopLogger";logQuery(){}}a.s(["ConsoleLogWriter",()=>c,"DefaultLogger",()=>d,"NoopLogger",()=>e],417981);class f{static [b.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}a.s(["QueryPromise",()=>f],907484)},777001,494415,777396,905302,704501,84113,355280,420713,351674,a=>{"use strict";let b,c;var d,e=a.i(163227);class f{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [e.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}a.s(["Column",()=>f],494415);class g{static [e.entityKind]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}a.s(["ColumnBuilder",()=>g],777396);let h=Symbol.for("drizzle:Name");class i{static [e.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new j(a,this)}}class j{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [e.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[h],...d,c[0].table[h],...e];return a??`${f.join("_")}_fk`}}function k(a,...b){return a(...b)}function l(a,b){return`${a[h]}_${b.join("_")}_unique`}class m{constructor(a,b){this.name=b,this.columns=a}static [e.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new o(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class n{static [e.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new m(a,this.name)}}class o{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??l(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [e.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function p(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class q extends g{foreignKeyConfigs=[];static [e.entityKind]="PgColumnBuilder";array(a){return new u(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>k((c,d)=>{let e=new i(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new s(a,this.config)}}class r extends f{constructor(a,b){b.uniqueName||(b.uniqueName=l(a,[b.name])),super(a,b),this.table=a}static [e.entityKind]="PgColumn"}class s extends r{static [e.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class t{static [e.entityKind]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class u extends q{static [e.entityKind]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new v(a,this.config,b)}}class v extends r{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [e.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=p(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=p(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let c=a.map(a=>null===a?null:(0,e.is)(this.baseColumn,v)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?c:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(c)}}a.s(["IndexedColumn",()=>t,"PgColumn",()=>r,"PgColumnBuilder",()=>q],905302);let w=Symbol.for("drizzle:isPgEnum");class x extends q{static [e.entityKind]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new y(a,this.config)}}class y extends r{static [e.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}class z{static [e.entityKind]="Subquery";constructor(a,b,c,d=!1){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d}}}class A extends z{static [e.entityKind]="WithSubquery"}a.s(["Subquery",()=>z,"WithSubquery",()=>A],704501);let B={startActiveSpan:(a,d)=>b?(c||(c=b.trace.getTracer("drizzle-orm","0.39.1")),k((b,c)=>c.startActiveSpan(a,a=>{try{return d(a)}catch(c){throw a.setStatus({code:b.SpanStatusCode.ERROR,message:c instanceof Error?c.message:"Unknown error"}),c}finally{a.end()}}),b,c)):d()};a.s(["tracer",()=>B],84113);let C=Symbol.for("drizzle:ViewBaseConfig");a.s(["ViewBaseConfig",()=>C],355280);let D=Symbol.for("drizzle:Schema"),E=Symbol.for("drizzle:Columns"),F=Symbol.for("drizzle:ExtraConfigColumns"),G=Symbol.for("drizzle:OriginalName"),H=Symbol.for("drizzle:BaseName"),I=Symbol.for("drizzle:IsAlias"),J=Symbol.for("drizzle:ExtraConfigBuilder"),K=Symbol.for("drizzle:IsDrizzleTable");class L{static [e.entityKind]="Table";static Symbol={Name:h,Schema:D,OriginalName:G,Columns:E,ExtraConfigColumns:F,BaseName:H,IsAlias:I,ExtraConfigBuilder:J};[h];[G];[D];[E];[F];[H];[I]=!1;[K]=!0;[J]=void 0;constructor(a,b,c){this[h]=this[G]=a,this[D]=b,this[H]=c}}function M(a){return"object"==typeof a&&null!==a&&K in a}function N(a){return a[h]}function O(a){return`${a[D]??"public"}.${a[h]}`}a.s(["BaseName",()=>H,"Columns",()=>E,"ExtraConfigBuilder",()=>J,"ExtraConfigColumns",()=>F,"IsAlias",()=>I,"OriginalName",()=>G,"Schema",()=>D,"Table",()=>L,"getTableName",()=>N,"getTableUniqueName",()=>O,"isTable",()=>M],420713);class P{static [e.entityKind]="FakePrimitiveParam"}function Q(a){return null!=a&&"function"==typeof a.getSQL}class R{static [e.entityKind]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new S([this])}}class S{constructor(a){this.queryChunks=a}static [e.entityKind]="SQL";decoder=W;shouldInlineParams=!1;append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return B.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let c=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:d,escapeName:g,escapeParam:h,prepareTyping:i,inlineParams:j,paramStartIndex:k}=c;var l=a.map(a=>{if((0,e.is)(a,R))return{sql:a.value.join(""),params:[]};if((0,e.is)(a,T))return{sql:g(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new R("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new R(", "));return b.push(new R(")")),this.buildQueryFromSourceParams(b,c)}if((0,e.is)(a,S))return this.buildQueryFromSourceParams(a.queryChunks,{...c,inlineParams:j||a.shouldInlineParams});if((0,e.is)(a,L)){let b=a[L.Symbol.Schema],c=a[L.Symbol.Name];return{sql:void 0===b||a[I]?g(c):g(b)+"."+g(c),params:[]}}if((0,e.is)(a,f)){let c=d.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:g(c),params:[]};let e=a.table[L.Symbol.Schema];return{sql:a.table[I]||void 0===e?g(a.table[L.Symbol.Name])+"."+g(c):g(e)+"."+g(a.table[L.Symbol.Name])+"."+g(c),params:[]}}if((0,e.is)(a,ag)){let b=a[C].schema,c=a[C].name;return{sql:void 0===b||a[C].isAlias?g(c):g(b)+"."+g(c),params:[]}}if((0,e.is)(a,Z)){if((0,e.is)(a.value,ac))return{sql:h(k.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if((0,e.is)(b,S))return this.buildQueryFromSourceParams([b],c);if(j)return{sql:this.mapInlineParam(b,c),params:[]};let d=["none"];return i&&(d=[i(a.encoder)]),{sql:h(k.value++,b),params:[b],typings:d}}return(0,e.is)(a,ac)?{sql:h(k.value++,a),params:[a],typings:["none"]}:(0,e.is)(a,S.Aliased)&&void 0!==a.fieldAlias?{sql:g(a.fieldAlias),params:[]}:(0,e.is)(a,z)?a._.isWith?{sql:g(a._.alias),params:[]}:this.buildQueryFromSourceParams([new R("("),a._.sql,new R(") "),new T(a._.alias)],c):a&&"function"==typeof a&&w in a&&!0===a[w]?a.schema?{sql:g(a.schema)+"."+g(a.enumName),params:[]}:{sql:g(a.enumName),params:[]}:Q(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],c):this.buildQueryFromSourceParams([new R("("),a.getSQL(),new R(")")],c):j?{sql:this.mapInlineParam(a,c),params:[]}:{sql:h(k.value++,a),params:[a],typings:["none"]}});let m={sql:"",params:[]};for(let a of l)m.sql+=a.sql,m.params.push(...a.params),a.typings?.length&&(m.typings||(m.typings=[]),m.typings.push(...a.typings));return m}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new S.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class T{constructor(a){this.value=a}static [e.entityKind]="Name";brand;getSQL(){return new S([this])}}function U(a){return new T(a)}function V(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let W={mapFromDriverValue:a=>a},X={mapToDriverValue:a=>a},Y={...W,...X};class Z{constructor(a,b=X){this.value=a,this.encoder=b}static [e.entityKind]="Param";brand;getSQL(){return new S([this])}}function $(a,b){return new Z(a,b)}function _(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new R(a[0])),b.entries()))c.push(e,new R(a[d+1]));return new S(c)}(d=_||(_={})).empty=function(){return new S([])},d.fromList=function(a){return new S(a)},d.raw=function(a){return new S([new R(a)])},d.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new S(c)},d.identifier=function(a){return new T(a)},d.placeholder=function(a){return new ac(a)},d.param=function(a,b){return new Z(a,b)};var aa=S||(S={});class ab{constructor(a,b){this.sql=a,this.fieldAlias=b}static [e.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new ab(this.sql,this.fieldAlias)}}aa.Aliased=ab;class ac{constructor(a){this.name=a}static [e.entityKind]="Placeholder";getSQL(){return new S([this])}}function ad(a){return new ac(a)}function ae(a,b){return a.map(a=>{if((0,e.is)(a,ac)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if((0,e.is)(a,Z)&&(0,e.is)(a.value,ac)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let af=Symbol.for("drizzle:IsDrizzleView");class ag{static [e.entityKind]="View";[C];[af]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[C]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new S([this])}}function ah(a){return"object"==typeof a&&null!==a&&af in a}function ai(a){return a[C].name}f.prototype.getSQL=function(){return new S([this])},L.prototype.getSQL=function(){return new S([this])},z.prototype.getSQL=function(){return new S([this])},a.s(["FakePrimitiveParam",()=>P,"Name",()=>T,"Param",()=>Z,"Placeholder",()=>ac,"SQL",()=>S,"StringChunk",()=>R,"View",()=>ag,"fillPlaceholders",()=>ae,"getViewName",()=>ai,"isDriverValueEncoder",()=>V,"isSQLWrapper",()=>Q,"isView",()=>ah,"name",()=>U,"noopDecoder",()=>W,"noopEncoder",()=>X,"noopMapper",()=>Y,"param",()=>$,"placeholder",()=>ad,"sql",()=>_],351674);class aj{constructor(a){this.table=a}static [e.entityKind]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class ak{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [e.entityKind]="TableAliasProxyHandler";get(a,b){if(b===L.Symbol.IsAlias)return!0;if(b===L.Symbol.Name||this.replaceOriginalName&&b===L.Symbol.OriginalName)return this.alias;if(b===C)return{...a[C],name:this.alias,isAlias:!0};if(b===L.Symbol.Columns){let b=a[L.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new aj(new Proxy(a,this)))}),c}let c=a[b];return(0,e.is)(c,f)?new Proxy(c,new aj(new Proxy(a,this))):c}}class al{constructor(a){this.alias=a}static [e.entityKind]="RelationTableAliasProxyHandler";get(a,b){return"sourceTable"===b?am(a.sourceTable,this.alias):a[b]}}function am(a,b){return new Proxy(a,new ak(b,!1))}function an(a,b){return new Proxy(a,new al(b))}function ao(a,b){return new Proxy(a,new aj(new Proxy(a.table,new ak(b,!1))))}function ap(a,b){return new S.Aliased(aq(a.sql,b),a.fieldAlias)}function aq(a,b){return _.join(a.queryChunks.map(a=>(0,e.is)(a,f)?ao(a,b):(0,e.is)(a,S)?aq(a,b):(0,e.is)(a,S.Aliased)?ap(a,b):a))}a.s(["ColumnAliasProxyHandler",()=>aj,"RelationTableAliasProxyHandler",()=>al,"TableAliasProxyHandler",()=>ak,"aliasedRelation",()=>an,"aliasedTable",()=>am,"aliasedTableColumn",()=>ao,"mapColumnsInAliasedSQLToAlias",()=>ap,"mapColumnsInSQLToAlias",()=>aq],777001)},844551,a=>{"use strict";var b=a.i(494415),c=a.i(163227),d=a.i(351674),e=a.i(704501),f=a.i(420713),g=a.i(355280);function h(a,e,g){let h={},i=a.reduce((a,{path:i,field:j},k)=>{let l;l=(0,c.is)(j,b.Column)?j:(0,c.is)(j,d.SQL)?j.decoder:j.sql.decoder;let m=a;for(let[a,d]of i.entries())if(a<i.length-1)d in m||(m[d]={}),m=m[d];else{let a=e[k],n=m[d]=null===a?null:l.mapFromDriverValue(a);if(g&&(0,c.is)(j,b.Column)&&2===i.length){let a=i[0];a in h?"string"==typeof h[a]&&h[a]!==(0,f.getTableName)(j.table)&&(h[a]=!1):h[a]=null===n&&(0,f.getTableName)(j.table)}}return a},{});if(g&&Object.keys(h).length>0)for(let[a,b]of Object.entries(h))"string"!=typeof b||g[b]||(i[a]=null);return i}function i(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function j(a,e){let g=Object.entries(e).filter(([,a])=>void 0!==a).map(([e,g])=>(0,c.is)(g,d.SQL)||(0,c.is)(g,b.Column)?[e,g]:[e,new d.Param(g,a[f.Table.Symbol.Columns][e])]);if(0===g.length)throw Error("No values to set");return Object.fromEntries(g)}function k(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function l(a){return a[f.Table.Symbol.Columns]}function m(a){return a[g.ViewBaseConfig].selectedFields}function n(a){return(0,c.is)(a,e.Subquery)?a._.alias:(0,c.is)(a,d.View)?a[g.ViewBaseConfig].name:(0,c.is)(a,d.SQL)?void 0:a[f.Table.Symbol.IsAlias]?a[f.Table.Symbol.Name]:a[f.Table.Symbol.BaseName]}function o(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}function p(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.logger;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.logger;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}a.s(["applyMixins",()=>k,"getColumnNameAndConfig",()=>o,"getTableColumns",()=>l,"getTableLikeName",()=>n,"getViewSelectedFields",()=>m,"haveSameKeys",()=>i,"isConfig",()=>p,"mapResultRow",()=>h,"mapUpdateSet",()=>j,"orderSelectedFields",()=>function a(e,g){return Object.entries(e).reduce((e,[h,i])=>{if("string"!=typeof h)return e;let j=g?[...g,h]:[h];return(0,c.is)(i,b.Column)||(0,c.is)(i,d.SQL)||(0,c.is)(i,d.SQL.Aliased)?e.push({path:j,field:i}):(0,c.is)(i,f.Table)?e.push(...a(i[f.Table.Symbol.Columns],j)):e.push(...a(i,j)),e},[])}])},911832,a=>{"use strict";var b=a.i(163227);class c extends Error{static [b.entityKind]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class d extends c{static [b.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}a.s(["DrizzleError",()=>c,"TransactionRollbackError",()=>d])},97122,71360,a=>{"use strict";var b=a.i(163227),c=a.i(844551),d=a.i(905302),e=a.i(351674),f=d;class g extends f.PgColumnBuilder{static [b.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(e.sql`now()`)}}a.s(["PgDateColumnBaseBuilder",()=>g],71360);class h extends g{static [b.entityKind]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new i(a,this.config)}}class i extends d.PgColumn{static [b.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}mapToDriverValue(a){return a.toISOString()}}class j extends g{static [b.entityKind]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new k(a,this.config)}}class k extends d.PgColumn{static [b.entityKind]="PgDateString";getSQLType(){return"date"}}function l(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode==="date"?new h(d):new j(d)}a.s(["PgDate",()=>i,"PgDateString",()=>k,"date",()=>l],97122)},356564,383217,a=>{"use strict";var b=a.i(163227),c=a.i(905302);class d extends c.PgColumnBuilder{static [b.entityKind]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new e(a,this.config)}}class e extends c.PgColumn{static [b.entityKind]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function f(a){return new d(a??"")}a.s(["PgJson",()=>e,"json",()=>f],356564);var g=c;class h extends g.PgColumnBuilder{static [b.entityKind]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new i(a,this.config)}}class i extends g.PgColumn{static [b.entityKind]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function j(a){return new h(a??"")}a.s(["PgJsonb",()=>i,"jsonb",()=>j],383217)},890714,a=>{"use strict";var b=a.i(163227),c=a.i(844551),d=a.i(905302);class e extends d.PgColumnBuilder{static [b.entityKind]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new f(a,this.config)}}class f extends d.PgColumn{static [b.entityKind]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function g(a,b){let{name:d,config:f}=(0,c.getColumnNameAndConfig)(a,b);return new e(d,f?.precision,f?.scale)}a.s(["PgNumeric",()=>f,"numeric",()=>g])},800952,99450,731793,a=>{"use strict";var b=a.i(163227),c=a.i(844551),d=a.i(905302),e=a.i(71360);class f extends e.PgDateColumnBaseBuilder{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [b.entityKind]="PgTimeBuilder";build(a){return new g(a,this.config)}}class g extends d.PgColumn{static [b.entityKind]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function h(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new f(d,e.withTimezone??!1,e.precision)}a.s(["PgTime",()=>g,"time",()=>h],800952);var i=d,j=e;class k extends j.PgDateColumnBaseBuilder{static [b.entityKind]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new l(a,this.config)}}class l extends i.PgColumn{static [b.entityKind]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a=>new Date(this.withTimezone?a:a+"+0000");mapToDriverValue=a=>a.toISOString()}class m extends j.PgDateColumnBaseBuilder{static [b.entityKind]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new n(a,this.config)}}class n extends i.PgColumn{static [b.entityKind]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}}function o(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode==="string"?new m(d,e.withTimezone??!1,e.precision):new k(d,e?.withTimezone??!1,e?.precision)}a.s(["PgTimestamp",()=>l,"PgTimestampString",()=>n,"timestamp",()=>o],99450);var p=a.i(351674),q=d;class r extends q.PgColumnBuilder{static [b.entityKind]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default(p.sql`gen_random_uuid()`)}build(a){return new s(a,this.config)}}class s extends q.PgColumn{static [b.entityKind]="PgUUID";getSQLType(){return"uuid"}}function t(a){return new r(a??"")}a.s(["PgUUID",()=>s,"uuid",()=>t],731793)},294476,972694,737353,13552,521528,183632,510951,a=>{"use strict";var b=a.i(163227),c=a.i(844551),d=a.i(905302),e=d;class f extends e.PgColumnBuilder{static [b.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}a.s(["PgIntColumnBaseBuilder",()=>f],972694);class g extends f{static [b.entityKind]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new h(a,this.config)}}class h extends d.PgColumn{static [b.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class i extends f{static [b.entityKind]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new j(a,this.config)}}class j extends d.PgColumn{static [b.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function k(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return"number"===e.mode?new g(d):new i(d)}a.s(["bigint",()=>k],294476);var l=d;class m extends l.PgColumnBuilder{static [b.entityKind]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new n(a,this.config)}}class n extends l.PgColumn{static [b.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class o extends l.PgColumnBuilder{static [b.entityKind]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new p(a,this.config)}}class p extends l.PgColumn{static [b.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function q(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return"number"===e.mode?new m(d):new o(d)}a.s(["bigserial",()=>q],737353);var r=d;class s extends r.PgColumnBuilder{static [b.entityKind]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new t(a,this.config)}}class t extends r.PgColumn{static [b.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function u(a){return new s(a??"")}a.s(["boolean",()=>u],13552);var v=d;class w extends v.PgColumnBuilder{static [b.entityKind]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new x(a,this.config)}}class x extends v.PgColumn{static [b.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function y(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new w(d,e)}a.s(["char",()=>y],521528);var z=d;class A extends z.PgColumnBuilder{static [b.entityKind]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new B(a,this.config)}}class B extends z.PgColumn{static [b.entityKind]="PgCidr";getSQLType(){return"cidr"}}function C(a){return new A(a??"")}a.s(["cidr",()=>C],183632);var D=d;class E extends D.PgColumnBuilder{static [b.entityKind]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new F(a,this.config)}}class F extends D.PgColumn{static [b.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function G(a){return(b,d)=>{let{name:e,config:f}=(0,c.getColumnNameAndConfig)(b,d);return new E(e,f,a)}}a.s(["customType",()=>G],510951)},734139,812070,986096,975865,a=>{"use strict";var b=a.i(163227),c=a.i(905302);class d extends c.PgColumnBuilder{static [b.entityKind]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new e(a,this.config)}}class e extends c.PgColumn{static [b.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function f(a){return new d(a??"")}a.s(["doublePrecision",()=>f],734139);var g=c;class h extends g.PgColumnBuilder{static [b.entityKind]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new i(a,this.config)}}class i extends g.PgColumn{static [b.entityKind]="PgInet";getSQLType(){return"inet"}}function j(a){return new h(a??"")}a.s(["inet",()=>j],812070);var k=c,l=a.i(972694);class m extends l.PgIntColumnBaseBuilder{static [b.entityKind]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new n(a,this.config)}}class n extends k.PgColumn{static [b.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function o(a){return new m(a??"")}a.s(["integer",()=>o],986096);var p=a.i(844551),q=c;class r extends q.PgColumnBuilder{static [b.entityKind]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new s(a,this.config)}}class s extends q.PgColumn{static [b.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function t(a,b={}){let{name:c,config:d}=(0,p.getColumnNameAndConfig)(a,b);return new r(c,d)}a.s(["interval",()=>t],975865)},345541,918838,415911,a=>{"use strict";var b=a.i(163227),c=a.i(844551),d=a.i(905302);class e extends d.PgColumnBuilder{static [b.entityKind]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new f(a,this.config)}}class f extends d.PgColumn{static [b.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class g extends d.PgColumnBuilder{static [b.entityKind]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new h(a,this.config)}}class h extends d.PgColumn{static [b.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function i(a,b){let{name:d,config:f}=(0,c.getColumnNameAndConfig)(a,b);return f?.mode&&"tuple"!==f.mode?new g(d):new e(d)}a.s(["line",()=>i],345541);var j=d;class k extends j.PgColumnBuilder{static [b.entityKind]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new l(a,this.config)}}class l extends j.PgColumn{static [b.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function m(a){return new k(a??"")}a.s(["macaddr",()=>m],918838);var n=d;class o extends n.PgColumnBuilder{static [b.entityKind]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new p(a,this.config)}}class p extends n.PgColumn{static [b.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function q(a){return new o(a??"")}a.s(["macaddr8",()=>q],415911)},585285,780038,954801,602,543820,197881,665105,a=>{"use strict";var b=a.i(163227),c=a.i(844551),d=a.i(905302);class e extends d.PgColumnBuilder{static [b.entityKind]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new f(a,this.config)}}class f extends d.PgColumn{static [b.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class g extends d.PgColumnBuilder{static [b.entityKind]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new h(a,this.config)}}class h extends d.PgColumn{static [b.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function i(a,b){let{name:d,config:f}=(0,c.getColumnNameAndConfig)(a,b);return f?.mode&&"tuple"!==f.mode?new g(d):new e(d)}a.s(["point",()=>i],585285);var j=d;function k(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function l(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=k(b,c),d=k(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class m extends j.PgColumnBuilder{static [b.entityKind]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new n(a,this.config)}}class n extends j.PgColumn{static [b.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return l(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class o extends j.PgColumnBuilder{static [b.entityKind]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new p(a,this.config)}}class p extends j.PgColumn{static [b.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=l(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function q(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode&&"tuple"!==e.mode?new o(d):new m(d)}a.s(["geometry",()=>q],780038);var r=d;class s extends r.PgColumnBuilder{static [b.entityKind]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new t(a,this.config)}}class t extends r.PgColumn{static [b.entityKind]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function u(a){return new s(a??"")}a.s(["real",()=>u],954801);var v=d;class w extends v.PgColumnBuilder{static [b.entityKind]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new x(a,this.config)}}class x extends v.PgColumn{static [b.entityKind]="PgSerial";getSQLType(){return"serial"}}function y(a){return new w(a??"")}a.s(["serial",()=>y],602);var z=d,A=a.i(972694);class B extends A.PgIntColumnBaseBuilder{static [b.entityKind]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new C(a,this.config)}}class C extends z.PgColumn{static [b.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function D(a){return new B(a??"")}a.s(["smallint",()=>D],543820);var E=d;class F extends E.PgColumnBuilder{static [b.entityKind]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new G(a,this.config)}}class G extends E.PgColumn{static [b.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function H(a){return new F(a??"")}a.s(["smallserial",()=>H],197881);var I=d;class J extends I.PgColumnBuilder{static [b.entityKind]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new K(a,this.config)}}class K extends I.PgColumn{static [b.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function L(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new J(d,e)}a.s(["text",()=>L],665105)},574619,318830,657833,a=>{"use strict";var b=a.i(163227),c=a.i(420713),d=a.i(294476),e=a.i(737353),f=a.i(13552),g=a.i(521528),h=a.i(183632),i=a.i(510951),j=a.i(97122),k=a.i(734139),l=a.i(812070),m=a.i(986096),n=a.i(975865),o=a.i(356564),p=a.i(383217),q=a.i(345541),r=a.i(918838),s=a.i(415911),t=a.i(890714),u=a.i(585285),v=a.i(780038),w=a.i(954801),x=a.i(602),y=a.i(543820),z=a.i(197881),A=a.i(665105),B=a.i(800952),C=a.i(99450),D=a.i(731793),E=a.i(844551),F=a.i(905302);class G extends F.PgColumnBuilder{static [b.entityKind]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new H(a,this.config)}}class H extends F.PgColumn{static [b.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function I(a,b={}){let{name:c,config:d}=(0,E.getColumnNameAndConfig)(a,b);return new G(c,d)}a.s(["varchar",()=>I],318830);var J=F;class K extends J.PgColumnBuilder{static [b.entityKind]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new L(a,this.config)}}class L extends J.PgColumn{static [b.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function M(a,b){let{name:c,config:d}=(0,E.getColumnNameAndConfig)(a,b);return new K(c,d)}var N=F;class O extends N.PgColumnBuilder{static [b.entityKind]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new P(a,this.config)}}class P extends N.PgColumn{static [b.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function Q(a,b){let{name:c,config:d}=(0,E.getColumnNameAndConfig)(a,b);return new O(c,d)}var R=F;class S extends R.PgColumnBuilder{static [b.entityKind]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new T(a,this.config)}}class T extends R.PgColumn{static [b.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function U(a,b){let{name:c,config:d}=(0,E.getColumnNameAndConfig)(a,b);return new S(c,d)}var V=F;class W extends V.PgColumnBuilder{static [b.entityKind]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new X(a,this.config)}}class X extends V.PgColumn{static [b.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function Y(a,b){let{name:c,config:d}=(0,E.getColumnNameAndConfig)(a,b);return new W(c,d)}let Z=Symbol.for("drizzle:PgInlineForeignKeys"),$=Symbol.for("drizzle:EnableRLS");class _ extends c.Table{static [b.entityKind]="PgTable";static Symbol=Object.assign({},c.Table.Symbol,{InlineForeignKeys:Z,EnableRLS:$});[Z]=[];[$]=!1;[c.Table.Symbol.ExtraConfigBuilder]=void 0}let aa=(a,b,E)=>(function(a,b,E,F,G=a){let H=new _(a,F,G),J="function"==typeof b?b({bigint:d.bigint,bigserial:e.bigserial,boolean:f.boolean,char:g.char,cidr:h.cidr,customType:i.customType,date:j.date,doublePrecision:k.doublePrecision,inet:l.inet,integer:m.integer,interval:n.interval,json:o.json,jsonb:p.jsonb,line:q.line,macaddr:r.macaddr,macaddr8:s.macaddr8,numeric:t.numeric,point:u.point,geometry:v.geometry,real:w.real,serial:x.serial,smallint:y.smallint,smallserial:z.smallserial,text:A.text,time:B.time,timestamp:C.timestamp,uuid:D.uuid,varchar:I,bit:M,halfvec:Q,sparsevec:U,vector:Y}):b,K=Object.fromEntries(Object.entries(J).map(([a,b])=>{b.setName(a);let c=b.build(H);return H[Z].push(...b.buildForeignKeys(c,H)),[a,c]})),L=Object.fromEntries(Object.entries(J).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(H)]))),N=Object.assign(H,K);return N[c.Table.Symbol.Columns]=K,N[c.Table.Symbol.ExtraConfigColumns]=L,E&&(N[_.Symbol.ExtraConfigBuilder]=E),Object.assign(N,{enableRLS:()=>(N[_.Symbol.EnableRLS]=!0,N)})})(a,b,E,void 0);a.s(["PgTable",()=>_,"pgTable",()=>aa],657833);class ab{static [b.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new ac(a,this.columns,this.name)}}class ac{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [b.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[_.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}a.s(["PrimaryKeyBuilder",()=>ab],574619)},93321,530385,a=>{"use strict";var b=a.i(494415),c=a.i(163227),d=a.i(420713),e=a.i(351674);function f(a,f){return!(0,e.isDriverValueEncoder)(f)||(0,e.isSQLWrapper)(a)||(0,c.is)(a,e.Param)||(0,c.is)(a,e.Placeholder)||(0,c.is)(a,b.Column)||(0,c.is)(a,d.Table)||(0,c.is)(a,e.View)?a:new e.Param(a,f)}let g=(a,b)=>e.sql`${a} = ${f(b,a)}`,h=(a,b)=>e.sql`${a} <> ${f(b,a)}`;function i(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" and ")),new e.StringChunk(")")])}function j(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" or ")),new e.StringChunk(")")])}function k(a){return e.sql`not ${a}`}let l=(a,b)=>e.sql`${a} > ${f(b,a)}`,m=(a,b)=>e.sql`${a} >= ${f(b,a)}`,n=(a,b)=>e.sql`${a} < ${f(b,a)}`,o=(a,b)=>e.sql`${a} <= ${f(b,a)}`;function p(a,b){return Array.isArray(b)?0===b.length?e.sql`false`:e.sql`${a} in ${b.map(b=>f(b,a))}`:e.sql`${a} in ${f(b,a)}`}function q(a,b){return Array.isArray(b)?0===b.length?e.sql`true`:e.sql`${a} not in ${b.map(b=>f(b,a))}`:e.sql`${a} not in ${f(b,a)}`}function r(a){return e.sql`${a} is null`}function s(a){return e.sql`${a} is not null`}function t(a){return e.sql`exists ${a}`}function u(a){return e.sql`not exists ${a}`}function v(a,b,c){return e.sql`${a} between ${f(b,a)} and ${f(c,a)}`}function w(a,b,c){return e.sql`${a} not between ${f(b,a)} and ${f(c,a)}`}function x(a,b){return e.sql`${a} like ${b}`}function y(a,b){return e.sql`${a} not like ${b}`}function z(a,b){return e.sql`${a} ilike ${b}`}function A(a,b){return e.sql`${a} not ilike ${b}`}function B(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("arrayContains requires at least one value");let c=e.sql`${f(b,a)}`;return e.sql`${a} @> ${c}`}return e.sql`${a} @> ${f(b,a)}`}function C(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("arrayContained requires at least one value");let c=e.sql`${f(b,a)}`;return e.sql`${a} <@ ${c}`}return e.sql`${a} <@ ${f(b,a)}`}function D(a,b){if(Array.isArray(b)){if(0===b.length)throw Error("arrayOverlaps requires at least one value");let c=e.sql`${f(b,a)}`;return e.sql`${a} && ${c}`}return e.sql`${a} && ${f(b,a)}`}function E(a){return e.sql`${a} asc`}function F(a){return e.sql`${a} desc`}a.s(["and",()=>i,"arrayContained",()=>C,"arrayContains",()=>B,"arrayOverlaps",()=>D,"between",()=>v,"bindIfParam",()=>f,"eq",()=>g,"exists",()=>t,"gt",()=>l,"gte",()=>m,"ilike",()=>z,"inArray",()=>p,"isNotNull",()=>s,"isNull",()=>r,"like",()=>x,"lt",()=>n,"lte",()=>o,"ne",()=>h,"not",()=>k,"notBetween",()=>w,"notExists",()=>u,"notIlike",()=>A,"notInArray",()=>q,"notLike",()=>y,"or",()=>j],93321),a.s(["asc",()=>E,"desc",()=>F],530385)},68540,a=>{"use strict";var b=a.i(420713),c=a.i(494415),d=a.i(163227),e=a.i(574619),f=a.i(93321),g=a.i(530385),h=a.i(351674);class i{constructor(a,c,d){this.sourceTable=a,this.referencedTable=c,this.relationName=d,this.referencedTableName=c[b.Table.Symbol.Name]}static [d.entityKind]="Relation";referencedTableName;fieldName}class j{constructor(a,b){this.table=a,this.config=b}static [d.entityKind]="Relations"}class k extends i{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [d.entityKind]="One";withFieldName(a){let b=new k(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class l extends i{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [d.entityKind]="Many";withFieldName(a){let b=new l(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function m(){return{and:f.and,between:f.between,eq:f.eq,exists:f.exists,gt:f.gt,gte:f.gte,ilike:f.ilike,inArray:f.inArray,isNull:f.isNull,isNotNull:f.isNotNull,like:f.like,lt:f.lt,lte:f.lte,ne:f.ne,not:f.not,notBetween:f.notBetween,notExists:f.notExists,notLike:f.notLike,notIlike:f.notIlike,notInArray:f.notInArray,or:f.or,sql:h.sql}}function n(){return{sql:h.sql,asc:g.asc,desc:g.desc}}function o(a,c){1===Object.keys(a).length&&"default"in a&&!(0,d.is)(a.default,b.Table)&&(a=a.default);let f={},g={},h={};for(let[i,k]of Object.entries(a))if((0,d.is)(k,b.Table)){let a=(0,b.getTableUniqueName)(k),c=g[a];for(let d of(f[a]=i,h[i]={tsName:i,dbName:k[b.Table.Symbol.Name],schema:k[b.Table.Symbol.Schema],columns:k[b.Table.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]},Object.values(k[b.Table.Symbol.Columns])))d.primary&&h[i].primaryKey.push(d);let j=k[b.Table.Symbol.ExtraConfigBuilder]?.(k[b.Table.Symbol.ExtraConfigColumns]);if(j)for(let a of Object.values(j))(0,d.is)(a,e.PrimaryKeyBuilder)&&h[i].primaryKey.push(...a.columns)}else if((0,d.is)(k,j)){let a,d=(0,b.getTableUniqueName)(k.table),e=f[d];for(let[b,f]of Object.entries(k.config(c(k.table))))if(e){let c=h[e];c.relations[b]=f,a&&c.primaryKey.push(...a)}else d in g||(g[d]={relations:{},primaryKey:a}),g[d].relations[b]=f}return{tables:h,tableNamesMap:f}}function p(a,b){return new j(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function q(a){return function(b,c){return new k(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)}}function r(a){return function(b,c){return new l(a,b,c)}}function s(a,c,e){if((0,d.is)(e,k)&&e.config)return{fields:e.config.fields,references:e.config.references};let f=c[(0,b.getTableUniqueName)(e.referencedTable)];if(!f)throw Error(`Table "${e.referencedTable[b.Table.Symbol.Name]}" not found in schema`);let g=a[f];if(!g)throw Error(`Table "${f}" not found in schema`);let h=e.sourceTable,i=c[(0,b.getTableUniqueName)(h)];if(!i)throw Error(`Table "${h[b.Table.Symbol.Name]}" not found in schema`);let j=[];for(let a of Object.values(g.relations))(e.relationName&&e!==a&&a.relationName===e.relationName||!e.relationName&&a.referencedTable===e.sourceTable)&&j.push(a);if(j.length>1)throw e.relationName?Error(`There are multiple relations with name "${e.relationName}" in table "${f}"`):Error(`There are multiple relations between "${f}" and "${e.sourceTable[b.Table.Symbol.Name]}". Please specify relation name`);if(j[0]&&(0,d.is)(j[0],k)&&j[0].config)return{fields:j[0].config.references,references:j[0].config.fields};throw Error(`There is not enough information to infer relation "${i}.${e.fieldName}"`)}function t(a){return{one:q(a),many:r(a)}}a.s(["Many",()=>l,"One",()=>k,"Relation",()=>i,"Relations",()=>j,"createMany",()=>r,"createOne",()=>q,"createTableRelationsHelpers",()=>t,"extractTablesRelationalConfig",()=>o,"getOperators",()=>m,"getOrderByOperators",()=>n,"mapRelationalRow",()=>function a(b,e,f,g,i=a=>a){let j={};for(let[l,m]of g.entries())if(m.isJson){let c=e.relations[m.tsKey],g=f[l],h="string"==typeof g?JSON.parse(g):g;j[m.tsKey]=(0,d.is)(c,k)?h&&a(b,b[m.relationTableTsKey],h,m.selection,i):h.map(c=>a(b,b[m.relationTableTsKey],c,m.selection,i))}else{let a,b=i(f[l]),e=m.field;a=(0,d.is)(e,c.Column)?e:(0,d.is)(e,h.SQL)?e.decoder:e.sql.decoder,j[m.tsKey]=null===b?null:a.mapFromDriverValue(b)}return j},"normalizeRelation",()=>s,"relations",()=>p])}];

//# sourceMappingURL=node_modules_drizzle-orm_22d0902b._.js.map