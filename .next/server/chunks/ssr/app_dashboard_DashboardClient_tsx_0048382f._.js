module.exports=[31808,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(64690),e=a.i(10132),f=a.i(77573),g=a.i(30617),h=a.i(38784),i=a.i(60246),j=a.i(70106);let k=(0,j.default)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var l=a.i(72089),m=a.i(50429),n=a.i(23312);let o=(0,j.default)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),p=(0,j.default)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);var q=a.i(33217),r=a.i(6893),s=a.i(24669),t=a.i(53277),u=a.i(5539);function v({title:a,value:c,icon:d,trend:e,trendLabel:f,loading:g,color:h="text-primary"}){return g?(0,b.jsxs)(r.Card,{children:[(0,b.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(u.Skeleton,{className:"h-4 w-4 rounded"})]}),(0,b.jsxs)(r.CardContent,{children:[(0,b.jsx)(u.Skeleton,{className:"h-8 w-32 mb-2"}),(0,b.jsx)(u.Skeleton,{className:"h-3 w-20"})]})]}):(0,b.jsxs)(r.Card,{children:[(0,b.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:a}),(0,b.jsx)(d,{className:`h-4 w-4 ${h}`})]}),(0,b.jsxs)(r.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:c}),void 0!==e&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e>=0?(0,b.jsx)(s.TrendingUp,{className:"h-3 w-3 text-green-500"}):(0,b.jsx)(t.TrendingDown,{className:"h-3 w-3 text-red-500"}),(0,b.jsxs)("span",{className:e>=0?"text-green-500":"text-red-500",children:[Math.abs(e),"%"]}),f&&(0,b.jsx)("span",{children:f})]})]})]})}var w=a.i(91868),x=a.i(84505);function y({title:a,children:c,loading:d,error:e,onExport:f,actions:g}){return d?(0,b.jsxs)(r.Card,{children:[(0,b.jsx)(r.CardHeader,{children:(0,b.jsx)(u.Skeleton,{className:"h-6 w-48"})}),(0,b.jsx)(r.CardContent,{children:(0,b.jsx)(u.Skeleton,{className:"h-64 w-full"})})]}):e?(0,b.jsxs)(r.Card,{children:[(0,b.jsx)(r.CardHeader,{children:(0,b.jsx)(r.CardTitle,{children:a})}),(0,b.jsx)(r.CardContent,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:(0,b.jsx)("p",{children:e})})})]}):(0,b.jsxs)(r.Card,{children:[(0,b.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,b.jsx)(r.CardTitle,{children:a}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[g,f&&(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",onClick:f,children:[(0,b.jsx)(x.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),(0,b.jsx)(r.CardContent,{children:c})]})}var z=a.i(90166),A=a.i(77924),B=a.i(57431),C=a.i(58042),D=a.i(94222),E=a.i(54419),F=a.i(59854),G=a.i(48662);function H(){let{data:a,isLoading:c}=(0,q.useQuery)({queryKey:["/api/me/sales-dashboard"]}),{data:d,isLoading:e}=(0,q.useQuery)({queryKey:["/api/me/earnings-breakdown"]}),{data:f,isLoading:g}=(0,q.useQuery)({queryKey:["/api/me/goals"]});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Revenue",value:`$${a?.totalRevenue||0}`,icon:z.DollarSign,trend:12.5,trendLabel:"vs last week",loading:c,color:"text-green-500","data-testid":"kpi-total-revenue"}),(0,b.jsx)(v,{title:"Total Sales",value:a?.totalSales||0,icon:h.ShoppingCart,trend:8.2,trendLabel:"vs last week",loading:c,color:"text-blue-500","data-testid":"kpi-total-sales"}),(0,b.jsx)(v,{title:"Avg Sale Value",value:`$${a?.avgSale?.toFixed(2)||"0.00"}`,icon:s.TrendingUp,trend:3.1,loading:c,color:"text-purple-500","data-testid":"kpi-avg-sale-value"}),(0,b.jsx)(v,{title:"Active Goals",value:f?.filter(a=>"active"===a.status).length||0,icon:i.Users,loading:g,color:"text-orange-500","data-testid":"kpi-active-goals"})]}),(0,b.jsx)(y,{title:"Revenue Trend (Last 7 Days)",loading:c,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(B.LineChart,{data:[{date:"Mon",revenue:1200},{date:"Tue",revenue:1900},{date:"Wed",revenue:1500},{date:"Thu",revenue:2200},{date:"Fri",revenue:1800},{date:"Sat",revenue:2400},{date:"Sun",revenue:2100}],children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"date"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(A.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(y,{title:"Recent Activity",loading:c,children:(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b last:border-0",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(h.ShoppingCart,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:"New sale: Expert Advisor Pro"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a," hours ago"]})]}),(0,b.jsx)("p",{className:"font-semibold",children:"+$50"})]},a))})}),(0,b.jsx)(y,{title:"Active Goals",loading:g,children:(0,b.jsx)("div",{className:"space-y-4",children:f?.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"font-medium",children:a.goalType}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.currentValue," / ",a.targetValue]})]}),(0,b.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${a.currentValue/a.targetValue*100}%`}})})]},a.id))||(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No active goals"})})})]})]})}var I=a.i(10598),J=a.i(59162),K=a.i(13749),L=a.i(50522),M=a.i(87532);function N({columns:a,data:d,loading:e,searchable:f=!0,pageSize:g=10}){let[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(0),l=h?d.filter(b=>a.some(a=>String(b[a.key]).toLowerCase().includes(h.toLowerCase()))):d,m=l.slice(j*g,(j+1)*g),n=Math.ceil(l.length/g);return e?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)(u.Skeleton,{className:"h-64 w-full"})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[f&&(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(M.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(J.Input,{placeholder:"Search...",value:h,onChange:a=>i(a.target.value),className:"pl-9"})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(I.Table,{children:[(0,b.jsx)(I.TableHeader,{children:(0,b.jsx)(I.TableRow,{children:a.map(a=>(0,b.jsx)(I.TableHead,{children:a.label},a.key))})}),(0,b.jsx)(I.TableBody,{children:0===m.length?(0,b.jsx)(I.TableRow,{children:(0,b.jsx)(I.TableCell,{colSpan:a.length,className:"text-center text-muted-foreground",children:"No data available"})}):m.map((c,d)=>(0,b.jsx)(I.TableRow,{children:a.map(a=>(0,b.jsx)(I.TableCell,{children:a.render?a.render(c[a.key],c):c[a.key]},a.key))},d))})]})}),n>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",j*g+1," to ",Math.min((j+1)*g,l.length)," of ",l.length," results"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",onClick:()=>k(a=>Math.max(0,a-1)),disabled:0===j,children:[(0,b.jsx)(K.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",onClick:()=>k(a=>Math.min(n-1,a+1)),disabled:j===n-1,children:["Next",(0,b.jsx)(L.ChevronRight,{className:"h-4 w-4"})]})]})]})]})}var O=a.i(18549),P=a.i(24371),Q=a.i(32954),R=a.i(67937),R=R,S=a.i(81464),T=a.i(33508),U=a.i(72228);function V({onFilterChange:a,showDateRange:d=!0,showCategory:e=!1,showStatus:f=!1,categories:g=[],statuses:h=[]}){let[i,j]=(0,c.useState)(),[k,l]=(0,c.useState)(),[m,n]=(0,c.useState)(),[o,p]=(0,c.useState)();return(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-4 bg-muted/50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(S.Filter,{className:"h-4 w-4"}),"Filters:"]}),d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(P.Popover,{children:[(0,b.jsx)(P.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(R.default,{className:"h-4 w-4 mr-2"}),i?(0,U.format)(i,"MMM d, yyyy"):"From"]})}),(0,b.jsx)(P.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(O.Calendar,{mode:"single",selected:i,onSelect:j})})]}),(0,b.jsxs)(P.Popover,{children:[(0,b.jsx)(P.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(R.default,{className:"h-4 w-4 mr-2"}),k?(0,U.format)(k,"MMM d, yyyy"):"To"]})}),(0,b.jsx)(P.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(O.Calendar,{mode:"single",selected:k,onSelect:l})})]})]}),e&&(0,b.jsxs)(Q.Select,{value:m,onValueChange:n,children:[(0,b.jsx)(Q.SelectTrigger,{className:"w-40",children:(0,b.jsx)(Q.SelectValue,{placeholder:"Category"})}),(0,b.jsx)(Q.SelectContent,{children:g.map(a=>(0,b.jsx)(Q.SelectItem,{value:a,children:a},a))})]}),f&&(0,b.jsxs)(Q.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(Q.SelectTrigger,{className:"w-32",children:(0,b.jsx)(Q.SelectValue,{placeholder:"Status"})}),(0,b.jsx)(Q.SelectContent,{children:h.map(a=>(0,b.jsx)(Q.SelectItem,{value:a,children:a},a))})]}),(0,b.jsx)(w.Button,{size:"sm",onClick:()=>{a({dateFrom:i,dateTo:k,category:m,status:o})},children:"Apply"}),(0,b.jsxs)(w.Button,{size:"sm",variant:"ghost",onClick:()=>{j(void 0),l(void 0),n(void 0),p(void 0),a({})},children:[(0,b.jsx)(T.X,{className:"h-4 w-4 mr-1"}),"Reset"]})]})}let W=(0,j.default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var X=a.i(23665),Y=a.i(18155),Z=a.i(27165),$=a.i(64321),_=a.i(67149),aa=a.i(2274);function ab(){let[a,d]=(0,c.useState)({}),{data:e,isLoading:f}=(0,q.useQuery)({queryKey:["/api/me/sales-dashboard",a]}),g=[{name:"EA Pro",sales:45,revenue:2250},{name:"Indicator Pack",sales:32,revenue:960},{name:"Strategy Guide",sales:28,revenue:840},{name:"Trading Bot",sales:18,revenue:1440}],i=[{name:"Expert Advisors",value:45,color:"hsl(var(--chart-1))"},{name:"Indicators",value:30,color:"hsl(var(--chart-2))"},{name:"Articles",value:15,color:"hsl(var(--chart-3))"},{name:"Other",value:10,color:"hsl(var(--chart-4))"}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Revenue",value:`$${e?.totalRevenue||0}`,icon:z.DollarSign,trend:15.3,trendLabel:"vs last month",loading:f,color:"text-green-500","data-testid":"kpi-total-revenue"}),(0,b.jsx)(v,{title:"Total Sales",value:e?.totalSales||0,icon:h.ShoppingCart,trend:8.7,loading:f,color:"text-blue-500","data-testid":"kpi-total-sales"}),(0,b.jsx)(v,{title:"Avg Sale Value",value:`$${e?.avgSale?.toFixed(2)||"0.00"}`,icon:s.TrendingUp,trend:-2.4,loading:f,color:"text-purple-500","data-testid":"kpi-avg-sale-value"}),(0,b.jsx)(v,{title:"Conversion Rate",value:`${e?.conversionRate||0}%`,icon:W,trend:4.1,loading:f,color:"text-orange-500","data-testid":"kpi-conversion-rate"})]}),(0,b.jsx)(V,{onFilterChange:d,showDateRange:!0,showCategory:!0,categories:["Expert Advisors","Indicators","Articles"]}),(0,b.jsx)(y,{title:"Revenue Timeline (Last 30 Days)",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(B.LineChart,{data:g,children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"name"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(aa.Legend,{}),(0,b.jsx)(A.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(y,{title:"Top 10 Products",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(Y.BarChart,{data:g,children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"name"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(X.Bar,{dataKey:"sales",fill:"hsl(var(--primary))"})]})})}),(0,b.jsx)(y,{title:"Sales by Product Type",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)($.PieChart,{children:[(0,b.jsx)(Z.Pie,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:b})=>`${a}: ${(100*b).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:i.map((a,c)=>(0,b.jsx)(_.Cell,{fill:a.color},`cell-${c}`))}),(0,b.jsx)(F.Tooltip,{})]})})})]}),(0,b.jsx)(y,{title:"Recent Sales",loading:f,children:(0,b.jsx)(N,{columns:[{key:"product",label:"Product"},{key:"buyer",label:"Buyer"},{key:"price",label:"Price"},{key:"date",label:"Date"}],data:[{product:"EA Pro v2",buyer:"trader123",price:"$50",date:"2 hours ago"},{product:"Indicator Set",buyer:"forex_master",price:"$30",date:"5 hours ago"},{product:"Strategy Guide",buyer:"newbie_trader",price:"$25",date:"1 day ago"}],loading:f})})]})}var ac=a.i(70025),ad=a.i(71871),ae=a.i(76725);let af=(0,j.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var ag=a.i(5151),ah=a.i(33441),ai=a.i(53569),aj=a.i(85811),ak=a.i(39622);function al(){let[a,d]=(0,c.useState)(!1),{toast:e}=(0,ae.useToast)(),{data:f,isLoading:g}=(0,q.useQuery)({queryKey:["/api/me/referral-stats"]}),{data:h,isLoading:j}=(0,q.useQuery)({queryKey:["/api/me/referrals"]}),k=(0,ac.useMutation)({mutationFn:()=>(0,ad.apiRequest)("POST","/api/me/generate-referral-code"),onSuccess:()=>{ad.queryClient.invalidateQueries({queryKey:["/api/me/referrals"]}),e({title:"Referral code generated!",description:"Share your new link to start earning."})}}),l="https://yoforex.com/ref/ABC123";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Referrals",value:f?.totalReferrals||0,icon:i.Users,trend:12,trendLabel:"this month",loading:g,color:"text-blue-500","data-testid":"kpi-total-referrals"}),(0,b.jsx)(v,{title:"Total Earnings",value:`$${f?.totalEarnings||0}`,icon:z.DollarSign,trend:18.5,loading:g,color:"text-green-500","data-testid":"kpi-referral-total-earnings"}),(0,b.jsx)(v,{title:"This Month",value:`$${f?.monthlyEarnings||0}`,icon:s.TrendingUp,loading:g,color:"text-purple-500","data-testid":"kpi-referral-month-earnings"}),(0,b.jsx)(v,{title:"Avg per User",value:`$${f?.totalReferrals?(f.totalEarnings/f.totalReferrals).toFixed(2):"0.00"}`,icon:z.DollarSign,loading:g,color:"text-orange-500","data-testid":"kpi-referral-avg-per-user"})]}),(0,b.jsx)(y,{title:"Your Referral Link",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(J.Input,{value:l,readOnly:!0,className:"flex-1","data-testid":"input-referral-link"}),(0,b.jsx)(w.Button,{onClick:()=>{navigator.clipboard.writeText(l),d(!0),e({title:"Copied!",description:"Referral link copied to clipboard"}),setTimeout(()=>d(!1),2e3)},variant:"outline","data-testid":"button-copy-link",children:a?(0,b.jsx)(ah.Check,{className:"h-4 w-4"}):(0,b.jsx)(ag.Copy,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(w.Button,{variant:"outline",size:"sm","data-testid":"button-share-twitter",children:[(0,b.jsx)(ai.Share2,{className:"h-4 w-4 mr-2"}),"Share on Twitter"]}),(0,b.jsxs)(w.Button,{variant:"outline",size:"sm","data-testid":"button-share-telegram",children:[(0,b.jsx)(ai.Share2,{className:"h-4 w-4 mr-2"}),"Share on Telegram"]}),(0,b.jsxs)(w.Button,{onClick:()=>k.mutate(),variant:"outline",size:"sm","data-testid":"button-generate-new",children:[(0,b.jsx)(af,{className:"h-4 w-4 mr-2"}),"Generate New Code"]})]})]})}),(0,b.jsx)(y,{title:"Referral Earnings Timeline",loading:g,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(ak.AreaChart,{data:[{month:"Jan",earnings:45},{month:"Feb",earnings:52},{month:"Mar",earnings:78},{month:"Apr",earnings:95},{month:"May",earnings:120},{month:"Jun",earnings:145}],children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"month"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(aj.Area,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3})]})})}),(0,b.jsx)(y,{title:"Your Referrals",loading:j,children:(0,b.jsx)(N,{columns:[{key:"username",label:"Username"},{key:"joined",label:"Joined Date"},{key:"earnings",label:"Your Earnings"},{key:"status",label:"Status"}],data:h||[{username:"trader123",joined:"2024-01-15",earnings:"$45",status:"Active"},{username:"forex_pro",joined:"2024-02-20",earnings:"$32",status:"Active"},{username:"newbie_t",joined:"2024-03-05",earnings:"$18",status:"Active"}],loading:j})})]})}var am=a.i(77156),an=a.i(21374),ao=a.i(63588);function ap(){let{data:a,isLoading:c}=(0,q.useQuery)({queryKey:["/api/me/sales-dashboard"]}),d=[{name:"EA Pro v2",views:3450,downloads:1250,rating:4.8},{name:"Indicator Pack",views:2890,downloads:980,rating:4.6},{name:"Strategy Guide",views:2340,downloads:750,rating:4.9},{name:"Trading Bot",views:1890,downloads:520,rating:4.5}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Views",value:"15.2K",icon:am.Eye,trend:12.5,trendLabel:"vs last month",loading:c,color:"text-blue-500","data-testid":"kpi-total-views"}),(0,b.jsx)(v,{title:"Total Downloads",value:"4.5K",icon:x.Download,trend:8.3,loading:c,color:"text-green-500","data-testid":"kpi-total-downloads"}),(0,b.jsx)(v,{title:"Avg Rating",value:"4.7",icon:an.Star,loading:c,color:"text-yellow-500","data-testid":"kpi-avg-rating"}),(0,b.jsx)(v,{title:"Total Reviews",value:"328",icon:ao.MessageSquare,trend:15.2,loading:c,color:"text-purple-500","data-testid":"kpi-total-reviews"})]}),(0,b.jsx)(y,{title:"Content Views & Downloads Trend",loading:c,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(B.LineChart,{data:[{date:"Jan",views:1200,downloads:450},{date:"Feb",views:1500,downloads:520},{date:"Mar",views:1800,downloads:680},{date:"Apr",views:2200,downloads:790},{date:"May",views:2500,downloads:850},{date:"Jun",views:2800,downloads:920}],children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"date"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(aa.Legend,{}),(0,b.jsx)(A.Line,{type:"monotone",dataKey:"views",stroke:"hsl(var(--primary))",strokeWidth:2}),(0,b.jsx)(A.Line,{type:"monotone",dataKey:"downloads",stroke:"hsl(var(--chart-2))",strokeWidth:2})]})})}),(0,b.jsx)(y,{title:"Top Content Performance",loading:c,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(Y.BarChart,{data:d,children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"name"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(aa.Legend,{}),(0,b.jsx)(X.Bar,{dataKey:"views",fill:"hsl(var(--primary))"}),(0,b.jsx)(X.Bar,{dataKey:"downloads",fill:"hsl(var(--chart-2))"})]})})}),(0,b.jsx)(y,{title:"Content Performance Details",loading:c,children:(0,b.jsx)(N,{columns:[{key:"name",label:"Content"},{key:"views",label:"Views"},{key:"downloads",label:"Downloads"},{key:"rating",label:"Rating",render:a=>(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(an.Star,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"}),a]})}],data:d,loading:c})})]})}var aq=a.i(56738);let ar=(0,j.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function as(){let[a,d]=(0,c.useState)({}),{data:e,isLoading:f}=(0,q.useQuery)({queryKey:["/api/me/earnings-breakdown",a]}),g=[{name:"Sales",value:65,coins:13e3,color:"hsl(var(--chart-1))"},{name:"Referrals",value:20,coins:4e3,color:"hsl(var(--chart-2))"},{name:"Replies",value:10,coins:2e3,color:"hsl(var(--chart-3))"},{name:"Other",value:5,coins:1e3,color:"hsl(var(--chart-4))"}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Earnings",value:`${e?.total||2e4} coins`,icon:l.Coins,trend:15.3,trendLabel:"vs last month",loading:f,color:"text-yellow-500","data-testid":"kpi-total-earnings"}),(0,b.jsx)(v,{title:"This Month",value:"920 coins",icon:s.TrendingUp,trend:8.2,loading:f,color:"text-green-500","data-testid":"kpi-month-earnings"}),(0,b.jsx)(v,{title:"Current Balance",value:"5,430 coins",icon:aq.Wallet,loading:f,color:"text-blue-500","data-testid":"kpi-current-balance"}),(0,b.jsx)(v,{title:"Pending Withdrawal",value:"0 coins",icon:ar,loading:f,color:"text-purple-500","data-testid":"kpi-pending-withdrawal"})]}),(0,b.jsx)(V,{onFilterChange:d,showDateRange:!0,showCategory:!0,categories:["Sales","Referrals","Replies","Other"]}),(0,b.jsx)(y,{title:"Earnings Timeline",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(ak.AreaChart,{data:[{month:"Jan",earnings:450},{month:"Feb",earnings:520},{month:"Mar",earnings:680},{month:"Apr",earnings:790},{month:"May",earnings:850},{month:"Jun",earnings:920}],children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"month"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(aj.Area,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3})]})})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(y,{title:"Earnings by Source",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)($.PieChart,{children:[(0,b.jsx)(Z.Pie,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:b})=>`${a}: ${(100*b).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((a,c)=>(0,b.jsx)(_.Cell,{fill:a.color},`cell-${c}`))}),(0,b.jsx)(F.Tooltip,{})]})})}),(0,b.jsx)(y,{title:"Source Breakdown",loading:f,children:(0,b.jsx)("div",{className:"space-y-4",children:g.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold",children:[a.coins," coins"]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.value,"%"]})]})]},a.name))})})]}),(0,b.jsx)(y,{title:"Recent Transactions",loading:f,children:(0,b.jsx)(N,{columns:[{key:"type",label:"Type"},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:a=>(0,b.jsx)("span",{className:a.startsWith("+")?"text-green-500 font-semibold":"text-red-500 font-semibold",children:a})},{key:"date",label:"Date"}],data:[{type:"Sale",description:"EA Pro purchased",amount:"+500 coins",date:"2 hours ago"},{type:"Referral",description:"New user signup",amount:"+50 coins",date:"5 hours ago"},{type:"Reply",description:"Forum contribution",amount:"+1 coin",date:"1 day ago"},{type:"Withdrawal",description:"USDT withdrawal",amount:"-1000 coins",date:"2 days ago"}],loading:f})})]})}var at=a.i(32246),au=a.i(35221),av=a.i(16201),aw=a.i(41710),ax=a.i(15618),ay=a.i(74601);function az(){let[a,d]=(0,c.useState)(!1),[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),{toast:i}=(0,ae.useToast)(),{data:j=[],isLoading:k}=(0,q.useQuery)({queryKey:["/api/me/goals"]}),{data:l,isLoading:n}=(0,q.useQuery)({queryKey:["/api/me/achievements"]}),o=(0,ac.useMutation)({mutationFn:a=>(0,ad.apiRequest)("POST","/api/me/goals",a),onSuccess:()=>{ad.queryClient.invalidateQueries({queryKey:["/api/me/goals"]}),i({title:"Goal created!",description:"Your new goal has been set."}),d(!1)}}),p=j.filter(a=>"active"===a.status),r=j.filter(a=>"completed"===a.status);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Active Goals",value:p.length,icon:m.Target,loading:k,color:"text-blue-500","data-testid":"kpi-active-goals"}),(0,b.jsx)(v,{title:"Completed",value:r.length,icon:av.CheckCircle,loading:k,color:"text-green-500","data-testid":"kpi-completed-goals"}),(0,b.jsx)(v,{title:"In Progress",value:p.filter(a=>a.currentValue>0).length,icon:s.TrendingUp,loading:k,color:"text-purple-500","data-testid":"kpi-in-progress-goals"}),(0,b.jsx)(v,{title:"Pending",value:p.filter(a=>0===a.currentValue).length,icon:aw.Clock,loading:k,color:"text-orange-500","data-testid":"kpi-pending-goals"})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(at.Dialog,{open:a,onOpenChange:d,children:[(0,b.jsx)(at.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(w.Button,{"data-testid":"button-create-goal",children:[(0,b.jsx)(ax.Plus,{className:"h-4 w-4 mr-2"}),"Create New Goal"]})}),(0,b.jsxs)(at.DialogContent,{children:[(0,b.jsx)(at.DialogHeader,{children:(0,b.jsx)(at.DialogTitle,{children:"Create New Goal"})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(au.Label,{children:"Goal Type"}),(0,b.jsxs)(Q.Select,{value:e,onValueChange:f,children:[(0,b.jsx)(Q.SelectTrigger,{"data-testid":"select-goal-type",children:(0,b.jsx)(Q.SelectValue,{placeholder:"Select goal type"})}),(0,b.jsxs)(Q.SelectContent,{children:[(0,b.jsx)(Q.SelectItem,{value:"sales",children:"Monthly Sales"}),(0,b.jsx)(Q.SelectItem,{value:"revenue",children:"Revenue Target"}),(0,b.jsx)(Q.SelectItem,{value:"referrals",children:"Referral Count"}),(0,b.jsx)(Q.SelectItem,{value:"followers",children:"Follower Count"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(au.Label,{children:"Target Value"}),(0,b.jsx)(J.Input,{type:"number",value:g,onChange:a=>h(a.target.value),placeholder:"e.g., 100","data-testid":"input-target-value"})]}),(0,b.jsx)(w.Button,{onClick:()=>{let a=new Date,b=new Date;b.setMonth(b.getMonth()+1),o.mutate({goalType:e,targetValue:parseInt(g),currentValue:0,startDate:a.toISOString(),endDate:b.toISOString(),status:"active"})},disabled:!e||!g||o.isPending,className:"w-full","data-testid":"button-submit-goal",children:"Create Goal"})]})]})]})}),(0,b.jsx)(y,{title:"Active Goals",loading:k,children:(0,b.jsx)("div",{className:"space-y-6",children:0===p.length?(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No active goals. Create one to get started!"}):p.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.goalType}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.currentValue," / ",a.targetValue]})]}),(0,b.jsxs)("span",{className:"text-sm font-semibold",children:[Math.round(a.currentValue/a.targetValue*100),"%"]})]}),(0,b.jsx)(ay.Progress,{value:a.currentValue/a.targetValue*100})]},a.id))})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(y,{title:"Completed Goals",loading:k,children:(0,b.jsx)("div",{className:"space-y-4",children:0===r.length?(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No completed goals yet"}):r.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b last:border-0",children:[(0,b.jsx)(av.CheckCircle,{className:"h-5 w-5 text-green-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.goalType}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Target: ",a.targetValue]})]})]},a.id))})}),(0,b.jsx)(y,{title:"Achievement Badges",loading:n,children:(0,b.jsx)("div",{className:"grid grid-cols-3 gap-4",children:l?.slice(0,6).map(a=>(0,b.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:a.achievement?.icon||"ðŸ†"})}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.achievement?.name}),a.unlockedAt?(0,b.jsx)("span",{className:"text-xs text-green-500",children:"Unlocked"}):(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.progress,"/",a.achievement?.requirement]})]},a.id))||(0,b.jsx)("p",{className:"text-muted-foreground text-center col-span-3",children:"No achievements yet"})})})]})]})}let aA=(0,j.default)("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var aB=a.i(92258),aC=a.i(61792);function aD(){let[a,d]=(0,c.useState)({}),{toast:e}=(0,ae.useToast)(),{data:f,isLoading:g}=(0,q.useQuery)({queryKey:["/api/me/notifications",a]}),h=(0,ac.useMutation)({mutationFn:async a=>await (0,ad.apiRequest)("PATCH",`/api/notifications/${a}/read`),onSuccess:()=>{ad.queryClient.invalidateQueries({queryKey:["/api/me/notifications"]}),e({title:"Success",description:"Notification marked as read"})}}),i=(0,ac.useMutation)({mutationFn:async()=>await (0,ad.apiRequest)("POST","/api/notifications/mark-all-read"),onSuccess:()=>{ad.queryClient.invalidateQueries({queryKey:["/api/me/notifications"]}),e({title:"Success",description:"All notifications marked as read"})}}),j=f||[],k=j.filter(a=>!a.isRead).length,l=j.filter(a=>new Date(a.createdAt).toDateString()===new Date().toDateString()).length,m=[{type:"system",count:j.filter(a=>"system"===a.type).length},{type:"sale",count:j.filter(a=>"sale"===a.type).length},{type:"message",count:j.filter(a=>"message"===a.type).length},{type:"alert",count:j.filter(a=>"alert"===a.type).length}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Notifications",value:j.length,icon:n.Bell,loading:g,color:"text-blue-500","data-testid":"kpi-total-notifications"}),(0,b.jsx)(v,{title:"Unread",value:k,icon:aB.Mail,loading:g,color:"text-orange-500","data-testid":"kpi-unread-notifications"}),(0,b.jsx)(v,{title:"Today",value:l,icon:n.Bell,loading:g,color:"text-green-500","data-testid":"kpi-today-notifications"}),(0,b.jsx)(v,{title:"Read",value:j.length-k,icon:av.CheckCircle,loading:g,color:"text-gray-500","data-testid":"kpi-read-notifications"})]}),(0,b.jsx)(V,{onFilterChange:d,showCategory:!0,showStatus:!0,categories:["system","sale","message","alert"],statuses:["read","unread"]}),(0,b.jsx)(y,{title:"Notification Feed",loading:g,actions:(0,b.jsxs)(w.Button,{variant:"outline",size:"sm",onClick:()=>i.mutate(),disabled:i.isPending||0===k,"data-testid":"button-mark-all-read",children:[(0,b.jsx)(av.CheckCircle,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]}),children:(0,b.jsx)("div",{className:"space-y-2",children:0===j.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(aA,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No notifications"})]}):j.map(a=>(0,b.jsxs)("div",{className:`flex items-start gap-4 p-4 border rounded-lg ${!a.isRead?"bg-muted/50":""}`,"data-testid":`notification-${a.id}`,children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-semibold","data-testid":`notification-title-${a.id}`,children:a.title}),!a.isRead&&(0,b.jsx)(aC.Badge,{variant:"default","data-testid":`badge-unread-${a.id}`,children:"New"}),(0,b.jsx)(aC.Badge,{variant:"outline","data-testid":`badge-type-${a.id}`,children:a.type})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2","data-testid":`notification-description-${a.id}`,children:a.description}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString()})]}),!a.isRead&&(0,b.jsx)(w.Button,{variant:"ghost",size:"sm",onClick:()=>h.mutate(a.id),disabled:h.isPending,"data-testid":`button-mark-read-${a.id}`,children:(0,b.jsx)(av.CheckCircle,{className:"h-4 w-4"})})]},a.id))})}),(0,b.jsx)(y,{title:"Notifications by Type",loading:g,children:(0,b.jsx)(N,{columns:[{key:"type",label:"Type"},{key:"count",label:"Count"}],data:m,loading:g,searchable:!1})})]})}var aE=a.i(17371),aF=a.i(53390);function aG(){let[a,d]=(0,c.useState)({}),{data:e,isLoading:f}=(0,q.useQuery)({queryKey:["/api/me/customers",a]}),{data:g,isLoading:h}=(0,q.useQuery)({queryKey:["/api/me/customer-stats"]}),j=e||[],k=j.length,l=j.filter(a=>new Date(a.joinedAt).getTime()>Date.now()-2592e6).length,n=j.filter(a=>"active"===a.segment||"high-value"===a.segment).length,o=[{name:"High Value",value:j.filter(a=>"high-value"===a.segment).length,color:"hsl(var(--chart-1))"},{name:"Active",value:j.filter(a=>"active"===a.segment).length,color:"hsl(var(--chart-2))"},{name:"New",value:j.filter(a=>"new"===a.segment).length,color:"hsl(var(--chart-3))"},{name:"Inactive",value:j.filter(a=>"inactive"===a.segment).length,color:"hsl(var(--chart-4))"}],p=[...j].sort((a,b)=>b.totalSpent-a.totalSpent).slice(0,5);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Total Customers",value:k,icon:i.Users,loading:f,color:"text-blue-500","data-testid":"kpi-total-customers"}),(0,b.jsx)(v,{title:"New This Month",value:l,icon:aE.UserPlus,trend:12.5,trendLabel:"vs last month",loading:f,color:"text-green-500","data-testid":"kpi-new-customers"}),(0,b.jsx)(v,{title:"Active Customers",value:n,icon:s.TrendingUp,loading:f,color:"text-purple-500","data-testid":"kpi-active-customers"}),(0,b.jsx)(v,{title:"Retention Rate",value:`${g?.retentionRate||85}%`,icon:m.Target,trend:3.2,loading:h,color:"text-orange-500","data-testid":"kpi-retention-rate"})]}),(0,b.jsx)(V,{onFilterChange:d,showDateRange:!0,showCategory:!0,showStatus:!0,categories:["high-value","active","new","inactive"],statuses:["active","inactive"]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(y,{title:"Customer Segmentation",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)($.PieChart,{children:[(0,b.jsx)(Z.Pie,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:b})=>`${a}: ${(100*b).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map((a,c)=>(0,b.jsx)(_.Cell,{fill:a.color},`cell-${c}`))}),(0,b.jsx)(F.Tooltip,{})]})})}),(0,b.jsx)(y,{title:"Top 5 Customers by Spend",loading:f,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(Y.BarChart,{data:p,children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"username"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(X.Bar,{dataKey:"totalSpent",fill:"hsl(var(--primary))"})]})})})]}),(0,b.jsx)(y,{title:"Customer List",loading:f,children:(0,b.jsx)(N,{columns:[{key:"username",label:"Customer",render:(a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(aF.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(aF.AvatarImage,{src:c.avatar}),(0,b.jsx)(aF.AvatarFallback,{children:a.substring(0,2).toUpperCase()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium","data-testid":`customer-name-${c.id}`,children:a}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:c.email})]})]})},{key:"segment",label:"Segment",render:a=>(0,b.jsx)(aC.Badge,{variant:(a=>{switch(a){case"high-value":return"default";case"active":return"secondary";case"new":default:return"outline";case"inactive":return"destructive"}})(a),"data-testid":`segment-${a}`,children:a.replace("-"," ")})},{key:"totalPurchases",label:"Purchases",render:a=>(0,b.jsx)("span",{"data-testid":"customer-purchases",children:a})},{key:"totalSpent",label:"Total Spent",render:a=>(0,b.jsxs)("span",{className:"font-semibold","data-testid":"customer-spent",children:[a," coins"]})},{key:"lastPurchase",label:"Last Purchase",render:a=>(0,b.jsx)("span",{className:"text-sm",children:a?new Date(a).toLocaleDateString():"Never"})},{key:"id",label:"Actions",render:a=>(0,b.jsx)(w.Button,{variant:"outline",size:"sm","data-testid":`button-view-customer-${a}`,children:"View Profile"})}],data:j,loading:f})})]})}var aH=a.i(65910),aI=a.i(97799);function aJ(){let[a,d]=(0,c.useState)({}),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)({name:"",type:"email",subject:"",content:""}),{toast:i}=(0,ae.useToast)(),{data:j,isLoading:k}=(0,q.useQuery)({queryKey:["/api/me/campaigns",a]}),{data:l,isLoading:m}=(0,q.useQuery)({queryKey:["/api/me/campaign-stats"]}),n=(0,ac.useMutation)({mutationFn:async a=>await (0,ad.apiRequest)("POST","/api/campaigns",a),onSuccess:()=>{ad.queryClient.invalidateQueries({queryKey:["/api/me/campaigns"]}),f(!1),h({name:"",type:"email",subject:"",content:""}),i({title:"Success",description:"Campaign created successfully"})}}),o=j||[],p=o.filter(a=>"active"===a.status).length,r=o.reduce((a,b)=>a+b.sentCount,0),t=o.length>0?o.reduce((a,b)=>a+b.openRate,0)/o.length:0,u=o.length>0?o.reduce((a,b)=>a+b.clickRate,0)/o.length:0,x=o.map(a=>({name:a.name.length>15?a.name.substring(0,15)+"...":a.name,opens:a.openRate,clicks:a.clickRate})),H=o.filter(a=>a.revenue>0).map(a=>({name:a.name.length>15?a.name.substring(0,15)+"...":a.name,revenue:a.revenue}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(v,{title:"Active Campaigns",value:p,icon:aB.Mail,loading:k,color:"text-blue-500","data-testid":"kpi-active-campaigns"}),(0,b.jsx)(v,{title:"Total Sent",value:r.toLocaleString(),icon:s.TrendingUp,trend:15.3,trendLabel:"vs last month",loading:k,color:"text-green-500","data-testid":"kpi-total-sent"}),(0,b.jsx)(v,{title:"Avg Open Rate",value:`${t.toFixed(1)}%`,icon:aB.Mail,trend:2.4,loading:k,color:"text-purple-500","data-testid":"kpi-avg-open-rate"}),(0,b.jsx)(v,{title:"Avg Click Rate",value:`${u.toFixed(1)}%`,icon:aH.MousePointer,trend:1.8,loading:k,color:"text-orange-500","data-testid":"kpi-avg-click-rate"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(V,{onFilterChange:d,showDateRange:!0,showCategory:!0,showStatus:!0,categories:["email","banner","social"],statuses:["draft","active","paused","completed"]}),(0,b.jsxs)(at.Dialog,{open:e,onOpenChange:f,children:[(0,b.jsx)(at.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(w.Button,{"data-testid":"button-create-campaign",children:[(0,b.jsx)(ax.Plus,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})}),(0,b.jsxs)(at.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(at.DialogHeader,{children:[(0,b.jsx)(at.DialogTitle,{children:"Create New Campaign"}),(0,b.jsx)(at.DialogDescription,{children:"Set up a new marketing campaign to engage your customers"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(au.Label,{htmlFor:"campaign-name",children:"Campaign Name"}),(0,b.jsx)(J.Input,{id:"campaign-name",placeholder:"e.g., Summer Sale 2024",value:g.name,onChange:a=>h({...g,name:a.target.value}),"data-testid":"input-campaign-name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(au.Label,{htmlFor:"campaign-type",children:"Type"}),(0,b.jsxs)(Q.Select,{value:g.type,onValueChange:a=>h({...g,type:a}),children:[(0,b.jsx)(Q.SelectTrigger,{id:"campaign-type","data-testid":"select-campaign-type",children:(0,b.jsx)(Q.SelectValue,{})}),(0,b.jsxs)(Q.SelectContent,{children:[(0,b.jsx)(Q.SelectItem,{value:"email",children:"Email"}),(0,b.jsx)(Q.SelectItem,{value:"banner",children:"Banner"}),(0,b.jsx)(Q.SelectItem,{value:"social",children:"Social Media"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(au.Label,{htmlFor:"campaign-subject",children:"Subject Line"}),(0,b.jsx)(J.Input,{id:"campaign-subject",placeholder:"e.g., Get 50% off all EAs this week!",value:g.subject,onChange:a=>h({...g,subject:a.target.value}),"data-testid":"input-campaign-subject"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(au.Label,{htmlFor:"campaign-content",children:"Content"}),(0,b.jsx)(aI.Textarea,{id:"campaign-content",placeholder:"Write your campaign message...",rows:5,value:g.content,onChange:a=>h({...g,content:a.target.value}),"data-testid":"textarea-campaign-content"})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(w.Button,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-cancel-campaign",children:"Cancel"}),(0,b.jsx)(w.Button,{onClick:()=>{n.mutate(g)},disabled:n.isPending||!g.name,"data-testid":"button-submit-campaign",children:n.isPending?"Creating...":"Create Campaign"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(y,{title:"Campaign Performance (Open & Click Rates)",loading:k,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(Y.BarChart,{data:x,children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"name"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(aa.Legend,{}),(0,b.jsx)(X.Bar,{dataKey:"opens",fill:"hsl(var(--chart-1))",name:"Open Rate %"}),(0,b.jsx)(X.Bar,{dataKey:"clicks",fill:"hsl(var(--chart-2))",name:"Click Rate %"})]})})}),(0,b.jsx)(y,{title:"Revenue by Campaign",loading:k,children:(0,b.jsx)(G.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(B.LineChart,{data:H,children:[(0,b.jsx)(E.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(C.XAxis,{dataKey:"name"}),(0,b.jsx)(D.YAxis,{}),(0,b.jsx)(F.Tooltip,{}),(0,b.jsx)(A.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,b.jsx)(y,{title:"All Campaigns",loading:k,children:(0,b.jsx)(N,{columns:[{key:"name",label:"Campaign",render:a=>(0,b.jsx)("span",{className:"font-medium","data-testid":`campaign-name-${a}`,children:a})},{key:"type",label:"Type",render:a=>(0,b.jsx)(aC.Badge,{variant:"outline","data-testid":`campaign-type-${a}`,children:a})},{key:"status",label:"Status",render:a=>(0,b.jsx)(aC.Badge,{variant:(a=>{switch(a){case"active":return"default";case"draft":return"secondary";case"paused":default:return"outline";case"completed":return"destructive"}})(a),"data-testid":`campaign-status-${a}`,children:a})},{key:"sentCount",label:"Sent",render:a=>(0,b.jsx)("span",{"data-testid":"campaign-sent",children:a.toLocaleString()})},{key:"openRate",label:"Open Rate",render:a=>(0,b.jsxs)("span",{className:"text-green-500 font-semibold","data-testid":"campaign-open-rate",children:[a.toFixed(1),"%"]})},{key:"clickRate",label:"Click Rate",render:a=>(0,b.jsxs)("span",{className:"text-blue-500 font-semibold","data-testid":"campaign-click-rate",children:[a.toFixed(1),"%"]})},{key:"conversions",label:"Conversions",render:a=>(0,b.jsx)("span",{"data-testid":"campaign-conversions",children:a})},{key:"revenue",label:"Revenue",render:a=>(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(z.DollarSign,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"font-semibold","data-testid":"campaign-revenue",children:a})]})}],data:o,loading:k})})]})}function aK(){let[a,j]=(0,c.useState)("overview");return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:"Manage your business, track performance, and grow your revenue"})]}),(0,b.jsxs)(f.Tabs,{value:a,onValueChange:j,className:"space-y-6",children:[(0,b.jsxs)(f.TabsList,{className:"flex flex-wrap gap-2 h-auto bg-muted/50 p-2","data-testid":"tabs-dashboard-navigation",children:[(0,b.jsxs)(f.TabsTrigger,{value:"overview",className:"flex items-center gap-2","data-testid":"tab-overview",children:[(0,b.jsx)(g.LayoutDashboard,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"sales",className:"flex items-center gap-2","data-testid":"tab-sales",children:[(0,b.jsx)(h.ShoppingCart,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Sales"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"referrals",className:"flex items-center gap-2","data-testid":"tab-referrals",children:[(0,b.jsx)(i.Users,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Referrals"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"analytics",className:"flex items-center gap-2","data-testid":"tab-analytics",children:[(0,b.jsx)(k,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Analytics"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"earnings",className:"flex items-center gap-2","data-testid":"tab-earnings",children:[(0,b.jsx)(l.Coins,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Earnings"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"goals",className:"flex items-center gap-2","data-testid":"tab-goals",children:[(0,b.jsx)(m.Target,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Goals"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"notifications",className:"flex items-center gap-2","data-testid":"tab-notifications",children:[(0,b.jsx)(n.Bell,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Notifications"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"crm",className:"flex items-center gap-2","data-testid":"tab-crm",children:[(0,b.jsx)(o,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"CRM"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"marketing",className:"flex items-center gap-2","data-testid":"tab-marketing",children:[(0,b.jsx)(p,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Marketing"})]})]}),(0,b.jsx)(f.TabsContent,{value:"overview","data-testid":"content-overview",children:(0,b.jsx)(H,{})}),(0,b.jsx)(f.TabsContent,{value:"sales","data-testid":"content-sales",children:(0,b.jsx)(ab,{})}),(0,b.jsx)(f.TabsContent,{value:"referrals","data-testid":"content-referrals",children:(0,b.jsx)(al,{})}),(0,b.jsx)(f.TabsContent,{value:"analytics","data-testid":"content-analytics",children:(0,b.jsx)(ap,{})}),(0,b.jsx)(f.TabsContent,{value:"earnings","data-testid":"content-earnings",children:(0,b.jsx)(as,{})}),(0,b.jsx)(f.TabsContent,{value:"goals","data-testid":"content-goals",children:(0,b.jsx)(az,{})}),(0,b.jsx)(f.TabsContent,{value:"notifications","data-testid":"content-notifications",children:(0,b.jsx)(aD,{})}),(0,b.jsx)(f.TabsContent,{value:"crm","data-testid":"content-crm",children:(0,b.jsx)(aG,{})}),(0,b.jsx)(f.TabsContent,{value:"marketing","data-testid":"content-marketing",children:(0,b.jsx)(aJ,{})})]})]}),(0,b.jsx)(e.default,{})]})}a.s(["default",()=>aK],31808)}];

//# sourceMappingURL=app_dashboard_DashboardClient_tsx_0048382f._.js.map