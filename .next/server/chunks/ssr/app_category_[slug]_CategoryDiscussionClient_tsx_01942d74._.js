module.exports=[478636,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(433217),e=a.i(50944),f=a.i(564690),g=a.i(110132),h=a.i(206893),i=a.i(991868),j=a.i(561792),k=a.i(405539),l=a.i(959162),m=a.i(811011),n=a.i(50522),o=a.i(170106);(0,o.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var p=a.i(189736);let q=c.forwardRef(({...a},c)=>(0,b.jsx)("nav",{ref:c,"aria-label":"breadcrumb",...a}));q.displayName="Breadcrumb";let r=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("ol",{ref:d,className:(0,p.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",a),...c}));r.displayName="BreadcrumbList";let s=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("li",{ref:d,className:(0,p.cn)("inline-flex items-center gap-1.5",a),...c}));s.displayName="BreadcrumbItem";let t=c.forwardRef(({asChild:a,className:c,...d},e)=>{let f=a?m.Slot:"a";return(0,b.jsx)(f,{ref:e,className:(0,p.cn)("transition-colors hover:text-foreground",c),...d})});t.displayName="BreadcrumbLink";let u=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("span",{ref:d,role:"link","aria-disabled":"true","aria-current":"page",className:(0,p.cn)("font-normal text-foreground",a),...c}));u.displayName="BreadcrumbPage";let v=({children:a,className:c,...d})=>(0,b.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,p.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",c),...d,children:a??(0,b.jsx)(n.ChevronRight,{})});v.displayName="BreadcrumbSeparator";var w=a.i(238246),x=a.i(275036),y=a.i(563588),z=a.i(104720),A=a.i(915618),B=a.i(724669),C=a.i(641710),D=a.i(821374),E=a.i(587532);let F=(0,o.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);function G({slug:a,initialCategory:m,initialThreads:n}){let o=(0,e.useRouter)(),{requireAuth:p,AuthPrompt:G}=(0,x.useAuthPrompt)("create a thread"),[H,I]=(0,c.useState)("latest"),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("");(0,c.useEffect)(()=>{let a=setTimeout(()=>{M(J)},300);return()=>clearTimeout(a)},[J]);let{data:N,isLoading:O}=(0,d.useQuery)({queryKey:["/api/categories",a],initialData:m,enabled:!!a}),{data:P}=(0,d.useQuery)({queryKey:["/api/categories"]}),{data:Q}=(0,d.useQuery)({queryKey:["/api/categories",a,"subcategories"],enabled:!!a}),{data:R,isLoading:S}=(0,d.useQuery)({queryKey:["/api/categories",a,"threads",H,L],queryFn:async()=>{let b=new URLSearchParams({tab:H});L&&b.append("q",L);let c=await fetch(`/api/categories/${a}/threads?${b}`);if(!c.ok)throw Error("Failed to fetch threads");return c.json()},initialData:n,enabled:!!a}),T=O||S,U=N?.parentSlug?P?.find(a=>a.slug===N.parentSlug):null;return N||T?T&&!N?(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(f.default,{}),(0,b.jsxs)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsx)(k.Skeleton,{className:"h-24 w-full mb-8"}),(0,b.jsx)("div",{className:"space-y-4",children:Array(8).fill(0).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-32"},c))})]}),(0,b.jsx)(g.default,{})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(f.default,{}),(0,b.jsxs)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsx)(q,{className:"mb-6","data-testid":"breadcrumb-navigation",children:(0,b.jsxs)(r,{children:[(0,b.jsx)(s,{children:(0,b.jsx)(t,{href:"/","data-testid":"breadcrumb-home",children:(0,b.jsx)(F,{className:"h-4 w-4"})})}),(0,b.jsx)(v,{}),U&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{children:(0,b.jsx)(t,{href:`/category/${U.slug}`,"data-testid":"breadcrumb-parent",children:U.name})}),(0,b.jsx)(v,{})]}),(0,b.jsx)(s,{children:(0,b.jsx)(u,{"data-testid":"breadcrumb-current",children:N?.name})})]})}),(0,b.jsx)(h.Card,{className:"mb-8","data-testid":"card-category-header",children:(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)(h.CardTitle,{className:"text-2xl","data-testid":"heading-category-name",children:N?.name}),(0,b.jsx)(j.Badge,{variant:"secondary","data-testid":"badge-active-status",children:"Active"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4","data-testid":"text-category-description",children:N?.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(y.MessageSquare,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("span",{"data-testid":"stat-thread-count",children:[(0,b.jsx)("strong",{children:(N?.threadCount??0).toLocaleString()})," threads"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(z.FileText,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("span",{"data-testid":"stat-post-count",children:[(0,b.jsx)("strong",{children:(N?.postCount??0).toLocaleString()})," posts"]})]})]})]}),(0,b.jsxs)(i.Button,{size:"default","data-testid":"button-create-thread",onClick:()=>p(()=>{o.push(`/discussions/new?category=${a}`)}),children:[(0,b.jsx)(A.Plus,{className:"w-4 h-4 mr-2"}),"New Thread"]})]})})}),Q&&Q.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4","data-testid":"heading-subcategories",children:"Subcategories"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(a=>(0,b.jsx)(h.Card,{className:"hover-elevate active-elevate-2 cursor-pointer","data-testid":`card-subcategory-${a.slug}`,children:(0,b.jsxs)(w.default,{href:`/category/${a.slug}`,children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-base","data-testid":`text-subcat-name-${a.slug}`,children:a.name}),(0,b.jsx)(h.CardDescription,{className:"text-sm","data-testid":`text-subcat-desc-${a.slug}`,children:a.description})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm text-muted-foreground","data-testid":`stat-subcat-threads-${a.slug}`,children:[a.threadCount," threads"]}),(0,b.jsxs)(i.Button,{size:"sm",variant:"outline",onClick:b=>{b.preventDefault(),p(()=>{o.push(`/discussions/new?category=${a.slug}`)})},"data-testid":`button-new-thread-${a.slug}`,children:[(0,b.jsx)(A.Plus,{className:"w-3 h-3 mr-1"}),"New"]})]})})]})},a.slug))})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(E.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(l.Input,{type:"text",placeholder:`Search within ${N?.name}...`,value:J,onChange:a=>K(a.target.value),className:"pl-10","data-testid":"input-category-search"})]}),L&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2","data-testid":"text-search-info",children:["Searching in: ",N?.name]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(i.Button,{variant:"latest"===H?"default":"ghost",size:"sm",onClick:()=>I("latest"),"data-testid":"filter-latest",children:[(0,b.jsx)(C.Clock,{className:"w-4 h-4 mr-2"}),"Latest"]}),(0,b.jsxs)(i.Button,{variant:"trending"===H?"default":"ghost",size:"sm",onClick:()=>I("trending"),"data-testid":"filter-trending",children:[(0,b.jsx)(B.TrendingUp,{className:"w-4 h-4 mr-2"}),"Trending"]}),(0,b.jsxs)(i.Button,{variant:"answered"===H?"default":"ghost",size:"sm",onClick:()=>I("answered"),"data-testid":"filter-answered",children:[(0,b.jsx)(D.Star,{className:"w-4 h-4 mr-2"}),"Answered"]})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground","data-testid":"text-thread-count",children:["Showing ",R?.length||0," threads"]})]}),(0,b.jsx)("div",{className:"space-y-4",children:S&&!R?[,,,,,].fill(0).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-32"},c)):R&&R.length>0?R.map(a=>(0,b.jsx)(w.default,{href:`/thread/${a.slug}`,"data-testid":`link-thread-${a.id}`,children:(0,b.jsx)(h.Card,{className:"hover-elevate active-elevate-2 cursor-pointer","data-testid":`card-thread-${a.id}`,children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"flex items-start gap-4",children:(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg","data-testid":`text-thread-title-${a.id}`,children:a.title}),a.isPinned&&(0,b.jsx)(j.Badge,{variant:"secondary","data-testid":`badge-pinned-${a.id}`,children:"Pinned"}),a.isSolved&&(0,b.jsx)(j.Badge,{variant:"default","data-testid":`badge-solved-${a.id}`,children:"Solved"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2","data-testid":`text-thread-description-${a.id}`,children:a.metaDescription}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(y.MessageSquare,{className:"w-4 h-4"}),(0,b.jsxs)("span",{"data-testid":`stat-reply-count-${a.id}`,children:[a.replyCount," replies"]})]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(z.FileText,{className:"w-4 h-4"}),(0,b.jsxs)("span",{"data-testid":`stat-view-count-${a.id}`,children:[a.views," views"]})]}),(0,b.jsxs)("span",{"data-testid":`text-last-activity-${a.id}`,children:["Last activity: ",new Date(a.lastActivityAt).toLocaleDateString()]})]})]})})})})},a.id)):(0,b.jsxs)(h.Card,{className:"p-12 text-center","data-testid":"card-no-threads",children:[(0,b.jsx)(y.MessageSquare,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:L?"No threads found":"No threads yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:L?`No threads match your search for "${L}"`:"Be the first to start a discussion in this category!"}),!L&&(0,b.jsxs)(i.Button,{"data-testid":"button-create-first-thread",onClick:()=>p(()=>{o.push(`/discussions/new?category=${a}`)}),children:[(0,b.jsx)(A.Plus,{className:"w-4 h-4 mr-2"}),"Create First Thread"]})]})})]}),(0,b.jsx)(g.default,{}),(0,b.jsx)(G,{})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(f.default,{}),(0,b.jsx)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:(0,b.jsxs)(h.Card,{className:"p-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Category Not Found"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"The category you're looking for doesn't exist."}),(0,b.jsx)(w.default,{href:"/categories",children:(0,b.jsx)(i.Button,{children:"Browse Categories"})})]})}),(0,b.jsx)(g.default,{})]})}a.s(["default",()=>G],478636)}];

//# sourceMappingURL=app_category_%5Bslug%5D_CategoryDiscussionClient_tsx_01942d74._.js.map