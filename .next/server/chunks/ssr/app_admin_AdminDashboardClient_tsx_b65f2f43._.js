module.exports=[1238,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(72131),f=a.i(11011),g=a.i(187),h=a.i(70106);let i=(0,h.default)("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);var j=a.i(80364),k=a.i(89736),l=a.i(91868),m=a.i(59162),n=a.i(64604),o=a.i(72744),p=a.i(5539),q=a.i(34357);let r=e.createContext(null);function s(){let a=e.useContext(r);if(!a)throw Error("useSidebar must be used within a SidebarProvider.");return a}function t({defaultOpen:a=!0,open:c,onOpenChange:d,className:f,style:g,children:h,...i}){let l=(0,j.useIsMobile)(),[m,n]=e.useState(!1),[o,p]=e.useState(a),s=c??o,t=e.useCallback(a=>{let b="function"==typeof a?a(s):a;d?d(b):p(b),document.cookie=`sidebar_state=${b}; path=/; max-age=604800`},[d,s]),u=e.useCallback(()=>l?n(a=>!a):t(a=>!a),[l,t,n]);e.useEffect(()=>{let a=a=>{"b"===a.key&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),u())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[u]);let v=s?"expanded":"collapsed",w=e.useMemo(()=>({state:v,open:s,setOpen:t,isMobile:l,openMobile:m,setOpenMobile:n,toggleSidebar:u}),[v,s,t,l,m,n,u]);return(0,b.jsx)(r.Provider,{value:w,children:(0,b.jsx)(q.TooltipProvider,{delayDuration:0,children:(0,b.jsx)("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...g},className:(0,k.cn)("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",f),...i,children:h})})})}function u({side:a="left",variant:c="sidebar",collapsible:d="offcanvas",className:e,children:f,...g}){let{isMobile:h,state:i,openMobile:j,setOpenMobile:l}=s();return"none"===d?(0,b.jsx)("div",{"data-slot":"sidebar",className:(0,k.cn)("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",e),...g,children:f}):h?(0,b.jsx)(o.Sheet,{open:j,onOpenChange:l,...g,children:(0,b.jsxs)(o.SheetContent,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:a,children:[(0,b.jsxs)(o.SheetHeader,{className:"sr-only",children:[(0,b.jsx)(o.SheetTitle,{children:"Sidebar"}),(0,b.jsx)(o.SheetDescription,{children:"Displays the mobile sidebar."})]}),(0,b.jsx)("div",{className:"flex h-full w-full flex-col",children:f})]})}):(0,b.jsxs)("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":i,"data-collapsible":"collapsed"===i?d:"","data-variant":c,"data-side":a,"data-slot":"sidebar",children:[(0,b.jsx)("div",{"data-slot":"sidebar-gap",className:(0,k.cn)("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===c||"inset"===c?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),(0,b.jsx)("div",{"data-slot":"sidebar-container",className:(0,k.cn)("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex","left"===a?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===c||"inset"===c?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",e),...g,children:(0,b.jsx)("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:f})})]})}function v({className:a,onClick:c,...d}){let{toggleSidebar:e}=s();return(0,b.jsxs)(l.Button,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:(0,k.cn)("h-7 w-7",a),onClick:a=>{c?.(a),e()},...d,children:[(0,b.jsx)(i,{}),(0,b.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function w({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:(0,k.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",a),...c})}function x({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:(0,k.cn)("relative flex w-full min-w-0 flex-col p-2",a),...c})}function y({className:a,asChild:c=!1,...d}){let e=c?f.Slot:"div";return(0,b.jsx)(e,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:(0,k.cn)("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...d})}function z({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:(0,k.cn)("w-full text-sm",a),...c})}function A({className:a,...c}){return(0,b.jsx)("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:(0,k.cn)("flex w-full min-w-0 flex-col gap-1",a),...c})}function B({className:a,...c}){return(0,b.jsx)("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:(0,k.cn)("group/menu-item relative",a),...c})}let C=(0,g.cva)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function D({asChild:a=!1,isActive:c=!1,variant:d="default",size:e="default",tooltip:g,className:h,...i}){let j=a?f.Slot:"button",{isMobile:l,state:m}=s(),n=(0,b.jsx)(j,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":e,"data-active":c,className:(0,k.cn)(C({variant:d,size:e}),h),...i});return g?("string"==typeof g&&(g={children:g}),(0,b.jsxs)(q.Tooltip,{children:[(0,b.jsx)(q.TooltipTrigger,{asChild:!0,children:n}),(0,b.jsx)(q.TooltipContent,{side:"right",align:"center",hidden:"collapsed"!==m||l,...g})]})):n}var E=a.i(39761),F=a.i(60246),G=a.i(4720),H=a.i(57990);let I=(0,h.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var J=a.i(90166),K=a.i(24669),L=a.i(21161),M=a.i(3314),N=a.i(92258),O=a.i(42211);let P=(0,h.default)("FileChartColumn",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-1",key:"zg0ygc"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"M16 18v-3",key:"j5jt4h"}]]),Q=(0,h.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var R=a.i(83077),S=a.i(87532),T=a.i(1027),U=a.i(1631),V=a.i(90669),W=a.i(92596);let X=(0,h.default)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var Y=a.i(57178),Z=a.i(33217),$=a.i(6893),_=a.i(10598),aa=a.i(92e3),ab=a.i(10738),ac=a.i(57431),ad=a.i(77924),ae=a.i(18155),af=a.i(23665),ag=a.i(58042),ah=a.i(94222),ai=a.i(54419),aj=a.i(59854),ak=a.i(48662),al=a.i(61792);function am(){let{data:a,isLoading:c}=(0,Z.useQuery)({queryKey:["/api/admin/overview/stats"]}),{data:d,isLoading:e}=(0,Z.useQuery)({queryKey:["/api/admin/overview/activity-feed"]}),{data:f,isLoading:g}=(0,Z.useQuery)({queryKey:["/api/admin/overview/user-growth"]}),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/overview/content-trend"]});return c?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(p.Skeleton,{className:"h-10 w-64"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c))})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Overview Dashboard"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-total-users",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Users"}),(0,b.jsx)(F.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-total-users",children:a?.users?.total||0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",a?.users?.new24h||0," in last 24h"]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-total-content",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Content"}),(0,b.jsx)(G.FileText,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-total-content",children:a?.content?.total||0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",a?.content?.new24h||0," in last 24h"]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-total-revenue",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Revenue"}),(0,b.jsx)(J.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-total-revenue",children:["$",a?.revenue?.total||0]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+$",a?.revenue?.today||0," today"]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-pending-moderation",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Pending Moderation"}),(0,b.jsx)(aa.AlertCircle,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-pending-moderation",children:a?.moderation?.pending||0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a?.moderation?.reports||0," reports"]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-user-growth-chart",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"User Growth (Last 7 Days)"})}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)(p.Skeleton,{className:"h-64"}):f&&f.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:f,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"users",stroke:"hsl(var(--primary))",strokeWidth:2})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-content-trend-chart",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Content Trend (Last 7 Days)"})}),(0,b.jsx)($.CardContent,{children:i?(0,b.jsx)(p.Skeleton,{className:"h-64"}):h&&h.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:h,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"count",fill:"hsl(var(--primary))"})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-activity-feed",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Recent Admin Activity"})}),(0,b.jsx)($.CardContent,{children:e?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):d&&d.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Admin"}),(0,b.jsx)(_.TableHead,{children:"Action"}),(0,b.jsx)(_.TableHead,{children:"Target"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Time"})]})}),(0,b.jsx)(_.TableBody,{children:d.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`activity-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`activity-admin-${a.id}`,children:a.adminUsername||"System"}),(0,b.jsx)(_.TableCell,{"data-testid":`activity-action-${a.id}`,children:a.actionType}),(0,b.jsx)(_.TableCell,{"data-testid":`activity-target-${a.id}`,children:a.targetType}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"success"===a.status?"default":"destructive",children:a.status})}),(0,b.jsx)(_.TableCell,{"data-testid":`activity-time-${a.id}`,children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]},a.id))})]})}):(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No recent activity"})})]})]})}var an=a.i(70025),ao=a.i(32954),ap=a.i(32246),aq=a.i(76725),ar=a.i(56468);let as=(0,h.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var at=a.i(72089),au=a.i(71871);function av(){let[a,c]=(0,e.useState)(""),[d,f]=(0,e.useState)("all"),[g,h]=(0,e.useState)("all"),[i,j]=(0,e.useState)(null),{toast:k}=(0,aq.useToast)(),{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/users",{search:a,role:d,status:g}]}),q=(0,an.useMutation)({mutationFn:async({userId:a,reason:b})=>(0,au.apiRequest)("POST",`/api/admin/users/${a}/ban`,{reason:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/users"]}),k({title:"User banned successfully"})},onError:()=>{k({title:"Failed to ban user",variant:"destructive"})}}),r=(0,an.useMutation)({mutationFn:async({userId:a,amount:b,reason:c})=>(0,au.apiRequest)("POST",`/api/admin/users/${a}/adjust-coins`,{amount:b,reason:c}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/users"]}),k({title:"Coins adjusted successfully"})},onError:()=>{k({title:"Failed to adjust coins",variant:"destructive"})}});return o?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(p.Skeleton,{className:"h-10 w-64"}),(0,b.jsx)(p.Skeleton,{className:"h-96"})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"User Management"})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Search & Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(S.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(m.Input,{placeholder:"Search by username or email...",value:a,onChange:a=>c(a.target.value),className:"pl-9","data-testid":"input-user-search"})]}),(0,b.jsxs)(ao.Select,{value:d,onValueChange:f,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-role-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Filter by role"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Roles"}),(0,b.jsx)(ao.SelectItem,{value:"user",children:"User"}),(0,b.jsx)(ao.SelectItem,{value:"moderator",children:"Moderator"}),(0,b.jsx)(ao.SelectItem,{value:"admin",children:"Admin"})]})]}),(0,b.jsxs)(ao.Select,{value:g,onValueChange:h,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-status-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(ao.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(ao.SelectItem,{value:"suspended",children:"Suspended"}),(0,b.jsx)(ao.SelectItem,{value:"banned",children:"Banned"})]})]})]})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Users (",n?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Email"}),(0,b.jsx)(_.TableHead,{children:"Role"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Coins"}),(0,b.jsx)(_.TableHead,{children:"Joined"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:n&&n.length>0?n.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`user-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`user-name-${a.id}`,children:a.username}),(0,b.jsx)(_.TableCell,{children:a.email}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.role})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"active"===a.status?"default":"destructive",children:a.status})}),(0,b.jsx)(_.TableCell,{"data-testid":`user-coins-${a.id}`,children:a.coinBalance||0}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>j(a),"data-testid":`button-view-user-${a.id}`,children:[(0,b.jsx)(as,{className:"h-4 w-4 mr-1"}),"View"]}),(0,b.jsxs)(l.Button,{size:"sm",variant:"destructive",onClick:()=>q.mutate({userId:a.id,reason:"Manual ban"}),disabled:"banned"===a.status,"data-testid":`button-ban-user-${a.id}`,children:[(0,b.jsx)(ar.Ban,{className:"h-4 w-4 mr-1"}),"Ban"]})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No users found"})})})]})})})]}),(0,b.jsx)(ap.Dialog,{open:!!i,onOpenChange:()=>j(null),children:(0,b.jsxs)(ap.DialogContent,{"data-testid":"dialog-user-detail",children:[(0,b.jsxs)(ap.DialogHeader,{children:[(0,b.jsx)(ap.DialogTitle,{children:"User Details"}),(0,b.jsxs)(ap.DialogDescription,{children:["Detailed information and actions for ",i?.username]})]}),i&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Username"}),(0,b.jsx)("p",{className:"font-medium",children:i.username})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{className:"font-medium",children:i.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Coin Balance"}),(0,b.jsx)("p",{className:"font-medium",children:i.coinBalance||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reputation"}),(0,b.jsx)("p",{className:"font-medium",children:i.reputation||0})]})]}),(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:(0,b.jsxs)(l.Button,{onClick:()=>{r.mutate({userId:i.id,amount:100,reason:"Admin adjustment"}),j(null)},"data-testid":"button-add-coins",children:[(0,b.jsx)(at.Coins,{className:"h-4 w-4 mr-1"}),"Add 100 Coins"]})})]})]})})]})}var aw=a.i(16201);let ax=(0,h.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var ay=a.i(81560),az=a.i(77156),aA=a.i(77573);function aB(){let[a,c]=(0,e.useState)("all"),[d,f]=(0,e.useState)("pending"),{toast:g}=(0,aq.useToast)(),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/content/moderation-queue",{type:a,status:d}]}),j=Array.isArray(h)?h:[],{data:k,isLoading:m}=(0,Z.useQuery)({queryKey:["/api/admin/content/reported"]}),n=Array.isArray(k)?k:[],o=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/content/${a}/approve`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content"]}),g({title:"Content approved successfully"})},onError:()=>{g({title:"Failed to approve content",variant:"destructive"})}}),q=(0,an.useMutation)({mutationFn:async({contentId:a,reason:b})=>(0,au.apiRequest)("POST",`/api/admin/content/${a}/reject`,{reason:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content"]}),g({title:"Content rejected successfully"})},onError:()=>{g({title:"Failed to reject content",variant:"destructive"})}}),r=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("DELETE",`/api/admin/content/${a}`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content"]}),g({title:"Content deleted successfully"})},onError:()=>{g({title:"Failed to delete content",variant:"destructive"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Content Moderation"})}),(0,b.jsxs)(aA.Tabs,{defaultValue:"queue",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"queue","data-testid":"tab-moderation-queue",children:"Moderation Queue"}),(0,b.jsx)(aA.TabsTrigger,{value:"reported","data-testid":"tab-reported-content",children:"Reported Content"})]}),(0,b.jsxs)(aA.TabsContent,{value:"queue",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)(ao.Select,{value:a,onValueChange:c,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-content-type",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Content type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(ao.SelectItem,{value:"thread",children:"Threads"}),(0,b.jsx)(ao.SelectItem,{value:"reply",children:"Replies"}),(0,b.jsx)(ao.SelectItem,{value:"ea",children:"EAs"}),(0,b.jsx)(ao.SelectItem,{value:"article",children:"Articles"})]})]}),(0,b.jsxs)(ao.Select,{value:d,onValueChange:f,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-content-status",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(ao.SelectItem,{value:"approved",children:"Approved"}),(0,b.jsx)(ao.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Content Queue (",j?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:i?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Title"}),(0,b.jsx)(_.TableHead,{children:"Type"}),(0,b.jsx)(_.TableHead,{children:"Author"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Submitted"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:j&&j.length>0?j.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`content-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`content-title-${a.id}`,children:a.title||"Untitled"}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.type})}),(0,b.jsx)(_.TableCell,{children:a.authorUsername}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"approved"===a.status?"default":"rejected"===a.status?"destructive":"secondary",children:a.status})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>o.mutate(a.id),disabled:"approved"===a.status,"data-testid":`button-approve-${a.id}`,children:[(0,b.jsx)(aw.CheckCircle,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,b.jsxs)(l.Button,{size:"sm",variant:"destructive",onClick:()=>q.mutate({contentId:a.id,reason:"Violates guidelines"}),disabled:"rejected"===a.status,"data-testid":`button-reject-${a.id}`,children:[(0,b.jsx)(ax,{className:"h-4 w-4 mr-1"}),"Reject"]})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No content in moderation queue"})})})]})})})]})]}),(0,b.jsx)(aA.TabsContent,{value:"reported",className:"space-y-4",children:(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Reported Content (",n?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:m?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Content"}),(0,b.jsx)(_.TableHead,{children:"Reason"}),(0,b.jsx)(_.TableHead,{children:"Reporter"}),(0,b.jsx)(_.TableHead,{children:"Reports"}),(0,b.jsx)(_.TableHead,{children:"Reported"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:n&&n.length>0?n.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`report-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.contentTitle||"Content"}),(0,b.jsx)(_.TableCell,{children:a.reason}),(0,b.jsx)(_.TableCell,{children:a.reporterUsername}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{children:a.reportCount||1})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline","data-testid":`button-view-report-${a.id}`,children:[(0,b.jsx)(az.Eye,{className:"h-4 w-4 mr-1"}),"View"]}),(0,b.jsxs)(l.Button,{size:"sm",variant:"destructive",onClick:()=>r.mutate(a.contentId),"data-testid":`button-delete-reported-${a.id}`,children:[(0,b.jsx)(ay.Trash2,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No reported content"})})})]})})})]})})]})]})}var aC=a.i(83497),aD=a.i(95245),aE=a.i(59501),aF=a.i(36570),aG=a.i(97799),aH=a.i(39392),aI=a.i(27311),aJ=a.i(15618);let aK=aF.z.object({type:aF.z.enum(["ea","indicator","article","source_code"]),title:aF.z.string().min(10,"Title must be at least 10 characters").max(120),description:aF.z.string().min(300,"Description must be at least 300 characters"),category:aF.z.string().min(1,"Category is required"),priceCoins:aF.z.number().min(0).max(1e4),isFree:aF.z.boolean(),platform:aF.z.enum(["MT4","MT5","Both"]).optional(),version:aF.z.string().optional(),tags:aF.z.string().optional(),license:aF.z.string().optional(),minDeposit:aF.z.number().optional(),hedging:aF.z.boolean().optional(),changelog:aF.z.string().optional()});function aL({trigger:a}){let{toast:c}=(0,aq.useToast)(),[d,f]=(0,e.useState)(!1),[g,h]=(0,e.useState)([]),i=(0,aD.useForm)({resolver:(0,aE.zodResolver)(aK),defaultValues:{type:"ea",title:"",description:"",category:"",priceCoins:0,isFree:!0,platform:"MT4",version:"1.0",tags:"",license:"Standard",minDeposit:void 0,hedging:!1,changelog:""}}),j=(0,an.useMutation)({mutationFn:async a=>{let b=a.tags?a.tags.split(",").map(a=>a.trim()).filter(Boolean):[],c={...a,tags:b,status:"approved",files:[],images:[]};return(await (0,au.apiRequest)("POST","/api/admin/content",c)).json()},onSuccess:()=>{c({title:"Content Created!",description:"The marketplace content has been successfully added."}),i.reset(),h([]),f(!1),au.queryClient.invalidateQueries({queryKey:["/api/admin/marketplace/stats"]}),au.queryClient.invalidateQueries({queryKey:["/api/admin/marketplace/items"]}),au.queryClient.invalidateQueries({queryKey:["/api/admin/marketplace/top-selling"]}),au.queryClient.invalidateQueries({queryKey:["/api/admin/marketplace/revenue-chart"]}),au.queryClient.invalidateQueries({queryKey:["/api/content"]})},onError:a=>{c({variant:"destructive",title:"Failed to Create Content",description:a.message||"Could not create marketplace content. Please try again."})}}),k=["Expert Advisors","Indicators","Scripts","Templates","Trading Systems","Libraries","Utilities","Educational"],n=["Scalping","Day Trading","Swing Trading","Grid","Martingale","Breakout","Trend Following","Mean Reversion","News Trading","High Frequency","Performance Report"],o=i.watch("isFree");return(0,e.useEffect)(()=>{o&&i.setValue("priceCoins",0)},[o,i]),(0,b.jsxs)(ap.Dialog,{open:d,onOpenChange:f,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:a||(0,b.jsxs)(l.Button,{"data-testid":"button-add-content",children:[(0,b.jsx)(aJ.Plus,{className:"h-4 w-4 mr-2"}),"Add Content"]})}),(0,b.jsxs)(ap.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(ap.DialogHeader,{children:[(0,b.jsx)(ap.DialogTitle,{children:"Add Marketplace Content"}),(0,b.jsx)(ap.DialogDescription,{children:"Create new marketplace content (EA, Indicator, Article, or Source Code). All fields marked with * are required."})]}),(0,b.jsx)(aH.Form,{...i,children:(0,b.jsxs)("form",{onSubmit:i.handleSubmit(a=>{j.mutate(a)}),className:"space-y-6",children:[(0,b.jsx)(aH.FormField,{control:i.control,name:"type",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Content Type *"}),(0,b.jsxs)(ao.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-content-type",children:(0,b.jsx)(ao.SelectValue,{})})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"ea",children:"Expert Advisor (EA)"}),(0,b.jsx)(ao.SelectItem,{value:"indicator",children:"Indicator"}),(0,b.jsx)(ao.SelectItem,{value:"article",children:"Article"}),(0,b.jsx)(ao.SelectItem,{value:"source_code",children:"Source Code"})]})]}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"title",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Title *"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(m.Input,{placeholder:"e.g., Gold Scalper Pro EA v2.5",...a,"data-testid":"input-content-title"})}),(0,b.jsxs)(aH.FormDescription,{children:[a.value.length,"/120 characters"]}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"description",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Description *"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(aG.Textarea,{placeholder:"Detailed description of the content, features, benefits, and usage instructions...",className:"min-h-[150px]",...a,"data-testid":"textarea-content-description"})}),(0,b.jsxs)(aH.FormDescription,{children:[a.value.length," characters (minimum 300)"]}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"category",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Category *"}),(0,b.jsxs)(ao.Select,{onValueChange:a.onChange,value:a.value||void 0,children:[(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-category",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select a category..."})})}),(0,b.jsx)(ao.SelectContent,{children:k.map(a=>(0,b.jsx)(ao.SelectItem,{value:a,children:a},a))})]}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"platform",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Platform"}),(0,b.jsxs)(ao.Select,{onValueChange:a.onChange,value:a.value||void 0,children:[(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-platform",children:(0,b.jsx)(ao.SelectValue,{})})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"MT4",children:"MT4"}),(0,b.jsx)(ao.SelectItem,{value:"MT5",children:"MT5"}),(0,b.jsx)(ao.SelectItem,{value:"Both",children:"Both MT4 & MT5"})]})]}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(aH.FormField,{control:i.control,name:"isFree",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(aI.Checkbox,{checked:a.value,onCheckedChange:a.onChange,"data-testid":"checkbox-is-free"})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(aH.FormLabel,{children:"Free Content"}),(0,b.jsx)(aH.FormDescription,{children:"Check if this content is free"})]})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"priceCoins",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Price (Coins) *"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(m.Input,{type:"number",min:0,max:1e4,disabled:o,...a,onChange:b=>a.onChange(parseInt(b.target.value)||0),"data-testid":"input-price-coins"})}),(0,b.jsx)(aH.FormDescription,{children:"0-10,000 coins"}),(0,b.jsx)(aH.FormMessage,{})]})})]}),(0,b.jsx)(aH.FormField,{control:i.control,name:"tags",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:n.map(a=>(0,b.jsx)(al.Badge,{variant:g.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>{let b;h(b=g.includes(a)?g.filter(b=>b!==a):[...g,a]),i.setValue("tags",b.join(", "))},"data-testid":`tag-${a.toLowerCase().replace(/\s+/g,"-")}`,children:a},a))}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(m.Input,{placeholder:"Or enter custom tags separated by commas...",...a,"data-testid":"input-tags"})}),(0,b.jsx)(aH.FormDescription,{children:"Click tags above or enter custom tags separated by commas (max 8)"}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(aH.FormField,{control:i.control,name:"version",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Version"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(m.Input,{placeholder:"e.g., 1.0, 2.5.1",...a,"data-testid":"input-version"})}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"license",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"License"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(m.Input,{placeholder:"e.g., Standard, Extended, GPL",...a,"data-testid":"input-license"})}),(0,b.jsx)(aH.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(aH.FormField,{control:i.control,name:"minDeposit",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Minimum Deposit"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(m.Input,{type:"number",placeholder:"e.g., 100",...a,onChange:b=>a.onChange(b.target.value?parseInt(b.target.value):void 0),value:a.value||"","data-testid":"input-min-deposit"})}),(0,b.jsx)(aH.FormDescription,{children:"Minimum account balance required"}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsx)(aH.FormField,{control:i.control,name:"hedging",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 mt-2",children:[(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(aI.Checkbox,{checked:a.value,onCheckedChange:a.onChange,"data-testid":"checkbox-hedging"})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(aH.FormLabel,{children:"Supports Hedging"}),(0,b.jsx)(aH.FormDescription,{children:"Check if this EA supports hedging"})]})]})})]}),(0,b.jsx)(aH.FormField,{control:i.control,name:"changelog",render:({field:a})=>(0,b.jsxs)(aH.FormItem,{children:[(0,b.jsx)(aH.FormLabel,{children:"Changelog"}),(0,b.jsx)(aH.FormControl,{children:(0,b.jsx)(aG.Textarea,{placeholder:"Version history and updates...",className:"min-h-[100px]",...a,"data-testid":"textarea-changelog"})}),(0,b.jsx)(aH.FormDescription,{children:"Document version changes and improvements"}),(0,b.jsx)(aH.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(l.Button,{type:"submit",disabled:j.isPending,"data-testid":"button-submit-content",children:j.isPending?"Creating...":"Create Content"}),(0,b.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>{i.reset(),h([]),f(!1)},"data-testid":"button-cancel",children:"Cancel"})]})]})})]})]})}function aM(){let{toast:a}=(0,aq.useToast)(),{data:c,isLoading:d}=(0,Z.useQuery)({queryKey:["/api/admin/marketplace/stats"]}),{data:e,isLoading:f}=(0,Z.useQuery)({queryKey:["/api/admin/marketplace/items"]}),{data:g,isLoading:h}=(0,Z.useQuery)({queryKey:["/api/admin/marketplace/top-selling"]}),{data:i,isLoading:j}=(0,Z.useQuery)({queryKey:["/api/admin/marketplace/revenue-chart"]}),k=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/marketplace/${a}/approve`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/marketplace"]}),a({title:"Item approved successfully"})},onError:()=>{a({title:"Failed to approve item",variant:"destructive"})}}),m=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/marketplace/${a}/reject`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/marketplace"]}),a({title:"Item rejected successfully"})},onError:()=>{a({title:"Failed to reject item",variant:"destructive"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Marketplace Management"}),(0,b.jsx)(aL,{})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-total-items",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Items"}),(0,b.jsx)(aC.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:d?(0,b.jsx)(p.Skeleton,{className:"h-8 w-20"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-total-items",children:c?.totalItems||0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c?.pendingItems||0," pending approval"]})]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-total-sales",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Sales"}),(0,b.jsx)(K.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:d?(0,b.jsx)(p.Skeleton,{className:"h-8 w-20"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-total-sales",children:c?.totalSales||0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",c?.salesThisWeek||0," this week"]})]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-total-revenue",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Revenue"}),(0,b.jsx)(J.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:d?(0,b.jsx)(p.Skeleton,{className:"h-8 w-20"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-marketplace-revenue",children:["$",c?.totalRevenue||0]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+$",c?.revenueThisWeek||0," this week"]})]})})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-revenue-chart",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Revenue Trend (Last 30 Days)"})}),(0,b.jsx)($.CardContent,{children:j?(0,b.jsx)(p.Skeleton,{className:"h-64"}):i&&i.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:i,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No revenue data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Top Selling Items"})}),(0,b.jsx)($.CardContent,{children:h?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):g&&g.length>0?(0,b.jsx)("div",{className:"space-y-3",children:g.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-muted-foreground",children:["#",c+1]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.sales||0," sales"]})]})]}),(0,b.jsxs)(al.Badge,{children:[a.coinPrice||0," coins"]})]},a.id))}):(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No sales data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Marketplace Items (",e?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:f?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Title"}),(0,b.jsx)(_.TableHead,{children:"Seller"}),(0,b.jsx)(_.TableHead,{children:"Price"}),(0,b.jsx)(_.TableHead,{children:"Sales"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Listed"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:e&&e.length>0?e.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`item-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`item-title-${a.id}`,children:a.title}),(0,b.jsx)(_.TableCell,{children:a.sellerUsername}),(0,b.jsxs)(_.TableCell,{children:[a.coinPrice||0," coins"]}),(0,b.jsx)(_.TableCell,{children:a.sales||0}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"approved"===a.status?"default":"secondary",children:a.status})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>k.mutate(a.id),disabled:"approved"===a.status,"data-testid":`button-approve-item-${a.id}`,children:[(0,b.jsx)(aw.CheckCircle,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,b.jsxs)(l.Button,{size:"sm",variant:"destructive",onClick:()=>m.mutate(a.id),disabled:"rejected"===a.status,"data-testid":`button-reject-item-${a.id}`,children:[(0,b.jsx)(ax,{className:"h-4 w-4 mr-1"}),"Reject"]})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No marketplace items found"})})})]})})})]})]})}function aN(){let[a,c]=(0,e.useState)(""),{toast:d}=(0,aq.useToast)(),{data:f,isLoading:g}=(0,Z.useQuery)({queryKey:["/api/admin/brokers",{search:a}]}),h=Array.isArray(f)?f:[],{data:i,isLoading:j}=(0,Z.useQuery)({queryKey:["/api/admin/brokers/scam-reports"]}),k=Array.isArray(i)?i:[],{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/brokers/reviews"]}),q=Array.isArray(n)?n:[],r=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/brokers/${a}/verify`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/brokers"]}),d({title:"Broker verified successfully"})},onError:()=>{d({title:"Failed to verify broker",variant:"destructive"})}}),s=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/brokers/${a}/unverify`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/brokers"]}),d({title:"Broker verification removed"})},onError:()=>{d({title:"Failed to unverify broker",variant:"destructive"})}}),t=(0,an.useMutation)({mutationFn:async({reportId:a,action:b})=>(0,au.apiRequest)("POST",`/api/admin/brokers/scam-reports/${a}/resolve`,{action:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/brokers"]}),d({title:"Scam report resolved"})},onError:()=>{d({title:"Failed to resolve report",variant:"destructive"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Broker Management"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"brokers",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"brokers","data-testid":"tab-brokers",children:"Brokers"}),(0,b.jsxs)(aA.TabsTrigger,{value:"scam-reports","data-testid":"tab-scam-reports",children:["Scam Reports (",k.length,")"]}),(0,b.jsx)(aA.TabsTrigger,{value:"reviews","data-testid":"tab-broker-reviews",children:"Reviews"})]}),(0,b.jsxs)(aA.TabsContent,{value:"brokers",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Search Brokers"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(S.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(m.Input,{placeholder:"Search by broker name...",value:a,onChange:a=>c(a.target.value),className:"pl-9","data-testid":"input-broker-search"})]})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Brokers (",h.length,")"]})}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Broker Name"}),(0,b.jsx)(_.TableHead,{children:"Country"}),(0,b.jsx)(_.TableHead,{children:"Regulation"}),(0,b.jsx)(_.TableHead,{children:"Verified"}),(0,b.jsx)(_.TableHead,{children:"Reviews"}),(0,b.jsx)(_.TableHead,{children:"Rating"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:h.length>0?h.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`broker-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`broker-name-${a.id}`,children:a.name}),(0,b.jsx)(_.TableCell,{children:a.country||"N/A"}),(0,b.jsx)(_.TableCell,{children:a.regulation?(0,b.jsx)(al.Badge,{variant:"outline",children:a.regulation}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"N/A"})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:a.verified?"default":"secondary",children:a.verified?"Verified":"Unverified"})}),(0,b.jsx)(_.TableCell,{children:a.reviewCount||0}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.rating?a.rating.toFixed(1):"N/A"})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:a.verified?(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>s.mutate(a.id),"data-testid":`button-unverify-broker-${a.id}`,children:[(0,b.jsx)(ax,{className:"h-4 w-4 mr-1"}),"Unverify"]}):(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>r.mutate(a.id),"data-testid":`button-verify-broker-${a.id}`,children:[(0,b.jsx)(aw.CheckCircle,{className:"h-4 w-4 mr-1"}),"Verify"]})})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No brokers found"})})})]})})})]})]}),(0,b.jsx)(aA.TabsContent,{value:"scam-reports",className:"space-y-4",children:(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Scam Reports (",k.length,")"]})}),(0,b.jsx)($.CardContent,{children:j?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Broker"}),(0,b.jsx)(_.TableHead,{children:"Reporter"}),(0,b.jsx)(_.TableHead,{children:"Reason"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Reported"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:k.length>0?k.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`scam-report-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.brokerName}),(0,b.jsx)(_.TableCell,{children:a.reporterUsername}),(0,b.jsx)(_.TableCell,{children:a.reason}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"resolved"===a.status?"default":"destructive",children:a.status})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>t.mutate({reportId:a.id,action:"verified"}),disabled:"resolved"===a.status,"data-testid":`button-resolve-report-${a.id}`,children:[(0,b.jsx)(aw.CheckCircle,{className:"h-4 w-4 mr-1"}),"Resolve"]}),(0,b.jsxs)(l.Button,{size:"sm",variant:"outline","data-testid":`button-view-report-${a.id}`,children:[(0,b.jsx)(az.Eye,{className:"h-4 w-4 mr-1"}),"View"]})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No scam reports"})})})]})})})]})}),(0,b.jsx)(aA.TabsContent,{value:"reviews",className:"space-y-4",children:(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Recent Broker Reviews (",q.length,")"]})}),(0,b.jsx)($.CardContent,{children:o?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Broker"}),(0,b.jsx)(_.TableHead,{children:"Reviewer"}),(0,b.jsx)(_.TableHead,{children:"Rating"}),(0,b.jsx)(_.TableHead,{children:"Review"}),(0,b.jsx)(_.TableHead,{children:"Posted"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:q.length>0?q.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`review-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.brokerName}),(0,b.jsx)(_.TableCell,{children:a.reviewerUsername}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"outline",children:[a.rating,"/5"]})}),(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.comment||"No comment"}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(l.Button,{size:"sm",variant:"outline","data-testid":`button-view-review-${a.id}`,children:[(0,b.jsx)(az.Eye,{className:"h-4 w-4 mr-1"}),"View"]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No reviews found"})})})]})})})]})})]})]})}var aO=a.i(53277),aP=a.i(64321),aQ=a.i(27165),aR=a.i(67149);let aS=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(var(--muted))"];function aT(){let[a,c]=(0,e.useState)("30d"),{toast:d}=(0,aq.useToast)(),{data:f,isLoading:g}=(0,Z.useQuery)({queryKey:["/api/admin/finance/overview"]}),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/finance/transactions",{period:a}]}),{data:j,isLoading:k}=(0,Z.useQuery)({queryKey:["/api/admin/finance/withdrawals/pending"]}),{data:m,isLoading:n}=(0,Z.useQuery)({queryKey:["/api/admin/finance/revenue-chart",{period:a}]}),{data:o,isLoading:q}=(0,Z.useQuery)({queryKey:["/api/admin/finance/revenue-by-source"]}),r=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/finance/withdrawals/${a}/approve`,{}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/finance"]}),d({title:"Withdrawal approved successfully"})},onError:()=>{d({title:"Failed to approve withdrawal",variant:"destructive"})}}),s=(0,an.useMutation)({mutationFn:async({withdrawalId:a,reason:b})=>(0,au.apiRequest)("POST",`/api/admin/finance/withdrawals/${a}/reject`,{reason:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/finance"]}),d({title:"Withdrawal rejected successfully"})},onError:()=>{d({title:"Failed to reject withdrawal",variant:"destructive"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Finance Management"}),(0,b.jsxs)(ao.Select,{value:a,onValueChange:c,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-48","data-testid":"select-period-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select period"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"7d",children:"Last 7 Days"}),(0,b.jsx)(ao.SelectItem,{value:"30d",children:"Last 30 Days"}),(0,b.jsx)(ao.SelectItem,{value:"90d",children:"Last 90 Days"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-total-revenue",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Revenue"}),(0,b.jsx)(J.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)(p.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-finance-revenue",children:["$",f?.totalRevenue||0]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(K.TrendingUp,{className:"h-3 w-3"}),"+",f?.revenueGrowth||0,"% vs last period"]})]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-pending-withdrawals",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Pending Withdrawals"}),(0,b.jsx)(aO.TrendingDown,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)(p.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-pending-withdrawals",children:["$",f?.pendingWithdrawals||0]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[f?.pendingWithdrawalCount||0," requests"]})]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-total-transactions",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Transactions"}),(0,b.jsx)(at.Coins,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)(p.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-total-transactions",children:f?.totalTransactions||0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[f?.transactionsToday||0," today"]})]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-top-earner",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Top Earner"}),(0,b.jsx)(K.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)(p.Skeleton,{className:"h-8 w-24"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-lg font-bold truncate",children:f?.topEarner?.username||"N/A"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["$",f?.topEarner?.earnings||0," earned"]})]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-revenue-trend",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Revenue Trend"})}),(0,b.jsx)($.CardContent,{children:n?(0,b.jsx)(p.Skeleton,{className:"h-64"}):m&&m.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:m,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No revenue data available"})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-revenue-by-source",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Revenue by Source"})}),(0,b.jsx)($.CardContent,{children:q?(0,b.jsx)(p.Skeleton,{className:"h-64"}):o&&o.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:o,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:o.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:aS[c%aS.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No source data available"})})]})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Pending Withdrawals (",j?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:k?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Amount"}),(0,b.jsx)(_.TableHead,{children:"Method"}),(0,b.jsx)(_.TableHead,{children:"Wallet"}),(0,b.jsx)(_.TableHead,{children:"Requested"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:j&&j.length>0?j.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`withdrawal-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`withdrawal-user-${a.id}`,children:a.username}),(0,b.jsxs)(_.TableCell,{"data-testid":`withdrawal-amount-${a.id}`,children:["$",a.amount||0]}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.method||"USDT"})}),(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.walletAddress||"N/A"}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>r.mutate(a.id),"data-testid":`button-approve-withdrawal-${a.id}`,children:[(0,b.jsx)(aw.CheckCircle,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,b.jsxs)(l.Button,{size:"sm",variant:"destructive",onClick:()=>s.mutate({withdrawalId:a.id,reason:"Manual rejection"}),"data-testid":`button-reject-withdrawal-${a.id}`,children:[(0,b.jsx)(ax,{className:"h-4 w-4 mr-1"}),"Reject"]})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No pending withdrawals"})})})]})})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Recent Transactions (",h?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:i?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-16"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Type"}),(0,b.jsx)(_.TableHead,{children:"Amount"}),(0,b.jsx)(_.TableHead,{children:"Description"}),(0,b.jsx)(_.TableHead,{children:"Date"})]})}),(0,b.jsx)(_.TableBody,{children:h&&h.length>0?h.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`transaction-row-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.username}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"credit"===a.type?"default":"secondary",children:a.type})}),(0,b.jsxs)(_.TableCell,{"data-testid":`transaction-amount-${a.id}`,children:["credit"===a.type?"+":"-",a.amount," coins"]}),(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.description||"N/A"}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No transactions found"})})})]})})})]})]})}var aU=a.i(39622),aV=a.i(85811),aW=a.i(2274);let aX=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(var(--muted))","#8884d8","#82ca9d","#ffc658","#ff7c7c"];function aY(){let[a,c]=(0,e.useState)("users"),{data:d,isLoading:f}=(0,Z.useQuery)({queryKey:["/api/admin/analytics/users"]}),g=d||{dau:0,mau:0,newUsers:0,churnRate:0,growthData:[],countryData:[],activeInactiveData:[]},{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/analytics/content"]}),j=h||{trendData:[],typeDistribution:[],topCreators:[],qualityScores:[]},{data:k,isLoading:l}=(0,Z.useQuery)({queryKey:["/api/admin/analytics/financial"]}),m=k||{revenueTrend:[],revenueBySource:[],topEarners:[],transactionVolume:[]},{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/analytics/engagement"]}),q=n||{avgSessionDuration:"0m",bounceRate:0,pagesPerSession:0,heatmapData:[]};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Analytics & Reports"}),(0,b.jsxs)(aA.Tabs,{value:a,onValueChange:c,"data-testid":"tabs-analytics",children:[(0,b.jsxs)(aA.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(aA.TabsTrigger,{value:"users","data-testid":"tab-users",children:"Users"}),(0,b.jsx)(aA.TabsTrigger,{value:"content","data-testid":"tab-content",children:"Content"}),(0,b.jsx)(aA.TabsTrigger,{value:"financial","data-testid":"tab-financial",children:"Financial"}),(0,b.jsx)(aA.TabsTrigger,{value:"engagement","data-testid":"tab-engagement",children:"Engagement"})]}),(0,b.jsx)(aA.TabsContent,{value:"users",className:"space-y-4",children:f?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c))}),(0,b.jsx)(p.Skeleton,{className:"h-96"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-dau",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"DAU"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-dau",children:g.dau}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Daily Active Users"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-mau",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"MAU"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-mau",children:g.mau}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Monthly Active Users"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-new-users",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"New Users"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-new-users",children:g.newUsers}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-churn-rate",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Churn Rate"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-churn-rate",children:[g.churnRate,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Monthly churn"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-user-growth",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"User Growth (Last 30 Days)"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:g.growthData,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"users",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-users-by-country",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Users by Country (Top 10)"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:g.countryData,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"country"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"users",fill:"hsl(var(--primary))"})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-active-inactive",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Active vs Inactive Users"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:g.activeInactiveData,cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name}: ${a.value}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.activeInactiveData.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:aX[c%aX.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{})]})})})]})]})]})}),(0,b.jsx)(aA.TabsContent,{value:"content",className:"space-y-4",children:i?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(p.Skeleton,{className:"h-96"}),(0,b.jsx)(p.Skeleton,{className:"h-64"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-content-trend",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Content Creation Trend (Last 30 Days)"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:j.trendData,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"count",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-content-type-distribution",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Content Type Distribution"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:j.typeDistribution,cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name}: ${a.value}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:j.typeDistribution.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:aX[c%aX.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{})]})})})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-top-creators",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Top Content Creators"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Rank"}),(0,b.jsx)(_.TableHead,{children:"Creator"}),(0,b.jsx)(_.TableHead,{children:"Posts"}),(0,b.jsx)(_.TableHead,{children:"Views"}),(0,b.jsx)(_.TableHead,{children:"Avg Quality"})]})}),(0,b.jsx)(_.TableBody,{children:j.topCreators.length>0?j.topCreators.map((a,c)=>(0,b.jsxs)(_.TableRow,{"data-testid":`creator-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`creator-rank-${a.id}`,children:c+1}),(0,b.jsx)(_.TableCell,{children:a.username}),(0,b.jsx)(_.TableCell,{children:a.posts}),(0,b.jsx)(_.TableCell,{children:a.views}),(0,b.jsx)(_.TableCell,{children:a.avgQuality?.toFixed(1)||"N/A"})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No data available"})})})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-quality-scores",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Quality Scores Histogram"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:j.qualityScores,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"score"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"count",fill:"hsl(var(--primary))"})]})})})]})]})}),(0,b.jsx)(aA.TabsContent,{value:"financial",className:"space-y-4",children:l?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(p.Skeleton,{className:"h-96"}),(0,b.jsx)(p.Skeleton,{className:"h-64"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-revenue-trend",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Revenue Trend (Last 30 Days)"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aU.AreaChart,{data:m.revenueTrend,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{}),(0,b.jsx)(aV.Area,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.6})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-revenue-by-source",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Revenue by Source"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:m.revenueBySource,cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name}: $${a.value}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:m.revenueBySource.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:aX[c%aX.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{})]})})})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-top-earners",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Top Earners"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Rank"}),(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Total Earnings"}),(0,b.jsx)(_.TableHead,{children:"This Month"}),(0,b.jsx)(_.TableHead,{children:"Sales"})]})}),(0,b.jsx)(_.TableBody,{children:m.topEarners.length>0?m.topEarners.map((a,c)=>(0,b.jsxs)(_.TableRow,{"data-testid":`earner-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`earner-rank-${a.id}`,children:c+1}),(0,b.jsx)(_.TableCell,{children:a.username}),(0,b.jsxs)(_.TableCell,{children:["$",a.totalEarnings]}),(0,b.jsxs)(_.TableCell,{children:["$",a.monthlyEarnings]}),(0,b.jsx)(_.TableCell,{children:a.sales})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No data available"})})})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-transaction-volume",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Transaction Volume"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:m.transactionVolume,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"volume",fill:"hsl(var(--primary))"})]})})})]})]})}),(0,b.jsx)(aA.TabsContent,{value:"engagement",className:"space-y-4",children:o?(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c))})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-avg-session",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Avg Session Duration"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-avg-session",children:q.avgSessionDuration}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Per user session"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-bounce-rate",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Bounce Rate"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-bounce-rate",children:[q.bounceRate,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Single page visits"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-pages-per-session",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Pages Per Session"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-pages-per-session",children:q.pagesPerSession}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average pages"})]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-engagement-heatmap",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Engagement Heatmap (Hourly Activity)"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(ae.BarChart,{data:q.heatmapData,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"hour"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{}),(0,b.jsx)(af.Bar,{dataKey:"activity",fill:"hsl(var(--primary))"})]})})})]})]})})]})]})}var aZ=a.i(81615),a$=a.i(37689),a_=a.i(35221);function a0(){let[a,c]=(0,e.useState)("general"),[d,f]=(0,e.useState)(""),{toast:g}=(0,aq.useToast)(),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/settings/general"]}),{data:j,isLoading:k}=(0,Z.useQuery)({queryKey:["/api/admin/settings/coin-economy"]}),{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/settings/email-templates",{search:d}]}),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/settings/feature-flags"]}),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/settings/admin-roles"]}),u=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("PUT","/api/admin/settings/general",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/settings/general"]}),g({title:"Settings updated successfully"})},onError:()=>{g({title:"Failed to update settings",variant:"destructive"})}});(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("PUT","/api/admin/settings/coin-economy",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/settings/coin-economy"]}),g({title:"Coin settings updated successfully"})},onError:()=>{g({title:"Failed to update coin settings",variant:"destructive"})}});let v=(0,an.useMutation)({mutationFn:async({flagId:a,enabled:b})=>(0,au.apiRequest)("PUT",`/api/admin/settings/feature-flags/${a}`,{enabled:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/settings/feature-flags"]}),g({title:"Feature flag updated"})},onError:()=>{g({title:"Failed to update feature flag",variant:"destructive"})}});return(0,an.useMutation)({mutationFn:async({userId:a,role:b})=>(0,au.apiRequest)("POST","/api/admin/settings/admin-roles/grant",{userId:a,role:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/settings/admin-roles"]}),g({title:"Admin role granted successfully"})},onError:()=>{g({title:"Failed to grant admin role",variant:"destructive"})}}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"System Settings"}),(0,b.jsxs)(aA.Tabs,{value:a,onValueChange:c,"data-testid":"tabs-settings",children:[(0,b.jsxs)(aA.TabsList,{className:"grid w-full grid-cols-5",children:[(0,b.jsx)(aA.TabsTrigger,{value:"general","data-testid":"tab-general",children:"General"}),(0,b.jsx)(aA.TabsTrigger,{value:"coin-economy","data-testid":"tab-coin-economy",children:"Coin Economy"}),(0,b.jsx)(aA.TabsTrigger,{value:"email-templates","data-testid":"tab-email-templates",children:"Email Templates"}),(0,b.jsx)(aA.TabsTrigger,{value:"feature-flags","data-testid":"tab-feature-flags",children:"Feature Flags"}),(0,b.jsx)(aA.TabsTrigger,{value:"admin-roles","data-testid":"tab-admin-roles",children:"Admin Roles"})]}),(0,b.jsx)(aA.TabsContent,{value:"general",className:"space-y-4",children:i?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-general-settings",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"General Settings"})}),(0,b.jsxs)($.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"site-name",children:"Site Name"}),(0,b.jsx)(m.Input,{id:"site-name",defaultValue:h?.siteName||"YoForex","data-testid":"input-site-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"site-description",children:"Site Description"}),(0,b.jsx)(aG.Textarea,{id:"site-description",defaultValue:h?.siteDescription||"","data-testid":"textarea-site-description"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(a_.Label,{htmlFor:"maintenance-mode",children:"Maintenance Mode"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enable site maintenance mode"})]}),(0,b.jsx)(aZ.Switch,{id:"maintenance-mode",defaultChecked:h?.maintenanceMode||!1,"data-testid":"switch-maintenance-mode"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(a_.Label,{htmlFor:"registration-enabled",children:"Registration Enabled"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow new user registrations"})]}),(0,b.jsx)(aZ.Switch,{id:"registration-enabled",defaultChecked:h?.registrationEnabled!==!1,"data-testid":"switch-registration-enabled"})]}),(0,b.jsx)(l.Button,{onClick:()=>u.mutate(h),disabled:u.isPending,"data-testid":"button-save-general",children:"Save Changes"})]})]})}),(0,b.jsx)(aA.TabsContent,{value:"coin-economy",className:"space-y-4",children:k?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-exchange-rate",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Exchange Rate"})}),(0,b.jsxs)($.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"usd-to-coins",children:"USD to Coins Rate"}),(0,b.jsx)(m.Input,{id:"usd-to-coins",type:"number",defaultValue:j?.usdToCoinsRate||100,"data-testid":"input-usd-to-coins"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"1 USD = X coins"})]}),(0,b.jsx)(l.Button,{"data-testid":"button-save-exchange-rate",children:"Save Exchange Rate"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-recharge-packages",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Recharge Packages"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Package"}),(0,b.jsx)(_.TableHead,{children:"Coins"}),(0,b.jsx)(_.TableHead,{children:"Price (USD)"}),(0,b.jsx)(_.TableHead,{children:"Bonus"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:j?.packages&&j.packages.length>0?j.packages.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`package-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.name}),(0,b.jsx)(_.TableCell,{children:a.coins}),(0,b.jsxs)(_.TableCell,{children:["$",a.price]}),(0,b.jsxs)(_.TableCell,{children:[a.bonus||0,"%"]}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-edit-package-${a.id}`,children:"Edit"})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No packages configured"})})})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-withdrawal-settings",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Withdrawal Settings"})}),(0,b.jsxs)($.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"min-withdrawal",children:"Minimum Withdrawal Amount"}),(0,b.jsx)(m.Input,{id:"min-withdrawal",type:"number",defaultValue:j?.minWithdrawal||1e3,"data-testid":"input-min-withdrawal"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"withdrawal-fee",children:"Withdrawal Fee (%)"}),(0,b.jsx)(m.Input,{id:"withdrawal-fee",type:"number",defaultValue:j?.withdrawalFee||5,"data-testid":"input-withdrawal-fee"})]}),(0,b.jsx)(l.Button,{"data-testid":"button-save-withdrawal",children:"Save Withdrawal Settings"})]})]})]})}),(0,b.jsxs)(aA.TabsContent,{value:"email-templates",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Search Templates"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(m.Input,{placeholder:"Search templates...",value:d,onChange:a=>f(a.target.value),"data-testid":"input-search-templates"})})]}),o?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-email-templates",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Email Templates"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Subject"}),(0,b.jsx)(_.TableHead,{children:"Type"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:n&&n.length>0?n.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`template-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.name}),(0,b.jsx)(_.TableCell,{children:a.subject}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.type})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-edit-template-${a.id}`,children:"Edit"}),(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-preview-template-${a.id}`,children:"Preview"})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No templates found"})})})]})})})]})]}),(0,b.jsx)(aA.TabsContent,{value:"feature-flags",className:"space-y-4",children:r?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-feature-flags",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Feature Flags"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Feature"}),(0,b.jsx)(_.TableHead,{children:"Description"}),(0,b.jsx)(_.TableHead,{children:"Enabled"}),(0,b.jsx)(_.TableHead,{children:"Rollout %"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:q&&q.length>0?q.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`flag-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.name}),(0,b.jsx)(_.TableCell,{children:a.description}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(aZ.Switch,{checked:a.enabled,onCheckedChange:b=>v.mutate({flagId:a.id,enabled:b}),"data-testid":`switch-flag-${a.id}`})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)("div",{className:"w-24",children:(0,b.jsx)(a$.Slider,{defaultValue:[a.rolloutPercentage||100],max:100,step:1,"data-testid":`slider-rollout-${a.id}`})})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-configure-flag-${a.id}`,children:"Configure"})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No feature flags configured"})})})]})})})]})}),(0,b.jsx)(aA.TabsContent,{value:"admin-roles",className:"space-y-4",children:t?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-admin-roles",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Admin Roles & Permissions"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Email"}),(0,b.jsx)(_.TableHead,{children:"Role"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:s&&s.length>0?s.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`admin-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.username}),(0,b.jsx)(_.TableCell,{children:a.email}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{children:a.role})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-edit-permissions-${a.id}`,children:"Edit Permissions"}),(0,b.jsx)(l.Button,{size:"sm",variant:"destructive","data-testid":`button-revoke-admin-${a.id}`,children:"Revoke"})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No admins found"})})})]})})})]})})]})]})}function a1(){let[a,c]=(0,e.useState)("security-events"),[d,f]=(0,e.useState)("all"),[g,h]=(0,e.useState)("all"),[i,j]=(0,e.useState)("all"),[k,n]=(0,e.useState)("active"),[o,q]=(0,e.useState)(null),{toast:r}=(0,aq.useToast)(),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/security/events",{type:d,severity:g,resolved:i}]}),{data:u,isLoading:v}=(0,Z.useQuery)({queryKey:["/api/admin/security/ip-bans",{status:k}]}),{data:w,isLoading:x}=(0,Z.useQuery)({queryKey:["/api/admin/security/performance-metrics"]}),y=(0,an.useMutation)({mutationFn:async({eventId:a,notes:b})=>(0,au.apiRequest)("POST",`/api/admin/security/events/${a}/resolve`,{notes:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/security/events"]}),r({title:"Event resolved successfully"}),q(null)},onError:()=>{r({title:"Failed to resolve event",variant:"destructive"})}}),z=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST","/api/admin/security/ip-bans",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/security/ip-bans"]}),r({title:"IP banned successfully"})},onError:()=>{r({title:"Failed to ban IP",variant:"destructive"})}}),A=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("DELETE",`/api/admin/security/ip-bans/${a}`),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/security/ip-bans"]}),r({title:"IP unbanned successfully"})},onError:()=>{r({title:"Failed to unban IP",variant:"destructive"})}}),B=a=>{switch(a){case"critical":case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Security & Safety"}),(0,b.jsxs)(aA.Tabs,{value:a,onValueChange:c,"data-testid":"tabs-security",children:[(0,b.jsxs)(aA.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(aA.TabsTrigger,{value:"security-events","data-testid":"tab-security-events",children:"Security Events"}),(0,b.jsx)(aA.TabsTrigger,{value:"ip-bans","data-testid":"tab-ip-bans",children:"IP Bans"}),(0,b.jsx)(aA.TabsTrigger,{value:"performance","data-testid":"tab-performance",children:"Performance Metrics"})]}),(0,b.jsxs)(aA.TabsContent,{value:"security-events",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)(ao.Select,{value:d,onValueChange:f,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-type-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Event Type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(ao.SelectItem,{value:"login_attempt",children:"Login Attempt"}),(0,b.jsx)(ao.SelectItem,{value:"suspicious_activity",children:"Suspicious Activity"}),(0,b.jsx)(ao.SelectItem,{value:"data_breach",children:"Data Breach"})]})]}),(0,b.jsxs)(ao.Select,{value:g,onValueChange:h,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-severity-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Severity"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Severities"}),(0,b.jsx)(ao.SelectItem,{value:"critical",children:"Critical"}),(0,b.jsx)(ao.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(ao.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(ao.SelectItem,{value:"low",children:"Low"})]})]}),(0,b.jsxs)(ao.Select,{value:i,onValueChange:j,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-resolved-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(ao.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(ao.SelectItem,{value:"unresolved",children:"Unresolved"})]})]})]})})]}),t?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-security-events",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Security Events (",s?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Type"}),(0,b.jsx)(_.TableHead,{children:"Severity"}),(0,b.jsx)(_.TableHead,{children:"Description"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:s&&s.length>0?s.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`event-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:a.type}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:B(a.severity),children:a.severity})}),(0,b.jsx)(_.TableCell,{children:a.description}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:a.resolved?"secondary":"default",children:a.resolved?"Resolved":"Unresolved"})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>q(a),"data-testid":`button-view-event-${a.id}`,children:a.resolved?"View":"Resolve"})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No security events found"})})})]})})})]}),(0,b.jsx)(ap.Dialog,{open:!!o,onOpenChange:()=>q(null),children:(0,b.jsxs)(ap.DialogContent,{"data-testid":"dialog-event-detail",children:[(0,b.jsxs)(ap.DialogHeader,{children:[(0,b.jsx)(ap.DialogTitle,{children:"Security Event Details"}),(0,b.jsxs)(ap.DialogDescription,{children:["Event ID: ",o?.id]})]}),o&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsx)("p",{className:"font-medium",children:o.type})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Severity"}),(0,b.jsx)(al.Badge,{variant:B(o.severity),children:o.severity})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Description"}),(0,b.jsx)("p",{children:o.description})]}),!o.resolved&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"resolution-notes",children:"Resolution Notes"}),(0,b.jsx)(aG.Textarea,{id:"resolution-notes",placeholder:"Enter resolution notes...","data-testid":"textarea-resolution-notes"}),(0,b.jsx)(l.Button,{onClick:()=>{let a=document.getElementById("resolution-notes")?.value;y.mutate({eventId:o.id,notes:a})},disabled:y.isPending,"data-testid":"button-resolve-event",children:"Resolve Event"})]})]})]})})]}),(0,b.jsxs)(aA.TabsContent,{value:"ip-bans",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Add IP Ban"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsx)(m.Input,{placeholder:"IP Address",id:"ban-ip-address","data-testid":"input-ban-ip-address"}),(0,b.jsx)(m.Input,{placeholder:"Reason",id:"ban-reason","data-testid":"input-ban-reason"}),(0,b.jsxs)(ao.Select,{defaultValue:"permanent",children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-ban-duration",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Duration"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"permanent",children:"Permanent"}),(0,b.jsx)(ao.SelectItem,{value:"7",children:"7 Days"}),(0,b.jsx)(ao.SelectItem,{value:"30",children:"30 Days"})]})]}),(0,b.jsx)(l.Button,{onClick:()=>{let a=document.getElementById("ban-ip-address")?.value,b=document.getElementById("ban-reason")?.value;z.mutate({ipAddress:a,reason:b,duration:0})},disabled:z.isPending,"data-testid":"button-add-ban",children:"Add Ban"})]})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-4 space-y-0",children:[(0,b.jsx)($.CardTitle,{children:"IP Bans"}),(0,b.jsxs)(ao.Select,{value:k,onValueChange:n,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-48","data-testid":"select-ban-status-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Filter"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(ao.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(ao.SelectItem,{value:"expired",children:"Expired"})]})]})]}),(0,b.jsx)($.CardContent,{children:v?(0,b.jsx)(p.Skeleton,{className:"h-64"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"IP Address"}),(0,b.jsx)(_.TableHead,{children:"Reason"}),(0,b.jsx)(_.TableHead,{children:"Banned By"}),(0,b.jsx)(_.TableHead,{children:"Banned At"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:u&&u.length>0?u.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`ban-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.ipAddress}),(0,b.jsx)(_.TableCell,{children:a.reason}),(0,b.jsx)(_.TableCell,{children:a.bannedBy}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:a.active?"destructive":"secondary",children:a.active?"Active":"Expired"})}),(0,b.jsx)(_.TableCell,{children:a.active&&(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>A.mutate(a.id),disabled:A.isPending,"data-testid":`button-unban-${a.id}`,children:"Unban"})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No IP bans found"})})})]})})})]})]}),(0,b.jsx)(aA.TabsContent,{value:"performance",className:"space-y-4",children:x?(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c))})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-cpu",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"CPU Usage"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-cpu",children:[w?.cpu||0,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current usage"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-memory",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Memory"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-memory",children:[w?.memory||0,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-disk",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Disk"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-disk",children:[w?.disk||0,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-network",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Network"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-network",children:[w?.network||0," MB/s"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Throughput"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-response-time",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Response Time (Last 24 Hours)"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:w?.responseTimeData||[],children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"time"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"responseTime",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-error-rate",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Error Rate"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:w?.errorRateData||[],children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"time"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"errors",stroke:"hsl(var(--destructive))",strokeWidth:2})]})})})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-db-metrics",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Database Query Time Metrics"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[w?.dbQueryTime?.avg||0,"ms"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Min"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[w?.dbQueryTime?.min||0,"ms"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Max"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[w?.dbQueryTime?.max||0,"ms"]})]})]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-performance-alerts",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Performance Alerts"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Alert"}),(0,b.jsx)(_.TableHead,{children:"Severity"}),(0,b.jsx)(_.TableHead,{children:"Time"})]})}),(0,b.jsx)(_.TableBody,{children:w?.alerts&&w.alerts.length>0?w.alerts.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{children:a.message}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:B(a.severity),children:a.severity})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:3,className:"text-center py-8 text-muted-foreground",children:"No performance alerts"})})})]})})})]})]})})]})]})}var a2=a.i(65910);function a3(){let[a,c]=(0,e.useState)("announcements"),[d,f]=(0,e.useState)(!1),{toast:g}=(0,aq.useToast)(),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/communications/announcements"]}),j=Array.isArray(h)?h:[],{data:k,isLoading:n}=(0,Z.useQuery)({queryKey:["/api/admin/communications/campaigns"]}),o=Array.isArray(k)?k:[],{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/communications/campaign-stats"]}),s=q||{sent:0,opened:0,openRate:0,clicked:0,clickRate:0,bounced:0,bounceRate:0},t=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST","/api/admin/communications/announcements",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/communications/announcements"]}),g({title:"Announcement created successfully"}),f(!1)},onError:()=>{g({title:"Failed to create announcement",variant:"destructive"})}}),u=(0,an.useMutation)({mutationFn:async({id:a,active:b})=>(0,au.apiRequest)("PUT",`/api/admin/communications/announcements/${a}`,{active:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/communications/announcements"]}),g({title:"Announcement updated"})},onError:()=>{g({title:"Failed to update announcement",variant:"destructive"})}}),v=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("DELETE",`/api/admin/communications/announcements/${a}`),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/communications/announcements"]}),g({title:"Announcement deleted"})},onError:()=>{g({title:"Failed to delete announcement",variant:"destructive"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Communications"}),(0,b.jsxs)(aA.Tabs,{value:a,onValueChange:c,"data-testid":"tabs-communications",children:[(0,b.jsxs)(aA.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(aA.TabsTrigger,{value:"announcements","data-testid":"tab-announcements",children:"Announcements"}),(0,b.jsx)(aA.TabsTrigger,{value:"email-campaigns","data-testid":"tab-email-campaigns",children:"Email Campaigns"})]}),(0,b.jsxs)(aA.TabsContent,{value:"announcements",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Announcements"}),(0,b.jsxs)(ap.Dialog,{open:d,onOpenChange:f,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-announcement",children:"Create Announcement"})}),(0,b.jsxs)(ap.DialogContent,{"data-testid":"dialog-create-announcement",children:[(0,b.jsxs)(ap.DialogHeader,{children:[(0,b.jsx)(ap.DialogTitle,{children:"Create Announcement"}),(0,b.jsx)(ap.DialogDescription,{children:"Create a new announcement for your users"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-title",children:"Title"}),(0,b.jsx)(m.Input,{id:"announcement-title",placeholder:"Announcement title","data-testid":"input-announcement-title"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-content",children:"Content"}),(0,b.jsx)(aG.Textarea,{id:"announcement-content",placeholder:"Announcement content",rows:4,"data-testid":"textarea-announcement-content"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-type",children:"Type"}),(0,b.jsxs)(ao.Select,{defaultValue:"info",children:[(0,b.jsx)(ao.SelectTrigger,{id:"announcement-type","data-testid":"select-announcement-type",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"info",children:"Info"}),(0,b.jsx)(ao.SelectItem,{value:"warning",children:"Warning"}),(0,b.jsx)(ao.SelectItem,{value:"success",children:"Success"}),(0,b.jsx)(ao.SelectItem,{value:"error",children:"Error"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-audience",children:"Target Audience"}),(0,b.jsxs)(ao.Select,{defaultValue:"all",children:[(0,b.jsx)(ao.SelectTrigger,{id:"announcement-audience","data-testid":"select-announcement-audience",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select audience"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Users"}),(0,b.jsx)(ao.SelectItem,{value:"premium",children:"Premium Users"}),(0,b.jsx)(ao.SelectItem,{value:"free",children:"Free Users"}),(0,b.jsx)(ao.SelectItem,{value:"sellers",children:"Sellers"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-display",children:"Display Type"}),(0,b.jsxs)(ao.Select,{defaultValue:"banner",children:[(0,b.jsx)(ao.SelectTrigger,{id:"announcement-display","data-testid":"select-announcement-display",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select display type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"banner",children:"Banner"}),(0,b.jsx)(ao.SelectItem,{value:"modal",children:"Modal"}),(0,b.jsx)(ao.SelectItem,{value:"toast",children:"Toast"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-start",children:"Start Date"}),(0,b.jsx)(m.Input,{id:"announcement-start",type:"date","data-testid":"input-announcement-start"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"announcement-end",children:"End Date"}),(0,b.jsx)(m.Input,{id:"announcement-end",type:"date","data-testid":"input-announcement-end"})]})]}),(0,b.jsx)(l.Button,{onClick:()=>{let a=document.getElementById("announcement-title")?.value,b=document.getElementById("announcement-content")?.value;t.mutate({title:a,content:b,type:"info",audience:"all"})},disabled:t.isPending,"data-testid":"button-submit-announcement",children:"Create Announcement"})]})]})]})]}),i?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsx)($.Card,{"data-testid":"card-announcements",children:(0,b.jsx)($.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Title"}),(0,b.jsx)(_.TableHead,{children:"Type"}),(0,b.jsx)(_.TableHead,{children:"Audience"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Views"}),(0,b.jsx)(_.TableHead,{children:"Clicks"}),(0,b.jsx)(_.TableHead,{children:"Created"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:j.length>0?j.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`announcement-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.title}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.type})}),(0,b.jsx)(_.TableCell,{children:a.audience}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(aZ.Switch,{checked:a.active,onCheckedChange:b=>u.mutate({id:a.id,active:b}),"data-testid":`switch-announcement-${a.id}`})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(az.Eye,{className:"h-4 w-4"}),a.views||0]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(a2.MousePointer,{className:"h-4 w-4"}),a.clicks||0]})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-edit-announcement-${a.id}`,children:"Edit"}),(0,b.jsx)(l.Button,{size:"sm",variant:"destructive",onClick:()=>v.mutate(a.id),disabled:v.isPending,"data-testid":`button-delete-announcement-${a.id}`,children:"Delete"})]})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No announcements found"})})})]})})})})]}),(0,b.jsxs)(aA.TabsContent,{value:"email-campaigns",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Email Campaigns"}),(0,b.jsx)(l.Button,{"data-testid":"button-create-campaign",children:"Create Campaign"})]}),r?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c))}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-sent",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Sent"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-sent",children:s.sent}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Emails sent"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-opened",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Opened"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-opened",children:s.opened}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.openRate,"% open rate"]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-clicked",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Clicked"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-clicked",children:s.clicked}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.clickRate,"% click rate"]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-bounced",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Bounced"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-bounced",children:s.bounced}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.bounceRate,"% bounce rate"]})]})]})]}),n?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-campaigns",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Recent Campaigns"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Subject"}),(0,b.jsx)(_.TableHead,{children:"Sent"}),(0,b.jsx)(_.TableHead,{children:"Opened"}),(0,b.jsx)(_.TableHead,{children:"Clicked"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Created"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:o.length>0?o.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`campaign-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:a.name}),(0,b.jsx)(_.TableCell,{children:a.subject}),(0,b.jsx)(_.TableCell,{children:a.sent||0}),(0,b.jsx)(_.TableCell,{children:a.opened||0}),(0,b.jsx)(_.TableCell,{children:a.clicked||0}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"sent"===a.status?"default":"secondary",children:a.status})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-view-campaign-${a.id}`,children:"View Report"})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No campaigns found"})})})]})})})]})]})]})]})}function a4(){let[a,c]=(0,e.useState)("all"),[d,f]=(0,e.useState)("all"),[g,h]=(0,e.useState)("all"),[i,j]=(0,e.useState)(null),{toast:k}=(0,aq.useToast)(),{data:m,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/support/tickets",{status:a,priority:d,category:g}]}),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/support/stats"]}),s=(0,an.useMutation)({mutationFn:async({ticketId:a,data:b})=>(0,au.apiRequest)("PUT",`/api/admin/support/tickets/${a}`,b),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/support/tickets"]}),k({title:"Ticket updated successfully"})},onError:()=>{k({title:"Failed to update ticket",variant:"destructive"})}}),t=(0,an.useMutation)({mutationFn:async({ticketId:a,message:b})=>(0,au.apiRequest)("POST",`/api/admin/support/tickets/${a}/reply`,{message:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/support/tickets"]}),k({title:"Reply sent successfully"})},onError:()=>{k({title:"Failed to send reply",variant:"destructive"})}}),u=(0,an.useMutation)({mutationFn:async a=>(0,au.apiRequest)("POST",`/api/admin/support/tickets/${a}/close`),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/support/tickets"]}),k({title:"Ticket closed"}),j(null)},onError:()=>{k({title:"Failed to close ticket",variant:"destructive"})}}),v=a=>{switch(a){case"urgent":case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Support & Tickets"}),r?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c))}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-open-tickets",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Open Tickets"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-open-tickets",children:q?.openTickets||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting response"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-avg-response-time",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Avg Response Time"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-avg-response-time",children:q?.avgResponseTime||"0h"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Time to first response"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-avg-resolution-time",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Avg Resolution Time"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-avg-resolution-time",children:q?.avgResolutionTime||"0h"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Time to close"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-satisfaction-score",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Satisfaction Score"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-satisfaction-score",children:[q?.satisfactionScore||0,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"User satisfaction"})]})]})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)(ao.Select,{value:a,onValueChange:c,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-status-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(ao.SelectItem,{value:"open",children:"Open"}),(0,b.jsx)(ao.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(ao.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(ao.SelectItem,{value:"closed",children:"Closed"})]})]}),(0,b.jsxs)(ao.Select,{value:d,onValueChange:f,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-priority-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Priority"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Priorities"}),(0,b.jsx)(ao.SelectItem,{value:"urgent",children:"Urgent"}),(0,b.jsx)(ao.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(ao.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(ao.SelectItem,{value:"low",children:"Low"})]})]}),(0,b.jsxs)(ao.Select,{value:g,onValueChange:h,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-category-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Category"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Categories"}),(0,b.jsx)(ao.SelectItem,{value:"technical",children:"Technical"}),(0,b.jsx)(ao.SelectItem,{value:"billing",children:"Billing"}),(0,b.jsx)(ao.SelectItem,{value:"general",children:"General"})]})]})]})})]}),o?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-tickets",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Support Tickets (",m?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Ticket #"}),(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Subject"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Priority"}),(0,b.jsx)(_.TableHead,{children:"Created"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:m&&m.length>0?m.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`ticket-${a.id}`,children:[(0,b.jsxs)(_.TableCell,{children:["#",a.id]}),(0,b.jsx)(_.TableCell,{children:a.username}),(0,b.jsx)(_.TableCell,{children:a.subject}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.status})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:v(a.priority),children:a.priority})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>j(a),"data-testid":`button-view-ticket-${a.id}`,children:"View"})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No tickets found"})})})]})})})]}),(0,b.jsx)(ap.Dialog,{open:!!i,onOpenChange:()=>j(null),children:(0,b.jsxs)(ap.DialogContent,{className:"max-w-3xl","data-testid":"dialog-ticket-detail",children:[(0,b.jsxs)(ap.DialogHeader,{children:[(0,b.jsxs)(ap.DialogTitle,{children:["Ticket #",i?.id]}),(0,b.jsx)(ap.DialogDescription,{children:i?.subject})]}),i&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"User"}),(0,b.jsx)("p",{className:"font-medium",children:i.username})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,b.jsx)(al.Badge,{variant:"outline",children:i.status})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Priority"}),(0,b.jsx)(al.Badge,{variant:v(i.priority),children:i.priority})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Category"}),(0,b.jsx)("p",{className:"font-medium",children:i.category||"N/A"})]})]}),(0,b.jsx)(n.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{children:"Conversation"}),(0,b.jsx)("div",{className:"border rounded-md p-4 space-y-4 max-h-96 overflow-y-auto",children:i.messages&&i.messages.length>0?i.messages.map(a=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"font-medium",children:a.sender}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]}),(0,b.jsx)("p",{className:"text-sm",children:a.content}),(0,b.jsx)(n.Separator,{className:"mt-2"})]},a.id)):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No messages yet"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"reply-message",children:"Reply"}),(0,b.jsx)(aG.Textarea,{id:"reply-message",placeholder:"Type your reply...",rows:4,"data-testid":"textarea-reply"}),(0,b.jsx)(l.Button,{onClick:()=>{let a=document.getElementById("reply-message")?.value;t.mutate({ticketId:i.id,message:a})},disabled:t.isPending,"data-testid":"button-send-reply",children:"Send Reply"})]}),(0,b.jsx)(n.Separator,{}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"assign-admin",children:"Assign to Admin"}),(0,b.jsxs)(ao.Select,{children:[(0,b.jsx)(ao.SelectTrigger,{id:"assign-admin","data-testid":"select-assign-admin",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select admin"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"admin1",children:"Admin 1"}),(0,b.jsx)(ao.SelectItem,{value:"admin2",children:"Admin 2"})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"update-status",children:"Update Status"}),(0,b.jsxs)(ao.Select,{defaultValue:i.status,onValueChange:a=>{s.mutate({ticketId:i.id,data:{status:a}})},children:[(0,b.jsx)(ao.SelectTrigger,{id:"update-status","data-testid":"select-update-status",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"open",children:"Open"}),(0,b.jsx)(ao.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(ao.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(ao.SelectItem,{value:"closed",children:"Closed"})]})]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(l.Button,{variant:"destructive",onClick:()=>u.mutate(i.id),disabled:u.isPending,"data-testid":"button-close-ticket",children:"Close Ticket"})}),i.tags&&i.tags.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:i.tags.map((a,c)=>(0,b.jsx)(al.Badge,{variant:"secondary",children:a},c))})]})]})]})})]})}var a5=a.i(84505);function a6(){let[a,c]=(0,e.useState)("admin-actions"),[d,f]=(0,e.useState)("all"),[g,h]=(0,e.useState)("all"),[i,j]=(0,e.useState)("all"),[k,n]=(0,e.useState)(""),[o,q]=(0,e.useState)("all"),[r,s]=(0,e.useState)("all"),[t,u]=(0,e.useState)("all"),{data:v,isLoading:w}=(0,Z.useQuery)({queryKey:["/api/admin/logs/admin-actions",{admin:d,actionType:g,targetType:i,search:k}]}),{data:x,isLoading:y}=(0,Z.useQuery)({queryKey:["/api/admin/logs/security",{severity:o,eventType:t}]}),{data:z,isLoading:A}=(0,Z.useQuery)({queryKey:["/api/admin/logs/performance",{metricType:r}]}),{data:B,isLoading:C}=(0,Z.useQuery)({queryKey:["/api/admin/logs/system-events",{severity:o,eventType:t}]}),D=a=>{console.log(`Exporting logs as ${a}`)},E=a=>{switch(a){case"critical":case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Audit Logs"}),(0,b.jsxs)(aA.Tabs,{value:a,onValueChange:c,"data-testid":"tabs-logs",children:[(0,b.jsxs)(aA.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(aA.TabsTrigger,{value:"admin-actions","data-testid":"tab-admin-actions",children:"Admin Actions"}),(0,b.jsx)(aA.TabsTrigger,{value:"security","data-testid":"tab-security-logs",children:"Security Logs"}),(0,b.jsx)(aA.TabsTrigger,{value:"performance","data-testid":"tab-performance-logs",children:"Performance Logs"}),(0,b.jsx)(aA.TabsTrigger,{value:"system","data-testid":"tab-system-events",children:"System Events"})]}),(0,b.jsxs)(aA.TabsContent,{value:"admin-actions",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters & Search"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,b.jsx)(m.Input,{placeholder:"Search logs...",value:k,onChange:a=>{let b=a.target.value;setTimeout(()=>n(b),300)},"data-testid":"input-search-logs"}),(0,b.jsxs)(ao.Select,{value:d,onValueChange:f,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-admin-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Admin User"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Admins"}),(0,b.jsx)(ao.SelectItem,{value:"admin1",children:"Admin 1"}),(0,b.jsx)(ao.SelectItem,{value:"admin2",children:"Admin 2"})]})]}),(0,b.jsxs)(ao.Select,{value:g,onValueChange:h,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-action-type-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Action Type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Actions"}),(0,b.jsx)(ao.SelectItem,{value:"create",children:"Create"}),(0,b.jsx)(ao.SelectItem,{value:"update",children:"Update"}),(0,b.jsx)(ao.SelectItem,{value:"delete",children:"Delete"})]})]}),(0,b.jsxs)(ao.Select,{value:i,onValueChange:j,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-target-type-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Target Type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Targets"}),(0,b.jsx)(ao.SelectItem,{value:"user",children:"User"}),(0,b.jsx)(ao.SelectItem,{value:"content",children:"Content"}),(0,b.jsx)(ao.SelectItem,{value:"settings",children:"Settings"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsx)(m.Input,{type:"date",placeholder:"Start Date",className:"w-full md:w-auto","data-testid":"input-start-date"}),(0,b.jsx)(m.Input,{type:"date",placeholder:"End Date",className:"w-full md:w-auto","data-testid":"input-end-date"}),(0,b.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,b.jsxs)(l.Button,{variant:"outline",onClick:()=>D("csv"),"data-testid":"button-export-csv",children:[(0,b.jsx)(a5.Download,{className:"h-4 w-4 mr-1"}),"CSV"]}),(0,b.jsxs)(l.Button,{variant:"outline",onClick:()=>D("json"),"data-testid":"button-export-json",children:[(0,b.jsx)(a5.Download,{className:"h-4 w-4 mr-1"}),"JSON"]})]})]})]})]}),w?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-admin-logs",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Admin Action Logs (",v?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Admin"}),(0,b.jsx)(_.TableHead,{children:"Action Type"}),(0,b.jsx)(_.TableHead,{children:"Target"}),(0,b.jsx)(_.TableHead,{children:"Details"}),(0,b.jsx)(_.TableHead,{children:"IP Address"})]})}),(0,b.jsx)(_.TableBody,{children:v&&v.length>0?v.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`log-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:a.adminUsername}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.actionType})}),(0,b.jsx)(_.TableCell,{children:a.targetType}),(0,b.jsx)(_.TableCell,{children:a.details}),(0,b.jsx)(_.TableCell,{children:a.ipAddress})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No logs found"})})})]})})})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"security",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)(ao.Select,{value:o,onValueChange:q,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-security-severity-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Severity"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Severities"}),(0,b.jsx)(ao.SelectItem,{value:"critical",children:"Critical"}),(0,b.jsx)(ao.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(ao.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(ao.SelectItem,{value:"low",children:"Low"})]})]}),(0,b.jsxs)(ao.Select,{value:t,onValueChange:u,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-security-event-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Event Type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Events"}),(0,b.jsx)(ao.SelectItem,{value:"login",children:"Login"}),(0,b.jsx)(ao.SelectItem,{value:"access",children:"Access"}),(0,b.jsx)(ao.SelectItem,{value:"breach",children:"Breach"})]})]})]})})]}),y?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-security-logs",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Security Event Logs (",x?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Event Type"}),(0,b.jsx)(_.TableHead,{children:"Severity"}),(0,b.jsx)(_.TableHead,{children:"Description"}),(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"IP Address"})]})}),(0,b.jsx)(_.TableBody,{children:x&&x.length>0?x.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`security-log-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:a.eventType}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:E(a.severity),children:a.severity})}),(0,b.jsx)(_.TableCell,{children:a.description}),(0,b.jsx)(_.TableCell,{children:a.username||"N/A"}),(0,b.jsx)(_.TableCell,{children:a.ipAddress})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No security logs found"})})})]})})})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"performance",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)(ao.Select,{value:r,onValueChange:s,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-metric-type-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Metric Type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Metrics"}),(0,b.jsx)(ao.SelectItem,{value:"cpu",children:"CPU"}),(0,b.jsx)(ao.SelectItem,{value:"memory",children:"Memory"}),(0,b.jsx)(ao.SelectItem,{value:"response_time",children:"Response Time"})]})]}),(0,b.jsx)(m.Input,{type:"date",placeholder:"Start Date","data-testid":"input-perf-start-date"}),(0,b.jsx)(m.Input,{type:"date",placeholder:"End Date","data-testid":"input-perf-end-date"})]})})]}),A?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)($.Card,{"data-testid":"card-avg-metric",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Average"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-avg-metric",children:z?.aggregations?.avg||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average value"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-min-metric",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Minimum"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-min-metric",children:z?.aggregations?.min||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Minimum value"})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-max-metric",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Maximum"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-max-metric",children:z?.aggregations?.max||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum value"})]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-performance-logs",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["Performance Metrics (",z?.logs?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Metric Type"}),(0,b.jsx)(_.TableHead,{children:"Value"}),(0,b.jsx)(_.TableHead,{children:"Unit"}),(0,b.jsx)(_.TableHead,{children:"Status"})]})}),(0,b.jsx)(_.TableBody,{children:z?.logs&&z.logs.length>0?z.logs.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`perf-log-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:a.metricType}),(0,b.jsx)(_.TableCell,{children:a.value}),(0,b.jsx)(_.TableCell,{children:a.unit}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"normal"===a.status?"secondary":"destructive",children:a.status})})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No performance logs found"})})})]})})})]})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"system",className:"space-y-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Filters"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)(ao.Select,{value:t,onValueChange:u,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-system-event-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Event Type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Events"}),(0,b.jsx)(ao.SelectItem,{value:"startup",children:"Startup"}),(0,b.jsx)(ao.SelectItem,{value:"shutdown",children:"Shutdown"}),(0,b.jsx)(ao.SelectItem,{value:"error",children:"Error"})]})]}),(0,b.jsxs)(ao.Select,{value:o,onValueChange:q,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-full md:w-48","data-testid":"select-system-severity-filter",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Severity"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Severities"}),(0,b.jsx)(ao.SelectItem,{value:"critical",children:"Critical"}),(0,b.jsx)(ao.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(ao.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(ao.SelectItem,{value:"low",children:"Low"})]})]})]})})]}),C?(0,b.jsx)(p.Skeleton,{className:"h-96"}):(0,b.jsxs)($.Card,{"data-testid":"card-system-events",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{children:["System Events (",B?.length||0,")"]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Event Type"}),(0,b.jsx)(_.TableHead,{children:"Severity"}),(0,b.jsx)(_.TableHead,{children:"Description"}),(0,b.jsx)(_.TableHead,{children:"Component"})]})}),(0,b.jsx)(_.TableBody,{children:B&&B.length>0?B.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`system-event-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:a.eventType}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:E(a.severity),children:a.severity})}),(0,b.jsx)(_.TableCell,{children:a.description}),(0,b.jsx)(_.TableCell,{children:a.component})]},a.id)):(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No system events found"})})})]})})})]})]})]})]})}let a7=(0,h.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);function a8(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(!1),[f,g]=(0,e.useState)([70]),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/automation/rules"]}),j=Array.isArray(h)?h:[],{data:k,isLoading:n}=(0,Z.useQuery)({queryKey:["/api/admin/ai/moderation-stats"]}),o=k||{accuracyRate:0,falsePositives:0,falseNegatives:0,timeSavedHours:0},{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/ai/moderation-decisions"]}),s=Array.isArray(q)?q:[],{data:t,isLoading:u}=(0,Z.useQuery)({queryKey:["/api/admin/ai/sentiment-distribution"]}),v=Array.isArray(t)?t:[],{data:w,isLoading:x}=(0,Z.useQuery)({queryKey:["/api/admin/ai/spam-metrics"]}),y=w||{accuracy:0,blocked:0,flagged:0},{data:z,isLoading:A}=(0,Z.useQuery)({queryKey:["/api/admin/ai/flagged-content"]}),B=Array.isArray(z)?z:[],C=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/automation/rules","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/automation/rules"]}),a({title:"Rule created successfully"}),d(!1)}}),D=(0,an.useMutation)({mutationFn:({id:a,enabled:b})=>(0,au.apiRequest)(`/api/admin/automation/rules/${a}`,"PATCH",{enabled:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/automation/rules"]}),a({title:"Rule updated"})}}),E=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/automation/rules/${a}/execute`,"POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/automation/rules"]}),a({title:"Rule executed successfully"})}}),F=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/ai/moderation-decisions/${a}/override`,"POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/ai/moderation-decisions"]}),a({title:"Decision overridden"})}}),G=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/ai/spam-sensitivity","PATCH",{sensitivity:a}),onSuccess:()=>{a({title:"Sensitivity updated"})}}),H=["hsl(var(--primary))","hsl(var(--accent))","hsl(var(--muted))"];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"AI & Automation"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"automation",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"automation","data-testid":"tab-automation",children:"Automation Rules"}),(0,b.jsx)(aA.TabsTrigger,{value:"moderation","data-testid":"tab-moderation",children:"Content Moderation AI"}),(0,b.jsx)(aA.TabsTrigger,{value:"spam","data-testid":"tab-spam",children:"Spam Detection"})]}),(0,b.jsxs)(aA.TabsContent,{value:"automation",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Automation Rules"}),(0,b.jsxs)(ap.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-rule",children:"Create Rule"})}),(0,b.jsxs)(ap.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create Automation Rule"})}),(0,b.jsxs)("form",{onSubmit:b=>{b.preventDefault();let c=new FormData(b.currentTarget),d=c.get("triggerConfig"),e=c.get("actionConfig");try{JSON.parse(d),JSON.parse(e)}catch(b){a({title:"Invalid JSON in configuration",variant:"destructive"});return}C.mutate({name:c.get("name"),triggerType:c.get("triggerType"),triggerConfig:d,actionType:c.get("actionType"),actionConfig:e})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"name",children:"Rule Name"}),(0,b.jsx)(m.Input,{id:"name",name:"name",required:!0,"data-testid":"input-rule-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"triggerType",children:"Trigger Type"}),(0,b.jsxs)(ao.Select,{name:"triggerType",required:!0,children:[(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-trigger-type",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select trigger type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"user_signup",children:"User Signup"}),(0,b.jsx)(ao.SelectItem,{value:"content_published",children:"Content Published"}),(0,b.jsx)(ao.SelectItem,{value:"time_based",children:"Time Based"}),(0,b.jsx)(ao.SelectItem,{value:"threshold_reached",children:"Threshold Reached"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"triggerConfig",children:"Trigger Configuration (JSON)"}),(0,b.jsx)(aG.Textarea,{id:"triggerConfig",name:"triggerConfig",placeholder:'{"key": "value"}',className:"font-mono text-sm",required:!0,"data-testid":"textarea-trigger-config"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"actionType",children:"Action Type"}),(0,b.jsxs)(ao.Select,{name:"actionType",required:!0,children:[(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-action-type",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select action type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"send_email",children:"Send Email"}),(0,b.jsx)(ao.SelectItem,{value:"create_notification",children:"Create Notification"}),(0,b.jsx)(ao.SelectItem,{value:"award_coins",children:"Award Coins"}),(0,b.jsx)(ao.SelectItem,{value:"assign_badge",children:"Assign Badge"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"actionConfig",children:"Action Configuration (JSON)"}),(0,b.jsx)(aG.Textarea,{id:"actionConfig",name:"actionConfig",placeholder:'{"key": "value"}',className:"font-mono text-sm",required:!0,"data-testid":"textarea-action-config"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:C.isPending,"data-testid":"button-submit-rule",children:C.isPending?"Creating...":"Create Rule"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:i?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Trigger"}),(0,b.jsx)(_.TableHead,{children:"Action"}),(0,b.jsx)(_.TableHead,{children:"Executions"}),(0,b.jsx)(_.TableHead,{children:"Last Executed"}),(0,b.jsx)(_.TableHead,{children:"Enabled"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[j.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`rule-${a.id}`,children:[(0,b.jsx)(_.TableCell,{"data-testid":`rule-name-${a.id}`,children:a.name}),(0,b.jsx)(_.TableCell,{children:a.triggerType}),(0,b.jsx)(_.TableCell,{children:a.actionType}),(0,b.jsx)(_.TableCell,{children:a.executionCount||0}),(0,b.jsx)(_.TableCell,{children:a.lastExecutedAt?(0,ab.formatDistanceToNow)(new Date(a.lastExecutedAt),{addSuffix:!0}):"Never"}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(aZ.Switch,{checked:a.enabled,onCheckedChange:b=>D.mutate({id:a.id,enabled:b}),"data-testid":`switch-rule-${a.id}`})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>E.mutate(a.id),disabled:E.isPending,"data-testid":`button-execute-${a.id}`,children:[(0,b.jsx)(a7,{className:"w-3 h-3 mr-1"}),"Execute"]})})]},a.id)),0===j.length&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No automation rules created"})})]})]})})})})]}),(0,b.jsxs)(aA.TabsContent,{value:"moderation",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Content Moderation AI"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n?[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-accuracy-rate",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Accuracy Rate"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-accuracy-rate",children:[o.accuracyRate,"%"]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-false-positives",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"False Positives"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-false-positives",children:o.falsePositives})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-false-negatives",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"False Negatives"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-false-negatives",children:o.falseNegatives})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-time-saved",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Time Saved"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-time-saved",children:[o.timeSavedHours,"h"]})})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Recent AI Decisions"})}),(0,b.jsx)($.CardContent,{children:r?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Content"}),(0,b.jsx)(_.TableHead,{children:"Decision"}),(0,b.jsx)(_.TableHead,{children:"Confidence"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[s.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.contentPreview}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"approved"===a.decision?"default":"destructive",children:a.decision})}),(0,b.jsxs)(_.TableCell,{children:[a.confidence,"%"]}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>F.mutate(a.id),"data-testid":`button-override-${a.id}`,children:"Override"})})]},a.id)),0===s.length&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No recent decisions"})})]})]})})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Sentiment Distribution"})}),(0,b.jsx)($.CardContent,{children:u?(0,b.jsx)(p.Skeleton,{className:"h-64"}):v.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:a=>a.name,outerRadius:80,fill:"hsl(var(--primary))",dataKey:"value",children:v.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:H[c%H.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"spam",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Spam Detection"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:x?[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-spam-accuracy",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Detection Accuracy"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-spam-accuracy",children:[y.accuracy,"%"]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-spam-blocked",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Spam Blocked"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-spam-blocked",children:y.blocked})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-spam-flagged",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Currently Flagged"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-spam-flagged",children:y.flagged})})]})]})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Adjust Sensitivity"})}),(0,b.jsxs)($.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(a_.Label,{children:["Sensitivity Level: ",f[0],"%"]}),(0,b.jsx)(a$.Slider,{value:f,onValueChange:g,max:100,step:1,"data-testid":"slider-sensitivity"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Higher values will flag more content as potential spam"})]}),(0,b.jsx)(l.Button,{onClick:()=>G.mutate(f[0]),disabled:G.isPending,"data-testid":"button-update-sensitivity",children:"Update Sensitivity"})]})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Flagged Content"})}),(0,b.jsx)($.CardContent,{children:A?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Content"}),(0,b.jsx)(_.TableHead,{children:"Spam Score"}),(0,b.jsx)(_.TableHead,{children:"Author"}),(0,b.jsx)(_.TableHead,{children:"Flagged At"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[B.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.contentPreview}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:a.spamScore>80?"destructive":"secondary",children:[a.spamScore,"%"]})}),(0,b.jsx)(_.TableCell,{children:a.authorUsername}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.flaggedAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline","data-testid":`button-approve-${a.id}`,children:"Approve"})})]},a.id)),0===B.length&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No flagged content"})})]})]})})})]})]})]})]})}var a9=a.i(93518);function ba(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)("contributors"),[j,k]=(0,e.useState)("all-time"),{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/gamification/badges"]}),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/gamification/achievements"]}),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/gamification/leaderboard",h,j]}),{data:u,isLoading:v}=(0,Z.useQuery)({queryKey:["/api/admin/gamification/goals"]}),{data:w,isLoading:x}=(0,Z.useQuery)({queryKey:["/api/admin/gamification/goal-completion"]}),y=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/gamification/badges","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/gamification/badges"]}),a({title:"Badge created successfully"}),d(!1)}}),z=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/gamification/achievements","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/gamification/achievements"]}),a({title:"Achievement created successfully"}),g(!1)}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Gamification"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"badges",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"badges","data-testid":"tab-badges",children:"Badges"}),(0,b.jsx)(aA.TabsTrigger,{value:"achievements","data-testid":"tab-achievements",children:"Achievements"}),(0,b.jsx)(aA.TabsTrigger,{value:"leaderboards","data-testid":"tab-leaderboards",children:"Leaderboards"}),(0,b.jsx)(aA.TabsTrigger,{value:"goals","data-testid":"tab-goals",children:"Goals"})]}),(0,b.jsxs)(aA.TabsContent,{value:"badges",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Badges"}),(0,b.jsxs)(ap.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-badge",children:"Create Badge"})}),(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create New Badge"})}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);y.mutate({name:b.get("name"),description:b.get("description"),imageUrl:b.get("imageUrl"),rarity:b.get("rarity")})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"name",children:"Badge Name"}),(0,b.jsx)(m.Input,{id:"name",name:"name",required:!0,"data-testid":"input-badge-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(m.Input,{id:"description",name:"description",required:!0,"data-testid":"input-badge-description"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"imageUrl",children:"Image URL"}),(0,b.jsx)(m.Input,{id:"imageUrl",name:"imageUrl",type:"url",required:!0,"data-testid":"input-badge-image"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"rarity",children:"Rarity"}),(0,b.jsxs)(ao.Select,{name:"rarity",required:!0,children:[(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-badge-rarity",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select rarity"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"common",children:"Common"}),(0,b.jsx)(ao.SelectItem,{value:"rare",children:"Rare"}),(0,b.jsx)(ao.SelectItem,{value:"epic",children:"Epic"}),(0,b.jsx)(ao.SelectItem,{value:"legendary",children:"Legendary"})]})]})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:y.isPending,"data-testid":"button-submit-badge",children:y.isPending?"Creating...":"Create Badge"})})]})]})]})]}),o?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-48"},c))}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n?.map(a=>(0,b.jsxs)($.Card,{"data-testid":`badge-card-${a.id}`,children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center",children:a.imageUrl?(0,b.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-12 h-12"}):(0,b.jsx)(a9.Award,{className:"w-8 h-8"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)($.CardTitle,{className:"text-lg","data-testid":`badge-name-${a.id}`,children:a.name}),(0,b.jsx)(al.Badge,{variant:"secondary",children:a.rarity})]})]}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})}),(0,b.jsx)($.CardFooter,{className:"flex justify-between gap-2",children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-semibold",children:a.totalEarned||0})," earned"]})})]},a.id)),(!n||0===n.length)&&(0,b.jsx)("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:"No badges created yet"})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"achievements",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Achievements"}),(0,b.jsxs)(ap.Dialog,{open:f,onOpenChange:g,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-achievement",children:"Create Achievement"})}),(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create New Achievement"})}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);z.mutate({name:b.get("name"),description:b.get("description"),criteria:b.get("criteria"),rewardCoins:parseInt(b.get("rewardCoins"))})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"ach-name",children:"Achievement Name"}),(0,b.jsx)(m.Input,{id:"ach-name",name:"name",required:!0,"data-testid":"input-achievement-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"ach-description",children:"Description"}),(0,b.jsx)(m.Input,{id:"ach-description",name:"description",required:!0,"data-testid":"input-achievement-description"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"criteria",children:"Criteria"}),(0,b.jsx)(m.Input,{id:"criteria",name:"criteria",required:!0,"data-testid":"input-achievement-criteria"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"rewardCoins",children:"Reward Coins"}),(0,b.jsx)(m.Input,{id:"rewardCoins",name:"rewardCoins",type:"number",required:!0,"data-testid":"input-achievement-reward"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:z.isPending,"data-testid":"button-submit-achievement",children:z.isPending?"Creating...":"Create Achievement"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:r?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Description"}),(0,b.jsx)(_.TableHead,{children:"Criteria"}),(0,b.jsx)(_.TableHead,{children:"Reward"}),(0,b.jsx)(_.TableHead,{children:"Completion Rate"})]})}),(0,b.jsxs)(_.TableBody,{children:[q?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`achievement-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-medium","data-testid":`achievement-name-${a.id}`,children:a.name}),(0,b.jsx)(_.TableCell,{children:a.description}),(0,b.jsx)(_.TableCell,{children:a.criteria}),(0,b.jsxs)(_.TableCell,{children:[a.rewardCoins," coins"]}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:[a.completionRate||0,"%"]})})]},a.id)),(!q||0===q.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No achievements created"})})]})]})})})})]}),(0,b.jsxs)(aA.TabsContent,{value:"leaderboards",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Leaderboards"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(ao.Select,{value:h,onValueChange:i,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-48","data-testid":"select-leaderboard-type",children:(0,b.jsx)(ao.SelectValue,{})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"contributors",children:"Top Contributors"}),(0,b.jsx)(ao.SelectItem,{value:"earners",children:"Top Earners"}),(0,b.jsx)(ao.SelectItem,{value:"uploaders",children:"Top Uploaders"})]})]}),(0,b.jsxs)(ao.Select,{value:j,onValueChange:k,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-40","data-testid":"select-time-period",children:(0,b.jsx)(ao.SelectValue,{})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"weekly",children:"Weekly"}),(0,b.jsx)(ao.SelectItem,{value:"monthly",children:"Monthly"}),(0,b.jsx)(ao.SelectItem,{value:"all-time",children:"All Time"})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:t?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[...Array(10)].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{className:"w-20",children:"Rank"}),(0,b.jsx)(_.TableHead,{children:"User"}),(0,b.jsx)(_.TableHead,{children:"Score"})]})}),(0,b.jsxs)(_.TableBody,{children:[s?.map((a,c)=>(0,b.jsxs)(_.TableRow,{"data-testid":`leaderboard-${c}`,children:[(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[c<3&&(0,b.jsx)(R.Trophy,{className:`w-4 h-4 ${0===c?"text-yellow-500":1===c?"text-gray-400":"text-amber-700"}`}),(0,b.jsxs)("span",{className:"font-semibold",children:["#",c+1]})]})}),(0,b.jsx)(_.TableCell,{"data-testid":`leaderboard-user-${c}`,children:a.username}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{children:a.score})})]},a.id)),(!s||0===s.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:3,className:"text-center text-muted-foreground py-8",children:"No data available"})})]})]})})})})]}),(0,b.jsxs)(aA.TabsContent,{value:"goals",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"User Goals Analytics"}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Goal Completion Rate"})}),(0,b.jsx)($.CardContent,{children:x?(0,b.jsx)(p.Skeleton,{className:"h-64"}):w&&w.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:w,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"completionRate",stroke:"hsl(var(--primary))",strokeWidth:2})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Top Goals by Participation"})}),(0,b.jsx)($.CardContent,{children:v?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):u&&u.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:u,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"name"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"participants",fill:"hsl(var(--primary))"})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]})]})]})}var bb=a.i(52495);function bc(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(""),[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(null),{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/seo/content",c]}),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/seo/campaigns"]}),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/seo/campaign-stats"]}),{data:u,isLoading:v}=(0,Z.useQuery)({queryKey:["/api/admin/seo/search-rankings"]}),{data:w,isLoading:x}=(0,Z.useQuery)({queryKey:["/api/admin/seo/top-queries"]}),{data:y,isLoading:z}=(0,Z.useQuery)({queryKey:["/api/admin/seo/sitemap-status"]}),A=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/seo/meta/${a.id}`,"PATCH",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/seo/content"]}),a({title:"Meta tags updated successfully"}),g(!1)}}),B=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/seo/campaigns","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/seo/campaigns"]}),au.queryClient.invalidateQueries({queryKey:["/api/admin/seo/campaign-stats"]}),a({title:"Campaign created successfully"}),i(!1)}}),C=(0,an.useMutation)({mutationFn:()=>(0,au.apiRequest)("/api/admin/seo/sitemap/generate","POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/seo/sitemap-status"]}),a({title:"Sitemap generated successfully"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"SEO & Marketing"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"meta",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"meta","data-testid":"tab-meta",children:"Meta Tags"}),(0,b.jsx)(aA.TabsTrigger,{value:"campaigns","data-testid":"tab-campaigns",children:"Campaigns"}),(0,b.jsx)(aA.TabsTrigger,{value:"analytics","data-testid":"tab-seo-analytics",children:"SEO Analytics"})]}),(0,b.jsxs)(aA.TabsContent,{value:"meta",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Meta Tags Management"}),(0,b.jsxs)("div",{className:"relative w-full md:w-auto md:min-w-80",children:[(0,b.jsx)(S.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(m.Input,{placeholder:"Search content...",value:c,onChange:a=>d(a.target.value),className:"pl-10","data-testid":"input-search-content"})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:o?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Title"}),(0,b.jsx)(_.TableHead,{children:"Type"}),(0,b.jsx)(_.TableHead,{children:"Meta Title"}),(0,b.jsx)(_.TableHead,{children:"Meta Description"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[n?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`content-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-medium max-w-xs truncate","data-testid":`content-title-${a.id}`,children:a.title}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"secondary",children:a.type})}),(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.metaTitle||"-"}),(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.metaDescription||"-"}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>{k(a),g(!0)},"data-testid":`button-edit-meta-${a.id}`,children:"Edit Meta"})})]},a.id)),(!n||0===n.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No content found"})})]})]})})})}),(0,b.jsx)(ap.Dialog,{open:f,onOpenChange:g,children:(0,b.jsxs)(ap.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Edit Meta Tags"})}),j&&(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);A.mutate({id:j.id,title:b.get("title"),description:b.get("description"),keywords:b.get("keywords")})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"title",children:"Meta Title"}),(0,b.jsx)(m.Input,{id:"title",name:"title",defaultValue:j.metaTitle,maxLength:60,"data-testid":"input-meta-title"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recommended: 50-60 characters"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"description",children:"Meta Description"}),(0,b.jsx)(aG.Textarea,{id:"description",name:"description",defaultValue:j.metaDescription,maxLength:160,rows:3,"data-testid":"textarea-meta-description"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recommended: 150-160 characters"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"keywords",children:"Keywords (comma-separated)"}),(0,b.jsx)(m.Input,{id:"keywords",name:"keywords",defaultValue:j.metaKeywords,"data-testid":"input-meta-keywords"})]}),(0,b.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"Search Result Preview"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-sm text-blue-600 hover:underline cursor-pointer",children:j.metaTitle||j.title}),(0,b.jsx)("div",{className:"text-xs text-green-700",children:"https://yoforex.com/..."}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:j.metaDescription||"No description provided"})]})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:A.isPending,"data-testid":"button-save-meta",children:A.isPending?"Saving...":"Save Changes"})})]})]})})]}),(0,b.jsxs)(aA.TabsContent,{value:"campaigns",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Marketing Campaigns"}),(0,b.jsxs)(ap.Dialog,{open:h,onOpenChange:i,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-campaign",children:"Create Campaign"})}),(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create Marketing Campaign"})}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);B.mutate({name:b.get("name"),description:b.get("description"),startDate:b.get("startDate"),endDate:b.get("endDate"),budget:parseFloat(b.get("budget"))})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"camp-name",children:"Campaign Name"}),(0,b.jsx)(m.Input,{id:"camp-name",name:"name",required:!0,"data-testid":"input-campaign-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"camp-description",children:"Description"}),(0,b.jsx)(aG.Textarea,{id:"camp-description",name:"description",required:!0,"data-testid":"textarea-campaign-description"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"startDate",children:"Start Date"}),(0,b.jsx)(m.Input,{id:"startDate",name:"startDate",type:"date",required:!0,"data-testid":"input-campaign-start"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"endDate",children:"End Date"}),(0,b.jsx)(m.Input,{id:"endDate",name:"endDate",type:"date",required:!0,"data-testid":"input-campaign-end"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"budget",children:"Budget ($)"}),(0,b.jsx)(m.Input,{id:"budget",name:"budget",type:"number",step:"0.01",required:!0,"data-testid":"input-campaign-budget"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:B.isPending,"data-testid":"button-submit-campaign",children:B.isPending?"Creating...":"Create Campaign"})})]})]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t?[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-campaign-reach",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Reach"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-campaign-reach",children:s?.reach?.toLocaleString()||0})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-campaign-conversions",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Conversions"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-campaign-conversions",children:s?.conversions||0})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-campaign-roi",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"ROI"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-campaign-roi",children:[s?.roi||0,"%"]})})]})]})}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:r?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Start Date"}),(0,b.jsx)(_.TableHead,{children:"End Date"}),(0,b.jsx)(_.TableHead,{children:"Budget"}),(0,b.jsx)(_.TableHead,{children:"Performance"})]})}),(0,b.jsxs)(_.TableBody,{children:[q?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`campaign-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-medium","data-testid":`campaign-name-${a.id}`,children:a.name}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"active"===a.status?"default":"secondary",children:a.status})}),(0,b.jsx)(_.TableCell,{children:new Date(a.startDate).toLocaleDateString()}),(0,b.jsx)(_.TableCell,{children:new Date(a.endDate).toLocaleDateString()}),(0,b.jsxs)(_.TableCell,{children:["$",a.budget?.toLocaleString()]}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"outline",children:[a.performance||0,"% CTR"]})})]},a.id)),(!q||0===q.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No campaigns created"})})]})]})})})})]}),(0,b.jsxs)(aA.TabsContent,{value:"analytics",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"SEO Analytics"}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Search Rankings"})}),(0,b.jsx)($.CardContent,{children:v?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Page"}),(0,b.jsx)(_.TableHead,{children:"Keyword"}),(0,b.jsx)(_.TableHead,{children:"Position"}),(0,b.jsx)(_.TableHead,{children:"Change"})]})}),(0,b.jsxs)(_.TableBody,{children:[u?.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.page}),(0,b.jsx)(_.TableCell,{children:a.keyword}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:["#",a.position]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:a.change>0?"default":"destructive",children:[a.change>0?"+":"",a.change]})})]},a.id)),(!u||0===u.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No ranking data available"})})]})]})})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Top Search Queries"})}),(0,b.jsx)($.CardContent,{children:x?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Query"}),(0,b.jsx)(_.TableHead,{children:"Impressions"}),(0,b.jsx)(_.TableHead,{children:"Clicks"}),(0,b.jsx)(_.TableHead,{children:"CTR"})]})}),(0,b.jsxs)(_.TableBody,{children:[w?.map((a,c)=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-medium",children:a.query}),(0,b.jsx)(_.TableCell,{children:a.impressions?.toLocaleString()}),(0,b.jsx)(_.TableCell,{children:a.clicks?.toLocaleString()}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"outline",children:[a.ctr,"%"]})})]},c)),(!w||0===w.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No query data available"})})]})]})})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2",children:[(0,b.jsx)($.CardTitle,{children:"Sitemap Status"}),(0,b.jsxs)(l.Button,{onClick:()=>C.mutate(),disabled:C.isPending,"data-testid":"button-generate-sitemap",children:[(0,b.jsx)(G.FileText,{className:"w-4 h-4 mr-2"}),"Generate Sitemap"]})]}),(0,b.jsx)($.CardContent,{children:z?(0,b.jsx)(p.Skeleton,{className:"h-20"}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Last Generated:"}),(0,b.jsx)("span",{className:"font-medium",children:y?.lastGenerated?(0,ab.formatDistanceToNow)(new Date(y.lastGenerated),{addSuffix:!0}):"Never"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total URLs:"}),(0,b.jsx)(al.Badge,{variant:"secondary",children:y?.totalUrls||0})]}),y?.sitemapUrl&&(0,b.jsx)("div",{className:"flex items-center gap-2 pt-2",children:(0,b.jsxs)("a",{href:y.sitemapUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View Sitemap ",(0,b.jsx)(bb.ExternalLink,{className:"w-3 h-3"})]})})]})})]})]})]})]})}var bd=a.i(31122),be=a.i(81402);let bf=(0,h.default)("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),bg=(0,h.default)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),bh=[{id:"user.created",label:"User Created"},{id:"user.updated",label:"User Updated"},{id:"content.published",label:"Content Published"},{id:"content.deleted",label:"Content Deleted"},{id:"transaction.completed",label:"Transaction Completed"},{id:"comment.posted",label:"Comment Posted"}];function bi(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(null),[j,k]=(0,e.useState)([]),[n,o]=(0,e.useState)("all"),[q,r]=(0,e.useState)("all"),[s,t]=(0,e.useState)("all"),{data:u,isLoading:v}=(0,Z.useQuery)({queryKey:["/api/admin/integrations/api-keys"]}),{data:w,isLoading:x}=(0,Z.useQuery)({queryKey:["/api/admin/integrations/webhooks"]}),{data:y,isLoading:z}=(0,Z.useQuery)({queryKey:["/api/admin/integrations/event-logs",n,q,s]}),A=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/integrations/api-keys","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/integrations/api-keys"]}),a({title:"API key created successfully"}),d(!1)}}),B=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/integrations/api-keys/${a}/revoke`,"DELETE"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/integrations/api-keys"]}),a({title:"API key revoked"}),i(null)}}),C=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/integrations/webhooks","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/integrations/webhooks"]}),a({title:"Webhook created successfully"}),g(!1),k([])}}),D=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/integrations/webhooks/${a}/test`,"POST"),onSuccess:()=>{a({title:"Test webhook sent"})}}),E=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/integrations/event-logs/${a}/retry`,"POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/integrations/event-logs"]}),a({title:"Event retry initiated"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"API & Integrations"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"api-keys",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"api-keys","data-testid":"tab-api-keys",children:"API Keys"}),(0,b.jsx)(aA.TabsTrigger,{value:"webhooks","data-testid":"tab-webhooks",children:"Webhooks"}),(0,b.jsx)(aA.TabsTrigger,{value:"event-logs","data-testid":"tab-event-logs",children:"Event Logs"})]}),(0,b.jsxs)(aA.TabsContent,{value:"api-keys",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"API Keys"}),(0,b.jsxs)(ap.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(l.Button,{"data-testid":"button-create-api-key",children:[(0,b.jsx)(be.Key,{className:"w-4 h-4 mr-2"}),"Create API Key"]})}),(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create API Key"})}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);A.mutate({name:b.get("name"),permissions:b.get("permissions"),rateLimit:parseInt(b.get("rateLimit"))})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"key-name",children:"Name"}),(0,b.jsx)(m.Input,{id:"key-name",name:"name",required:!0,"data-testid":"input-api-key-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"permissions",children:"Permissions"}),(0,b.jsxs)(ao.Select,{name:"permissions",required:!0,children:[(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-api-key-permissions",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select permissions"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"read",children:"Read Only"}),(0,b.jsx)(ao.SelectItem,{value:"write",children:"Read & Write"}),(0,b.jsx)(ao.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"rateLimit",children:"Rate Limit (requests/hour)"}),(0,b.jsx)(m.Input,{id:"rateLimit",name:"rateLimit",type:"number",defaultValue:"1000",required:!0,"data-testid":"input-api-key-rate-limit"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:A.isPending,"data-testid":"button-submit-api-key",children:A.isPending?"Creating...":"Create API Key"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:v?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Key"}),(0,b.jsx)(_.TableHead,{children:"Permissions"}),(0,b.jsx)(_.TableHead,{children:"Rate Limit"}),(0,b.jsx)(_.TableHead,{children:"Last Used"}),(0,b.jsx)(_.TableHead,{children:"Usage"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[u?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`api-key-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-medium","data-testid":`api-key-name-${a.id}`,children:a.name}),(0,b.jsxs)(_.TableCell,{className:"font-mono text-xs",children:[a.key.substring(0,12),"...",a.key.substring(a.key.length-4)]}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.permissions})}),(0,b.jsxs)(_.TableCell,{children:[a.rateLimit,"/hr"]}),(0,b.jsx)(_.TableCell,{children:a.lastUsedAt?(0,ab.formatDistanceToNow)(new Date(a.lastUsedAt),{addSuffix:!0}):"Never"}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:[a.usageCount||0," requests"]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"destructive",onClick:()=>i(a.id),"data-testid":`button-revoke-${a.id}`,children:"Revoke"})})]},a.id)),(!u||0===u.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No API keys created"})})]})]})})})}),(0,b.jsx)(bd.AlertDialog,{open:!!h,onOpenChange:a=>!a&&i(null),children:(0,b.jsxs)(bd.AlertDialogContent,{children:[(0,b.jsxs)(bd.AlertDialogHeader,{children:[(0,b.jsx)(bd.AlertDialogTitle,{children:"Revoke API Key"}),(0,b.jsx)(bd.AlertDialogDescription,{children:"Are you sure you want to revoke this API key? This action cannot be undone and will immediately invalidate the key."})]}),(0,b.jsxs)(bd.AlertDialogFooter,{children:[(0,b.jsx)(bd.AlertDialogCancel,{"data-testid":"button-cancel-revoke",children:"Cancel"}),(0,b.jsx)(bd.AlertDialogAction,{onClick:()=>h&&B.mutate(h),"data-testid":"button-confirm-revoke",children:"Revoke"})]})]})})]}),(0,b.jsxs)(aA.TabsContent,{value:"webhooks",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Webhooks"}),(0,b.jsxs)(ap.Dialog,{open:f,onOpenChange:g,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(l.Button,{"data-testid":"button-create-webhook",children:[(0,b.jsx)(bf,{className:"w-4 h-4 mr-2"}),"Create Webhook"]})}),(0,b.jsxs)(ap.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create Webhook"})}),(0,b.jsxs)("form",{onSubmit:b=>{b.preventDefault();let c=new FormData(b.currentTarget);0===j.length?a({title:"Please select at least one event",variant:"destructive"}):C.mutate({url:c.get("url"),events:j,secret:c.get("secret")})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"url",children:"Webhook URL"}),(0,b.jsx)(m.Input,{id:"url",name:"url",type:"url",placeholder:"https://example.com/webhook",required:!0,"data-testid":"input-webhook-url"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{children:"Events"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 p-4 border rounded-lg",children:bh.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(aI.Checkbox,{id:a.id,checked:j.includes(a.id),onCheckedChange:b=>{k(b?[...j,a.id]:j.filter(b=>b!==a.id))},"data-testid":`checkbox-event-${a.id}`}),(0,b.jsx)(a_.Label,{htmlFor:a.id,className:"text-sm cursor-pointer",children:a.label})]},a.id))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"secret",children:"Secret (optional)"}),(0,b.jsx)(m.Input,{id:"secret",name:"secret",placeholder:"Webhook signing secret","data-testid":"input-webhook-secret"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used to verify webhook authenticity"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:C.isPending,"data-testid":"button-submit-webhook",children:C.isPending?"Creating...":"Create Webhook"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:x?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"URL"}),(0,b.jsx)(_.TableHead,{children:"Events"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Success"}),(0,b.jsx)(_.TableHead,{children:"Failures"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[w?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`webhook-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-mono text-xs max-w-xs truncate","data-testid":`webhook-url-${a.id}`,children:a.url}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.events?.slice(0,2).map(a=>(0,b.jsx)(al.Badge,{variant:"secondary",className:"text-xs",children:a},a)),a.events?.length>2&&(0,b.jsxs)(al.Badge,{variant:"secondary",className:"text-xs",children:["+",a.events.length-2]})]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:a.active?"default":"secondary",children:a.active?"Active":"Inactive"})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"outline",children:a.successCount||0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:a.failureCount>0?"destructive":"outline",children:a.failureCount||0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>D.mutate(a.id),disabled:D.isPending,"data-testid":`button-test-webhook-${a.id}`,children:"Test"})})]},a.id)),(!w||0===w.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No webhooks configured"})})]})]})})})})]}),(0,b.jsxs)(aA.TabsContent,{value:"event-logs",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Event Logs"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(ao.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-48","data-testid":"select-filter-webhook",children:(0,b.jsx)(ao.SelectValue,{placeholder:"All Webhooks"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Webhooks"}),w?.map(a=>(0,b.jsxs)(ao.SelectItem,{value:a.id,children:[a.url.substring(0,30),"..."]},a.id))]})]}),(0,b.jsxs)(ao.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-48","data-testid":"select-filter-event-type",children:(0,b.jsx)(ao.SelectValue,{placeholder:"All Events"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Events"}),bh.map(a=>(0,b.jsx)(ao.SelectItem,{value:a.id,children:a.label},a.id))]})]}),(0,b.jsxs)(ao.Select,{value:s,onValueChange:t,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-40","data-testid":"select-filter-status",children:(0,b.jsx)(ao.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(ao.SelectItem,{value:"success",children:"Success"}),(0,b.jsx)(ao.SelectItem,{value:"failed",children:"Failed"}),(0,b.jsx)(ao.SelectItem,{value:"pending",children:"Pending"})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:z?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[...Array(10)].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Event Type"}),(0,b.jsx)(_.TableHead,{children:"Webhook"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Response"}),(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[y?.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"secondary",children:a.eventType})}),(0,b.jsx)(_.TableCell,{className:"font-mono text-xs max-w-xs truncate",children:a.webhookUrl}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"success"===a.status?"default":"failed"===a.status?"destructive":"secondary",children:a.status})}),(0,b.jsx)(_.TableCell,{className:"max-w-xs truncate",children:a.response||"-"}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:"failed"===a.status&&(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:()=>E.mutate(a.id),disabled:E.isPending,"data-testid":`button-retry-${a.id}`,children:[(0,b.jsx)(bg,{className:"w-3 h-3 mr-1"}),"Retry"]})})]},a.id)),(!y||0===y.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No event logs found"})})]})]})})})})]})]})]})}var bj=a.i(23312);let bk=["hsl(var(--primary))","hsl(var(--accent))","hsl(var(--muted))","hsl(var(--destructive))"];function bl(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)("all"),{data:f,isLoading:g}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/notification-history"]}),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/app-versions"]}),{data:j,isLoading:k}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/version-distribution"]}),{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/device-types"]}),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/os-distribution"]}),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/browser-distribution"]}),{data:u,isLoading:v}=(0,Z.useQuery)({queryKey:["/api/admin/mobile/screen-resolutions"]}),w=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/mobile/send-notification","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/mobile/notification-history"]}),a({title:"Notification sent successfully"})}}),x=(0,an.useMutation)({mutationFn:({id:a,forceUpdate:b})=>(0,au.apiRequest)(`/api/admin/mobile/app-versions/${a}/force-update`,"PATCH",{forceUpdate:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/mobile/app-versions"]}),a({title:"Force update setting updated"})}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Mobile & Push Notifications"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"push",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"push","data-testid":"tab-push",children:"Push Notifications"}),(0,b.jsx)(aA.TabsTrigger,{value:"versions","data-testid":"tab-versions",children:"App Versions"}),(0,b.jsx)(aA.TabsTrigger,{value:"analytics","data-testid":"tab-device-analytics",children:"Device Analytics"})]}),(0,b.jsxs)(aA.TabsContent,{value:"push",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Send Push Notification"}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"pt-6",children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);w.mutate({title:b.get("title"),body:b.get("body"),targetType:c,targetValue:b.get("targetValue")})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"title",children:"Notification Title"}),(0,b.jsx)(m.Input,{id:"title",name:"title",required:!0,"data-testid":"input-notification-title"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"body",children:"Notification Body"}),(0,b.jsx)(aG.Textarea,{id:"body",name:"body",rows:3,required:!0,"data-testid":"textarea-notification-body"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{children:"Target"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(aI.Checkbox,{id:"target-all",checked:"all"===c,onCheckedChange:()=>d("all"),"data-testid":"checkbox-target-all"}),(0,b.jsx)(a_.Label,{htmlFor:"target-all",className:"cursor-pointer",children:"All Users"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(aI.Checkbox,{id:"target-segments",checked:"segments"===c,onCheckedChange:()=>d("segments"),"data-testid":"checkbox-target-segments"}),(0,b.jsx)(a_.Label,{htmlFor:"target-segments",className:"cursor-pointer",children:"Specific Segments"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(aI.Checkbox,{id:"target-users",checked:"users"===c,onCheckedChange:()=>d("users"),"data-testid":"checkbox-target-users"}),(0,b.jsx)(a_.Label,{htmlFor:"target-users",className:"cursor-pointer",children:"Specific User IDs"})]})]})]}),("segments"===c||"users"===c)&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"targetValue",children:"segments"===c?"Segment Names (comma-separated)":"User IDs (comma-separated)"}),(0,b.jsx)(m.Input,{id:"targetValue",name:"targetValue",placeholder:"segments"===c?"premium, active-traders":"user-123, user-456","data-testid":"input-target-value"})]}),(0,b.jsxs)(l.Button,{type:"submit",disabled:w.isPending,"data-testid":"button-send-notification",children:[(0,b.jsx)(bj.Bell,{className:"w-4 h-4 mr-2"}),w.isPending?"Sending...":"Send Notification"]})]})})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Notification History"})}),(0,b.jsx)($.CardContent,{children:g?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Title"}),(0,b.jsx)(_.TableHead,{children:"Target"}),(0,b.jsx)(_.TableHead,{children:"Delivered"}),(0,b.jsx)(_.TableHead,{children:"Opened"}),(0,b.jsx)(_.TableHead,{children:"CTR"}),(0,b.jsx)(_.TableHead,{children:"Sent At"})]})}),(0,b.jsxs)(_.TableBody,{children:[f?.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-medium max-w-xs truncate",children:a.title}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"secondary",children:a.targetType})}),(0,b.jsx)(_.TableCell,{children:a.deliveredCount||0}),(0,b.jsx)(_.TableCell,{children:a.openedCount||0}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"outline",children:[a.ctr||0,"%"]})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.sentAt),{addSuffix:!0})})]},a.id)),(!f||0===f.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No notifications sent yet"})})]})]})})})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"versions",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"App Versions"}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:i?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Version"}),(0,b.jsx)(_.TableHead,{children:"Platform"}),(0,b.jsx)(_.TableHead,{children:"Release Date"}),(0,b.jsx)(_.TableHead,{children:"Users"}),(0,b.jsx)(_.TableHead,{children:"Force Update"})]})}),(0,b.jsxs)(_.TableBody,{children:[h?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`version-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-medium",children:a.version}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"secondary",children:a.platform})}),(0,b.jsx)(_.TableCell,{children:new Date(a.releaseDate).toLocaleDateString()}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"outline",children:[a.userCount||0," users"]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(aZ.Switch,{checked:a.forceUpdate,onCheckedChange:b=>x.mutate({id:a.id,forceUpdate:b}),"data-testid":`switch-force-update-${a.id}`})})]},a.id)),(!h||0===h.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No app versions found"})})]})]})})})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"User Distribution by Version"})}),(0,b.jsx)($.CardContent,{children:k?(0,b.jsx)(p.Skeleton,{className:"h-64"}):j&&j.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:a=>`v${a.version}: ${a.percentage}%`,outerRadius:80,fill:"hsl(var(--primary))",dataKey:"count",children:j.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:bk[c%bk.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"analytics",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Device Analytics"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Device Types"})}),(0,b.jsx)($.CardContent,{children:o?(0,b.jsx)(p.Skeleton,{className:"h-64"}):n&&n.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(aP.PieChart,{children:[(0,b.jsx)(aQ.Pie,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name}: ${a.percentage}%`,outerRadius:80,fill:"hsl(var(--primary))",dataKey:"value",children:n.map((a,c)=>(0,b.jsx)(aR.Cell,{fill:bk[c%bk.length]},`cell-${c}`))}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(aW.Legend,{})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"OS Distribution"})}),(0,b.jsx)($.CardContent,{children:r?(0,b.jsx)(p.Skeleton,{className:"h-64"}):q&&q.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:q,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"name"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"count",fill:"hsl(var(--primary))"})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Browser Distribution"})}),(0,b.jsx)($.CardContent,{children:t?(0,b.jsx)(p.Skeleton,{className:"h-64"}):s&&s.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:s,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"name"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"count",fill:"hsl(var(--primary))"})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Screen Resolutions"})}),(0,b.jsx)($.CardContent,{children:v?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-8"},c))}):u&&u.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Resolution"}),(0,b.jsx)(_.TableHead,{children:"Users"}),(0,b.jsx)(_.TableHead,{children:"Percentage"})]})}),(0,b.jsx)(_.TableBody,{children:u.map((a,c)=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-medium",children:a.resolution}),(0,b.jsx)(_.TableCell,{children:a.count}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:[a.percentage,"%"]})})]},c))})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]})]})]})]})}let bm=(0,h.default)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),bn=(0,h.default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);function bo(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),{data:h,isLoading:i}=(0,Z.useQuery)({queryKey:["/api/admin/performance/system-metrics"]}),{data:j,isLoading:k}=(0,Z.useQuery)({queryKey:["/api/admin/performance/response-time"]}),{data:n,isLoading:o}=(0,Z.useQuery)({queryKey:["/api/admin/performance/throughput"]}),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/performance/alerts"]}),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/performance/alert-history"]}),{data:u,isLoading:v}=(0,Z.useQuery)({queryKey:["/api/admin/performance/slow-queries"]}),{data:w,isLoading:x}=(0,Z.useQuery)({queryKey:["/api/admin/performance/database-metrics"]}),{data:y,isLoading:z}=(0,Z.useQuery)({queryKey:["/api/admin/performance/query-histogram"]}),{data:A,isLoading:B}=(0,Z.useQuery)({queryKey:["/api/admin/performance/cache-stats"]}),{data:C,isLoading:D}=(0,Z.useQuery)({queryKey:["/api/admin/performance/cached-keys"]}),E=(0,an.useMutation)({mutationFn:()=>(0,au.apiRequest)("/api/admin/performance/record-metric","POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/performance/system-metrics"]}),a({title:"Metric recorded"})}}),F=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/performance/alerts","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/performance/alerts"]}),a({title:"Alert threshold configured"}),d(!1)}}),G=(0,an.useMutation)({mutationFn:()=>(0,au.apiRequest)("/api/admin/performance/cache/clear","DELETE"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/performance/cache-stats"]}),au.queryClient.invalidateQueries({queryKey:["/api/admin/performance/cached-keys"]}),a({title:"Cache cleared successfully"}),g(!1)}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Performance Monitor"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"metrics",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"metrics","data-testid":"tab-metrics",children:"Metrics"}),(0,b.jsx)(aA.TabsTrigger,{value:"alerts","data-testid":"tab-alerts",children:"Alerts"}),(0,b.jsx)(aA.TabsTrigger,{value:"database","data-testid":"tab-database",children:"Database Performance"}),(0,b.jsx)(aA.TabsTrigger,{value:"cache","data-testid":"tab-cache",children:"Cache Stats"})]}),(0,b.jsxs)(aA.TabsContent,{value:"metrics",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"System Metrics"}),(0,b.jsxs)(l.Button,{onClick:()=>E.mutate(),disabled:E.isPending,"data-testid":"button-record-metric",children:[(0,b.jsx)(V.Activity,{className:"w-4 h-4 mr-2"}),"Record Metric"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i?[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-cpu",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"CPU Usage"}),(0,b.jsx)(bm,{className:"w-4 h-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-cpu-usage",children:[h?.cpu||0,"%"]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-memory",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Memory Usage"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-memory-usage",children:[h?.memory||0,"%"]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-disk",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Disk I/O"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-disk-io",children:[h?.diskIO||0," MB/s"]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-network",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Network"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-network",children:[h?.network||0," MB/s"]})})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Response Time (Last 24 Hours)"})}),(0,b.jsx)($.CardContent,{children:k?(0,b.jsx)(p.Skeleton,{className:"h-64"}):j&&j.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:j,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"time"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"responseTime",stroke:"hsl(var(--primary))",strokeWidth:2})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Throughput (Requests/Second)"})}),(0,b.jsx)($.CardContent,{children:o?(0,b.jsx)(p.Skeleton,{className:"h-64"}):n&&n.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ac.LineChart,{data:n,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"time"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(ad.Line,{type:"monotone",dataKey:"rps",stroke:"hsl(var(--primary))",strokeWidth:2})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"alerts",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Performance Alerts"}),(0,b.jsxs)(ap.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-configure-alert",children:"Configure Alert"})}),(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Configure Alert Threshold"})}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget);F.mutate({metricType:b.get("metricType"),threshold:parseFloat(b.get("threshold")),condition:b.get("condition")})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"metricType",children:"Metric Type"}),(0,b.jsx)(m.Input,{id:"metricType",name:"metricType",required:!0,"data-testid":"input-metric-type"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"threshold",children:"Threshold Value"}),(0,b.jsx)(m.Input,{id:"threshold",name:"threshold",type:"number",step:"0.01",required:!0,"data-testid":"input-threshold"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"condition",children:"Condition"}),(0,b.jsx)(m.Input,{id:"condition",name:"condition",placeholder:"e.g., greater than",required:!0,"data-testid":"input-condition"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:F.isPending,"data-testid":"button-submit-alert",children:F.isPending?"Configuring...":"Configure Alert"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:r?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Metric"}),(0,b.jsx)(_.TableHead,{children:"Condition"}),(0,b.jsx)(_.TableHead,{children:"Threshold"}),(0,b.jsx)(_.TableHead,{children:"Current Value"}),(0,b.jsx)(_.TableHead,{children:"Status"})]})}),(0,b.jsxs)(_.TableBody,{children:[q?.map(a=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-medium",children:a.metricType}),(0,b.jsx)(_.TableCell,{children:a.condition}),(0,b.jsx)(_.TableCell,{children:a.threshold}),(0,b.jsx)(_.TableCell,{children:a.currentValue}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:a.triggered?"destructive":"default",children:a.triggered?"Triggered":"OK"})})]},a.id)),(!q||0===q.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No alerts configured"})})]})]})})})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Alert History"})}),(0,b.jsx)($.CardContent,{children:t?(0,b.jsx)(p.Skeleton,{className:"h-64"}):s&&s.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:s,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"date"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"count",fill:"hsl(var(--destructive))"})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No alert history"})})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"database",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Database Performance"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:x?[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-query-time",children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Avg Query Time"}),(0,b.jsx)(bn,{className:"w-4 h-4 text-muted-foreground"})]}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-query-time",children:[w?.avgQueryTime||0,"ms"]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-connections",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Active Connections"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-connections",children:[w?.activeConnections||0," / ",w?.maxConnections||0]})})]}),(0,b.jsxs)($.Card,{"data-testid":"card-pool-usage",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Pool Usage"})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-pool-usage",children:[w?.poolUsage||0,"%"]})})]})]})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Slow Queries"})}),(0,b.jsx)($.CardContent,{children:v?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Query"}),(0,b.jsx)(_.TableHead,{children:"Execution Time"}),(0,b.jsx)(_.TableHead,{children:"Calls"}),(0,b.jsx)(_.TableHead,{children:"Last Run"})]})}),(0,b.jsxs)(_.TableBody,{children:[u?.map((a,c)=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-mono text-xs max-w-md truncate",children:a.query}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"destructive",children:[a.executionTime,"ms"]})}),(0,b.jsx)(_.TableCell,{children:a.callCount}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.lastRun),{addSuffix:!0})})]},c)),(!u||0===u.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No slow queries detected"})})]})]})})})]}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Query Execution Time Histogram"})}),(0,b.jsx)($.CardContent,{children:z?(0,b.jsx)(p.Skeleton,{className:"h-64"}):y&&y.length>0?(0,b.jsx)(ak.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(ae.BarChart,{data:y,children:[(0,b.jsx)(ai.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(ag.XAxis,{dataKey:"range"}),(0,b.jsx)(ah.YAxis,{}),(0,b.jsx)(aj.Tooltip,{}),(0,b.jsx)(af.Bar,{dataKey:"count",fill:"hsl(var(--primary))"})]})}):(0,b.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]}),(0,b.jsxs)(aA.TabsContent,{value:"cache",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Cache Statistics"}),(0,b.jsxs)(l.Button,{variant:"destructive",onClick:()=>g(!0),"data-testid":"button-clear-cache",children:[(0,b.jsx)(ay.Trash2,{className:"w-4 h-4 mr-2"}),"Clear Cache"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B?[void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-32"},c)):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)($.Card,{"data-testid":"card-hit-rate",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Cache Hit Rate"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-hit-rate",children:[A?.hitRate||0,"%"]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A?.hits||0," hits / ",A?.misses||0," misses"]})]})]}),(0,b.jsxs)($.Card,{"data-testid":"card-cache-size",children:[(0,b.jsx)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Cache Size"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold","data-testid":"text-cache-size",children:[A?.size||0," MB"]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[A?.keyCount||0," keys stored"]})]})]})]})}),(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Most Cached Keys"})}),(0,b.jsx)($.CardContent,{children:D?(0,b.jsx)("div",{className:"space-y-2",children:[...Array(10)].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Key"}),(0,b.jsx)(_.TableHead,{children:"Hits"}),(0,b.jsx)(_.TableHead,{children:"Size"}),(0,b.jsx)(_.TableHead,{children:"TTL"})]})}),(0,b.jsxs)(_.TableBody,{children:[C?.map((a,c)=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-mono text-xs max-w-md truncate",children:a.key}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"secondary",children:a.hits})}),(0,b.jsxs)(_.TableCell,{children:[a.size," KB"]}),(0,b.jsxs)(_.TableCell,{children:[a.ttl,"s"]})]},c)),(!C||0===C.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No cached keys"})})]})]})})})]}),(0,b.jsx)(bd.AlertDialog,{open:f,onOpenChange:g,children:(0,b.jsxs)(bd.AlertDialogContent,{children:[(0,b.jsxs)(bd.AlertDialogHeader,{children:[(0,b.jsx)(bd.AlertDialogTitle,{children:"Clear Cache"}),(0,b.jsx)(bd.AlertDialogDescription,{children:"Are you sure you want to clear all cached data? This may temporarily impact performance."})]}),(0,b.jsxs)(bd.AlertDialogFooter,{children:[(0,b.jsx)(bd.AlertDialogCancel,{"data-testid":"button-cancel-clear",children:"Cancel"}),(0,b.jsx)(bd.AlertDialogAction,{onClick:()=>G.mutate(),"data-testid":"button-confirm-clear",children:"Clear Cache"})]})]})})]})]})]})}var bp=a.i(73320),bq=a.i(38632);let br=(0,h.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function bs(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(""),[f,g]=(0,e.useState)("all"),[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(null),[n,o]=(0,e.useState)(null),[q,r]=(0,e.useState)(""),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(null),{data:y,isLoading:z}=(0,Z.useQuery)({queryKey:["/api/admin/content-studio/media",c,f]}),{data:A,isLoading:B}=(0,Z.useQuery)({queryKey:["/api/admin/content-studio/revisions",q,s],enabled:!!q&&!!s}),C=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/content-studio/media/upload","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content-studio/media"]}),a({title:"Media uploaded successfully"})}}),D=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/content-studio/media/${a.id}`,"PATCH",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content-studio/media"]}),a({title:"Media updated successfully"}),i(!1)}}),E=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/content-studio/media/${a}`,"DELETE"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content-studio/media"]}),a({title:"Media deleted successfully"}),k(null)}}),F=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/content-studio/revisions/${a}/restore`,"POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/content-studio/revisions"]}),a({title:"Revision restored successfully"}),v(!1)}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Content Studio"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"media",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"media","data-testid":"tab-media",children:"Media Library"}),(0,b.jsx)(aA.TabsTrigger,{value:"revisions","data-testid":"tab-revisions",children:"Content Revisions"})]}),(0,b.jsxs)(aA.TabsContent,{value:"media",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Media Library"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(m.Input,{placeholder:"Search files...",value:c,onChange:a=>d(a.target.value),className:"w-64","data-testid":"input-search-media"}),(0,b.jsxs)(ao.Select,{value:f,onValueChange:g,children:[(0,b.jsx)(ao.SelectTrigger,{className:"w-40","data-testid":"select-file-type",children:(0,b.jsx)(ao.SelectValue,{})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(ao.SelectItem,{value:"images",children:"Images"}),(0,b.jsx)(ao.SelectItem,{value:"documents",children:"Documents"}),(0,b.jsx)(ao.SelectItem,{value:"videos",children:"Videos"})]})]}),(0,b.jsx)(l.Button,{asChild:!0,"data-testid":"button-upload-media",children:(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsx)(bp.Upload,{className:"w-4 h-4 mr-2"}),"Upload File",(0,b.jsx)("input",{type:"file",className:"hidden",onChange:a=>{let b=a.target.files?.[0];if(b){let a=new FormData;a.append("file",b),C.mutate(a)}},accept:"image/*,video/*,.pdf,.doc,.docx"})]})})]})]}),z?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-64"},c))}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[y?.map(a=>{var c;return(0,b.jsxs)($.Card,{"data-testid":`media-card-${a.id}`,children:[(0,b.jsx)($.CardHeader,{className:"p-0",children:(0,b.jsx)("div",{className:"aspect-video bg-muted rounded-t-lg flex items-center justify-center overflow-hidden",children:a.type?.startsWith("image/")?(0,b.jsx)("img",{src:a.url,alt:a.altText||a.filename,className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(c=a.type).startsWith("image/")?(0,b.jsx)(bq.Image,{className:"w-4 h-4"}):c.startsWith("video/")?(0,b.jsx)(br,{className:"w-4 h-4"}):(0,b.jsx)(G.FileText,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs",children:a.type})]})})}),(0,b.jsxs)($.CardContent,{className:"pt-4 space-y-2",children:[(0,b.jsx)("div",{className:"font-medium truncate","data-testid":`media-filename-${a.id}`,children:a.filename}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.tags?.map((a,c)=>(0,b.jsx)(al.Badge,{variant:"secondary",className:"text-xs",children:a},c))}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Used ",a.usageCount||0," times"]})]}),(0,b.jsxs)($.CardFooter,{className:"flex justify-between gap-2",children:[(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>{o(a),i(!0)},"data-testid":`button-edit-media-${a.id}`,children:"Edit"}),(0,b.jsx)(l.Button,{size:"sm",variant:"destructive",onClick:()=>k(a.id),"data-testid":`button-delete-media-${a.id}`,children:(0,b.jsx)(ay.Trash2,{className:"w-3 h-3"})})]})]},a.id)}),(!y||0===y.length)&&(0,b.jsx)("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:"No media files found"})]}),(0,b.jsx)(ap.Dialog,{open:h,onOpenChange:i,children:(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Edit Media"})}),n&&(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget),c=b.get("tags").split(",").map(a=>a.trim()).filter(Boolean);D.mutate({id:n.id,altText:b.get("altText"),tags:c})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"altText",children:"Alt Text"}),(0,b.jsx)(m.Input,{id:"altText",name:"altText",defaultValue:n.altText,"data-testid":"input-alt-text"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"tags",children:"Tags (comma-separated)"}),(0,b.jsx)(m.Input,{id:"tags",name:"tags",defaultValue:n.tags?.join(", "),placeholder:"tag1, tag2, tag3","data-testid":"input-tags"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:D.isPending,"data-testid":"button-save-media",children:D.isPending?"Saving...":"Save Changes"})})]})]})}),(0,b.jsx)(bd.AlertDialog,{open:!!j,onOpenChange:a=>!a&&k(null),children:(0,b.jsxs)(bd.AlertDialogContent,{children:[(0,b.jsxs)(bd.AlertDialogHeader,{children:[(0,b.jsx)(bd.AlertDialogTitle,{children:"Delete Media"}),(0,b.jsx)(bd.AlertDialogDescription,{children:"Are you sure you want to delete this media file? This action cannot be undone."})]}),(0,b.jsxs)(bd.AlertDialogFooter,{children:[(0,b.jsx)(bd.AlertDialogCancel,{"data-testid":"button-cancel-delete",children:"Cancel"}),(0,b.jsx)(bd.AlertDialogAction,{onClick:()=>j&&E.mutate(j),"data-testid":"button-confirm-delete",children:"Delete"})]})]})})]}),(0,b.jsxs)(aA.TabsContent,{value:"revisions",className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Content Revisions"}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"pt-6 space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"contentType",children:"Content Type"}),(0,b.jsxs)(ao.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(ao.SelectTrigger,{"data-testid":"select-content-type",children:(0,b.jsx)(ao.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(ao.SelectContent,{children:[(0,b.jsx)(ao.SelectItem,{value:"thread",children:"Thread"}),(0,b.jsx)(ao.SelectItem,{value:"comment",children:"Comment"}),(0,b.jsx)(ao.SelectItem,{value:"content",children:"Content"}),(0,b.jsx)(ao.SelectItem,{value:"user",children:"User Profile"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"contentId",children:"Content ID"}),(0,b.jsx)(m.Input,{id:"contentId",value:s,onChange:a=>t(a.target.value),placeholder:"Enter content ID","data-testid":"input-content-id"})]})]})})}),q&&s&&(0,b.jsxs)($.Card,{children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsx)($.CardTitle,{children:"Revision History"})}),(0,b.jsx)($.CardContent,{children:B?(0,b.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Revision #"}),(0,b.jsx)(_.TableHead,{children:"Changed By"}),(0,b.jsx)(_.TableHead,{children:"Changed Fields"}),(0,b.jsx)(_.TableHead,{children:"Timestamp"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[A?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`revision-${a.id}`,children:[(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:["#",a.revisionNumber]})}),(0,b.jsx)(_.TableCell,{children:a.changedBy}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.changedFields?.map((a,c)=>(0,b.jsx)(al.Badge,{variant:"outline",className:"text-xs",children:a},c))})}),(0,b.jsx)(_.TableCell,{children:(0,ab.formatDistanceToNow)(new Date(a.timestamp),{addSuffix:!0})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline","data-testid":`button-view-diff-${a.id}`,children:[(0,b.jsx)(az.Eye,{className:"w-3 h-3 mr-1"}),"View Diff"]}),(0,b.jsx)(l.Button,{size:"sm",variant:"default",onClick:()=>{x(a),v(!0)},"data-testid":`button-restore-${a.id}`,children:"Restore"})]})})]},a.id)),(!A||0===A.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No revisions found"})})]})]})})})]}),(0,b.jsx)(bd.AlertDialog,{open:u,onOpenChange:v,children:(0,b.jsxs)(bd.AlertDialogContent,{children:[(0,b.jsxs)(bd.AlertDialogHeader,{children:[(0,b.jsx)(bd.AlertDialogTitle,{children:"Restore Revision"}),(0,b.jsxs)(bd.AlertDialogDescription,{children:["Are you sure you want to restore this revision? This will overwrite the current content with revision #",w?.revisionNumber,"."]})]}),(0,b.jsxs)(bd.AlertDialogFooter,{children:[(0,b.jsx)(bd.AlertDialogCancel,{"data-testid":"button-cancel-restore",children:"Cancel"}),(0,b.jsx)(bd.AlertDialogAction,{onClick:()=>w&&F.mutate(w.id),"data-testid":"button-confirm-restore",children:"Restore"})]})]})})]})]})]})}let bt=(0,h.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function bu(){let{toast:a}=(0,aq.useToast)(),[c,d]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(null),[n,o]=(0,e.useState)([0]),{data:q,isLoading:r}=(0,Z.useQuery)({queryKey:["/api/admin/testing/ab-tests"]}),{data:s,isLoading:t}=(0,Z.useQuery)({queryKey:["/api/admin/testing/feature-flags"]}),u=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/testing/ab-tests","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/ab-tests"]}),a({title:"A/B test created successfully"}),d(!1)}}),v=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/testing/ab-tests/${a}/start`,"POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/ab-tests"]}),a({title:"Test started"})}}),w=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)(`/api/admin/testing/ab-tests/${a}/stop`,"POST"),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/ab-tests"]}),a({title:"Test stopped"})}}),x=(0,an.useMutation)({mutationFn:({testId:a,variantId:b})=>(0,au.apiRequest)(`/api/admin/testing/ab-tests/${a}/winner`,"POST",{variantId:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/ab-tests"]}),a({title:"Winner declared"})}}),y=(0,an.useMutation)({mutationFn:a=>(0,au.apiRequest)("/api/admin/testing/feature-flags","POST",a),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/feature-flags"]}),a({title:"Feature flag created successfully"}),g(!1)}}),z=(0,an.useMutation)({mutationFn:({id:a,enabled:b})=>(0,au.apiRequest)(`/api/admin/testing/feature-flags/${a}/toggle`,"PATCH",{enabled:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/feature-flags"]}),a({title:"Feature flag updated"})}}),A=(0,an.useMutation)({mutationFn:({id:a,rollout:b})=>(0,au.apiRequest)(`/api/admin/testing/feature-flags/${a}/rollout`,"PATCH",{rollout:b}),onSuccess:()=>{au.queryClient.invalidateQueries({queryKey:["/api/admin/testing/feature-flags"]}),a({title:"Rollout percentage updated"}),i(!1)}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Testing & Experiments"}),(0,b.jsxs)(aA.Tabs,{defaultValue:"ab-tests",className:"space-y-4",children:[(0,b.jsxs)(aA.TabsList,{children:[(0,b.jsx)(aA.TabsTrigger,{value:"ab-tests","data-testid":"tab-ab-tests",children:"A/B Tests"}),(0,b.jsx)(aA.TabsTrigger,{value:"feature-flags","data-testid":"tab-feature-flags",children:"Feature Flags"})]}),(0,b.jsxs)(aA.TabsContent,{value:"ab-tests",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"A/B Tests"}),(0,b.jsxs)(ap.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-test",children:"Create A/B Test"})}),(0,b.jsxs)(ap.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create A/B Test"})}),(0,b.jsxs)("form",{onSubmit:b=>{b.preventDefault();let c=new FormData(b.currentTarget),d=c.get("variants"),e=c.get("trafficAllocation");try{let a=JSON.parse(d),b=JSON.parse(e);u.mutate({name:c.get("name"),description:c.get("description"),variants:a,trafficAllocation:b})}catch(b){a({title:"Invalid JSON format",variant:"destructive"})}},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"test-name",children:"Test Name"}),(0,b.jsx)(m.Input,{id:"test-name",name:"name",required:!0,"data-testid":"input-test-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"test-description",children:"Description"}),(0,b.jsx)(aG.Textarea,{id:"test-description",name:"description",required:!0,"data-testid":"textarea-test-description"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"variants",children:"Variants (JSON Array)"}),(0,b.jsx)(aG.Textarea,{id:"variants",name:"variants",placeholder:'[{"id": "A", "name": "Control"}, {"id": "B", "name": "Variant B"}]',className:"font-mono text-sm",rows:3,required:!0,"data-testid":"textarea-variants"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"trafficAllocation",children:"Traffic Allocation (JSON Object)"}),(0,b.jsx)(aG.Textarea,{id:"trafficAllocation",name:"trafficAllocation",placeholder:'{"A": 50, "B": 50}',className:"font-mono text-sm",rows:2,required:!0,"data-testid":"textarea-traffic-allocation"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Percentages should add up to 100"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:u.isPending,"data-testid":"button-submit-test",children:u.isPending?"Creating...":"Create Test"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:r?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Status"}),(0,b.jsx)(_.TableHead,{children:"Variants"}),(0,b.jsx)(_.TableHead,{children:"Traffic"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[q?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`test-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-medium","data-testid":`test-name-${a.id}`,children:a.name}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(al.Badge,{variant:"running"===a.status?"default":"completed"===a.status?"secondary":"outline",children:a.status})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.variants?.map(a=>(0,b.jsx)(al.Badge,{variant:"outline",className:"text-xs",children:a.name},a.id))})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)("div",{className:"text-xs",children:Object.entries(a.trafficAllocation||{}).map(([a,c])=>(0,b.jsxs)("div",{children:[a,": ",c,"%"]},a))})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:["draft"===a.status&&(0,b.jsxs)(l.Button,{size:"sm",variant:"default",onClick:()=>v.mutate(a.id),disabled:v.isPending,"data-testid":`button-start-${a.id}`,children:[(0,b.jsx)(a7,{className:"w-3 h-3 mr-1"}),"Start"]}),"running"===a.status&&(0,b.jsxs)(l.Button,{size:"sm",variant:"destructive",onClick:()=>w.mutate(a.id),disabled:w.isPending,"data-testid":`button-stop-${a.id}`,children:[(0,b.jsx)(bt,{className:"w-3 h-3 mr-1"}),"Stop"]})]})})]},a.id)),(!q||0===q.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No A/B tests created"})})]})]})})})}),q?.filter(a=>"running"===a.status||"completed"===a.status).map(a=>(0,b.jsxs)($.Card,{children:[(0,b.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between gap-2",children:[(0,b.jsxs)($.CardTitle,{children:["Results: ",a.name]}),"completed"===a.status&&a.winner&&(0,b.jsxs)(al.Badge,{variant:"default",children:[(0,b.jsx)(R.Trophy,{className:"w-3 h-3 mr-1"}),"Winner: ",a.winner]})]}),(0,b.jsx)($.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Variant"}),(0,b.jsx)(_.TableHead,{children:"Impressions"}),(0,b.jsx)(_.TableHead,{children:"Conversions"}),(0,b.jsx)(_.TableHead,{children:"Conversion Rate"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsx)(_.TableBody,{children:a.results?.map(c=>(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableCell,{className:"font-medium",children:c.variantName}),(0,b.jsx)(_.TableCell,{children:c.impressions}),(0,b.jsx)(_.TableCell,{children:c.conversions}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:[c.conversionRate,"%"]})}),(0,b.jsx)(_.TableCell,{children:"running"===a.status&&!a.winner&&(0,b.jsx)(l.Button,{size:"sm",variant:"default",onClick:()=>x.mutate({testId:a.id,variantId:c.variantId}),disabled:x.isPending,"data-testid":`button-declare-winner-${c.variantId}`,children:"Declare Winner"})})]},c.variantId))})]})})})]},`results-${a.id}`))]}),(0,b.jsxs)(aA.TabsContent,{value:"feature-flags",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Feature Flags"}),(0,b.jsxs)(ap.Dialog,{open:f,onOpenChange:g,children:[(0,b.jsx)(ap.DialogTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{"data-testid":"button-create-flag",children:"Create Feature Flag"})}),(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Create Feature Flag"})}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=new FormData(a.currentTarget),c=b.get("targetUsers").split(",").map(a=>a.trim()).filter(Boolean);y.mutate({key:b.get("key"),name:b.get("name"),description:b.get("description"),enabled:!1,rollout:0,targetUsers:c})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"flag-key",children:"Flag Key"}),(0,b.jsx)(m.Input,{id:"flag-key",name:"key",placeholder:"new_feature_enabled",required:!0,"data-testid":"input-flag-key"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"flag-name",children:"Flag Name"}),(0,b.jsx)(m.Input,{id:"flag-name",name:"name",required:!0,"data-testid":"input-flag-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"flag-description",children:"Description"}),(0,b.jsx)(aG.Textarea,{id:"flag-description",name:"description","data-testid":"textarea-flag-description"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(a_.Label,{htmlFor:"targetUsers",children:"Target Users (comma-separated IDs, optional)"}),(0,b.jsx)(aG.Textarea,{id:"targetUsers",name:"targetUsers",placeholder:"user-123, user-456","data-testid":"textarea-target-users"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{type:"submit",disabled:y.isPending,"data-testid":"button-submit-flag",children:y.isPending?"Creating...":"Create Flag"})})]})]})]})]}),(0,b.jsx)($.Card,{children:(0,b.jsx)($.CardContent,{className:"p-0",children:t?(0,b.jsx)("div",{className:"p-4 space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(p.Skeleton,{className:"h-12"},c))}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(_.Table,{children:[(0,b.jsx)(_.TableHeader,{children:(0,b.jsxs)(_.TableRow,{children:[(0,b.jsx)(_.TableHead,{children:"Flag Key"}),(0,b.jsx)(_.TableHead,{children:"Name"}),(0,b.jsx)(_.TableHead,{children:"Enabled"}),(0,b.jsx)(_.TableHead,{children:"Rollout %"}),(0,b.jsx)(_.TableHead,{children:"Target Users"}),(0,b.jsx)(_.TableHead,{children:"Actions"})]})}),(0,b.jsxs)(_.TableBody,{children:[s?.map(a=>(0,b.jsxs)(_.TableRow,{"data-testid":`flag-${a.id}`,children:[(0,b.jsx)(_.TableCell,{className:"font-mono text-sm","data-testid":`flag-key-${a.id}`,children:a.key}),(0,b.jsx)(_.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(aZ.Switch,{checked:a.enabled,onCheckedChange:b=>z.mutate({id:a.id,enabled:b}),"data-testid":`switch-flag-${a.id}`})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"secondary",children:[a.rollout||0,"%"]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsxs)(al.Badge,{variant:"outline",children:[a.targetUsers?.length||0," users"]})}),(0,b.jsx)(_.TableCell,{children:(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>{k(a),o([a.rollout||0]),i(!0)},"data-testid":`button-rollout-${a.id}`,children:"Adjust Rollout"})})]},a.id)),(!s||0===s.length)&&(0,b.jsx)(_.TableRow,{children:(0,b.jsx)(_.TableCell,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No feature flags created"})})]})]})})})}),(0,b.jsx)(ap.Dialog,{open:h,onOpenChange:i,children:(0,b.jsxs)(ap.DialogContent,{children:[(0,b.jsx)(ap.DialogHeader,{children:(0,b.jsx)(ap.DialogTitle,{children:"Adjust Rollout Percentage"})}),j&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(a_.Label,{children:["Rollout: ",n[0],"%"]}),(0,b.jsx)(a$.Slider,{value:n,onValueChange:o,max:100,step:1,"data-testid":"slider-rollout"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Percentage of users who will see this feature"})]}),(0,b.jsx)(ap.DialogFooter,{children:(0,b.jsx)(l.Button,{onClick:()=>A.mutate({id:j.id,rollout:n[0]}),disabled:A.isPending,"data-testid":"button-save-rollout",children:A.isPending?"Saving...":"Save"})})]})]})})]})]})]})}let bv=[{id:"overview",icon:E.BarChart3,label:"Overview",path:"/admin"},{id:"users",icon:F.Users,label:"Users",path:"/admin/users"},{id:"content",icon:G.FileText,label:"Content",path:"/admin/content"},{id:"marketplace",icon:H.Store,label:"Marketplace",path:"/admin/marketplace"},{id:"brokers",icon:I,label:"Brokers",path:"/admin/brokers"},{id:"finance",icon:J.DollarSign,label:"Finance",path:"/admin/finance"},{id:"analytics",icon:K.TrendingUp,label:"Analytics",path:"/admin/analytics"},{id:"ai-automation",icon:Q,label:"AI & Automation",path:"/admin/ai-automation"},{id:"gamification",icon:R.Trophy,label:"Gamification",path:"/admin/gamification"},{id:"seo-marketing",icon:S.Search,label:"SEO & Marketing",path:"/admin/seo-marketing"},{id:"integrations",icon:T.Zap,label:"API & Integrations",path:"/admin/integrations"},{id:"mobile",icon:U.Smartphone,label:"Mobile & Push",path:"/admin/mobile"},{id:"performance",icon:V.Activity,label:"Performance",path:"/admin/performance"},{id:"content-studio",icon:W.Folder,label:"Content Studio",path:"/admin/content-studio"},{id:"testing",icon:X,label:"Testing",path:"/admin/testing"},{id:"settings",icon:L.Settings,label:"Settings",path:"/admin/settings"},{id:"security",icon:M.Shield,label:"Security",path:"/admin/security"},{id:"communications",icon:N.Mail,label:"Communications",path:"/admin/communications"},{id:"support",icon:O.HelpCircle,label:"Support",path:"/admin/support"},{id:"logs",icon:P,label:"Audit Logs",path:"/admin/logs"}];function bw(){let a=(0,d.usePathname)();return(0,b.jsx)(u,{children:(0,b.jsx)(w,{children:(0,b.jsxs)(x,{children:[(0,b.jsx)(y,{children:"Admin Dashboard"}),(0,b.jsx)(z,{children:(0,b.jsx)(A,{children:bv.map(d=>{let e=a===d.path;return(0,b.jsx)(B,{children:(0,b.jsx)(D,{asChild:!0,isActive:e,children:(0,b.jsxs)(c.default,{href:d.path,"data-testid":`nav-${d.id}`,children:[(0,b.jsx)(d.icon,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:d.label})]})})},d.id)})})})]})})})}function bx(){let a=(0,d.usePathname)();return(0,b.jsx)(t,{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"},children:(0,b.jsxs)("div",{className:"flex h-screen w-full",children:[(0,b.jsx)(bw,{}),(0,b.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,b.jsxs)("header",{className:"flex items-center justify-between p-4 border-b gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(v,{"data-testid":"button-sidebar-toggle"}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"})]}),(0,b.jsx)(Y.ThemeToggle,{})]}),(0,b.jsx)("main",{className:"flex-1 overflow-auto p-6",children:(()=>{switch(a){case"/admin/users":return(0,b.jsx)(av,{});case"/admin/content":return(0,b.jsx)(aB,{});case"/admin/marketplace":return(0,b.jsx)(aM,{});case"/admin/brokers":return(0,b.jsx)(aN,{});case"/admin/finance":return(0,b.jsx)(aT,{});case"/admin/analytics":return(0,b.jsx)(aY,{});case"/admin/ai-automation":return(0,b.jsx)(a8,{});case"/admin/gamification":return(0,b.jsx)(ba,{});case"/admin/seo-marketing":return(0,b.jsx)(bc,{});case"/admin/integrations":return(0,b.jsx)(bi,{});case"/admin/mobile":return(0,b.jsx)(bl,{});case"/admin/performance":return(0,b.jsx)(bo,{});case"/admin/content-studio":return(0,b.jsx)(bs,{});case"/admin/testing":return(0,b.jsx)(bu,{});case"/admin/settings":return(0,b.jsx)(a0,{});case"/admin/security":return(0,b.jsx)(a1,{});case"/admin/communications":return(0,b.jsx)(a3,{});case"/admin/support":return(0,b.jsx)(a4,{});case"/admin/logs":return(0,b.jsx)(a6,{});default:return(0,b.jsx)(am,{})}})()})]})]})})}a.s(["AdminDashboardClient",()=>bx],1238)}];

//# sourceMappingURL=app_admin_AdminDashboardClient_tsx_b65f2f43._.js.map