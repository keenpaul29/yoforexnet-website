module.exports=[655827,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(695245),e=a.i(159501),f=a.i(336570),g=a.i(564690),h=a.i(110132),i=a.i(206893),j=a.i(991868),k=a.i(959162),l=a.i(397799),m=a.i(27311),n=a.i(561792),o=a.i(853390),p=a.i(139392),q=/[\\\/_+.#"@\[\(\{&]/,r=/[\\\/_+.#"@\[\(\{&]/g,s=/[\s-]/,t=/[\s-]/g;function u(a){return a.toLowerCase().replace(t," ")}var v=a.i(897942),w=a.i(30553),x=a.i(392843),y=a.i(470121),z='[cmdk-group=""]',A='[cmdk-group-items=""]',B='[cmdk-item=""]',C=`${B}:not([aria-disabled="true"])`,D="cmdk-item-select",E="data-value",F=(a,b,c)=>{var d;return d=a,function a(b,c,d,e,f,g,h){if(g===c.length)return f===b.length?1:.99;var i=`${f},${g}`;if(void 0!==h[i])return h[i];for(var j,k,l,m,n=e.charAt(g),o=d.indexOf(n,f),p=0;o>=0;)(j=a(b,c,d,e,o+1,g+1,h))>p&&(o===f?j*=1:q.test(b.charAt(o-1))?(j*=.8,(l=b.slice(f,o-1).match(r))&&f>0&&(j*=Math.pow(.999,l.length))):s.test(b.charAt(o-1))?(j*=.9,(m=b.slice(f,o-1).match(t))&&f>0&&(j*=Math.pow(.999,m.length))):(j*=.17,f>0&&(j*=Math.pow(.999,o-f))),b.charAt(o)!==c.charAt(g)&&(j*=.9999)),(j<.1&&d.charAt(o-1)===e.charAt(g+1)||e.charAt(g+1)===e.charAt(g)&&d.charAt(o-1)!==e.charAt(g))&&.1*(k=a(b,c,d,e,o+1,g+2,h))>j&&(j=.1*k),j>p&&(p=j),o=d.indexOf(n,o+1);return h[i]=p,p}(d=c&&c.length>0?`${d+" "+c.join(" ")}`:d,b,u(d),u(b),0,0,{})},G=c.createContext(void 0),H=c.createContext(void 0),I=c.createContext(void 0),J=c.forwardRef((a,b)=>{let d=T(()=>{var b,c;return{search:"",value:null!=(c=null!=(b=a.value)?b:a.defaultValue)?c:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),e=T(()=>new Set),f=T(()=>new Map),g=T(()=>new Map),h=T(()=>new Set),i=R(a),{label:j,children:k,value:l,onValueChange:m,filter:n,shouldFilter:o,loop:p,disablePointerSelection:q=!1,vimBindings:r=!0,...s}=a,t=(0,x.useId)(),u=(0,x.useId)(),v=(0,x.useId)(),y=c.useRef(null),I=W();S(()=>{if(void 0!==l){let a=l.trim();d.current.value=a,J.emit()}},[l]),S(()=>{I(6,P)},[]);let J=c.useMemo(()=>({subscribe:a=>(h.current.add(a),()=>h.current.delete(a)),snapshot:()=>d.current,setState:(a,b,c)=>{var e,f,g,h;if(!Object.is(d.current[a],b)){if(d.current[a]=b,"search"===a)O(),M(),I(1,N);else if("value"===a){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let a=document.getElementById(v);a?a.focus():null==(e=document.getElementById(t))||e.focus()}if(I(7,()=>{var a;d.current.selectedItemId=null==(a=Q())?void 0:a.id,J.emit()}),c||I(5,P),(null==(f=i.current)?void 0:f.value)!==void 0){null==(h=(g=i.current).onValueChange)||h.call(g,null!=b?b:"");return}}J.emit()}},emit:()=>{h.current.forEach(a=>a())}}),[]),K=c.useMemo(()=>({value:(a,b,c)=>{var e;b!==(null==(e=g.current.get(a))?void 0:e.value)&&(g.current.set(a,{value:b,keywords:c}),d.current.filtered.items.set(a,L(b,c)),I(2,()=>{M(),J.emit()}))},item:(a,b)=>(e.current.add(a),b&&(f.current.has(b)?f.current.get(b).add(a):f.current.set(b,new Set([a]))),I(3,()=>{O(),M(),d.current.value||N(),J.emit()}),()=>{g.current.delete(a),e.current.delete(a),d.current.filtered.items.delete(a);let b=Q();I(4,()=>{O(),(null==b?void 0:b.getAttribute("id"))===a&&N(),J.emit()})}),group:a=>(f.current.has(a)||f.current.set(a,new Set),()=>{g.current.delete(a),f.current.delete(a)}),filter:()=>i.current.shouldFilter,label:j||a["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:t,inputId:v,labelId:u,listInnerRef:y}),[]);function L(a,b){var c,e;let f=null!=(e=null==(c=i.current)?void 0:c.filter)?e:F;return a?f(a,d.current.search,b):0}function M(){if(!d.current.search||!1===i.current.shouldFilter)return;let a=d.current.filtered.items,b=[];d.current.filtered.groups.forEach(c=>{let d=f.current.get(c),e=0;d.forEach(b=>{e=Math.max(a.get(b),e)}),b.push([c,e])});let c=y.current;U().sort((b,c)=>{var d,e;let f=b.getAttribute("id"),g=c.getAttribute("id");return(null!=(d=a.get(g))?d:0)-(null!=(e=a.get(f))?e:0)}).forEach(a=>{let b=a.closest(A);b?b.appendChild(a.parentElement===b?a:a.closest(`${A} > *`)):c.appendChild(a.parentElement===c?a:a.closest(`${A} > *`))}),b.sort((a,b)=>b[1]-a[1]).forEach(a=>{var b;let c=null==(b=y.current)?void 0:b.querySelector(`${z}[${E}="${encodeURIComponent(a[0])}"]`);null==c||c.parentElement.appendChild(c)})}function N(){let a=U().find(a=>"true"!==a.getAttribute("aria-disabled")),b=null==a?void 0:a.getAttribute(E);J.setState("value",b||void 0)}function O(){var a,b,c,h;if(!d.current.search||!1===i.current.shouldFilter){d.current.filtered.count=e.current.size;return}d.current.filtered.groups=new Set;let j=0;for(let f of e.current){let e=L(null!=(b=null==(a=g.current.get(f))?void 0:a.value)?b:"",null!=(h=null==(c=g.current.get(f))?void 0:c.keywords)?h:[]);d.current.filtered.items.set(f,e),e>0&&j++}for(let[a,b]of f.current)for(let c of b)if(d.current.filtered.items.get(c)>0){d.current.filtered.groups.add(a);break}d.current.filtered.count=j}function P(){var a,b,c;let d=Q();d&&((null==(a=d.parentElement)?void 0:a.firstChild)===d&&(null==(c=null==(b=d.closest(z))?void 0:b.querySelector('[cmdk-group-heading=""]'))||c.scrollIntoView({block:"nearest"})),d.scrollIntoView({block:"nearest"}))}function Q(){var a;return null==(a=y.current)?void 0:a.querySelector(`${B}[aria-selected="true"]`)}function U(){var a;return Array.from((null==(a=y.current)?void 0:a.querySelectorAll(C))||[])}function V(a){let b=U()[a];b&&J.setState("value",b.getAttribute(E))}function Z(a){var b;let c=Q(),d=U(),e=d.findIndex(a=>a===c),f=d[e+a];null!=(b=i.current)&&b.loop&&(f=e+a<0?d[d.length-1]:e+a===d.length?d[0]:d[e+a]),f&&J.setState("value",f.getAttribute(E))}function $(a){let b=Q(),c=null==b?void 0:b.closest(z),d;for(;c&&!d;)d=null==(c=a>0?function(a,b){let c=a.nextElementSibling;for(;c;){if(c.matches(b))return c;c=c.nextElementSibling}}(c,z):function(a,b){let c=a.previousElementSibling;for(;c;){if(c.matches(b))return c;c=c.previousElementSibling}}(c,z))?void 0:c.querySelector(C);d?J.setState("value",d.getAttribute(E)):Z(a)}let _=()=>V(U().length-1),aa=a=>{a.preventDefault(),a.metaKey?_():a.altKey?$(1):Z(1)},ab=a=>{a.preventDefault(),a.metaKey?V(0):a.altKey?$(-1):Z(-1)};return c.createElement(w.Primitive.div,{ref:b,tabIndex:-1,...s,"cmdk-root":"",onKeyDown:a=>{var b;null==(b=s.onKeyDown)||b.call(s,a);let c=a.nativeEvent.isComposing||229===a.keyCode;if(!(a.defaultPrevented||c))switch(a.key){case"n":case"j":r&&a.ctrlKey&&aa(a);break;case"ArrowDown":aa(a);break;case"p":case"k":r&&a.ctrlKey&&ab(a);break;case"ArrowUp":ab(a);break;case"Home":a.preventDefault(),V(0);break;case"End":a.preventDefault(),_();break;case"Enter":{a.preventDefault();let b=Q();if(b){let a=new Event(D);b.dispatchEvent(a)}}}}},c.createElement("label",{"cmdk-label":"",htmlFor:K.inputId,id:K.labelId,style:Y},j),X(a,a=>c.createElement(H.Provider,{value:J},c.createElement(G.Provider,{value:K},a))))}),K=c.forwardRef((a,b)=>{var d,e;let f=(0,x.useId)(),g=c.useRef(null),h=c.useContext(I),i=c.useContext(G),j=R(a),k=null!=(e=null==(d=j.current)?void 0:d.forceMount)?e:null==h?void 0:h.forceMount;S(()=>{if(!k)return i.item(f,null==h?void 0:h.id)},[k]);let l=V(f,g,[a.value,a.children,g],a.keywords),m=c.useContext(H),n=U(a=>a.value&&a.value===l.current),o=U(a=>!!k||!1===i.filter()||!a.search||a.filtered.items.get(f)>0);function p(){var a,b;q(),null==(b=(a=j.current).onSelect)||b.call(a,l.current)}function q(){m.setState("value",l.current,!0)}if(c.useEffect(()=>{let b=g.current;if(!(!b||a.disabled))return b.addEventListener(D,p),()=>b.removeEventListener(D,p)},[o,a.onSelect,a.disabled]),!o)return null;let{disabled:r,value:s,onSelect:t,forceMount:u,keywords:v,...z}=a;return c.createElement(w.Primitive.div,{ref:(0,y.composeRefs)(g,b),...z,id:f,"cmdk-item":"",role:"option","aria-disabled":!!r,"aria-selected":!!n,"data-disabled":!!r,"data-selected":!!n,onPointerMove:r||i.getDisablePointerSelection()?void 0:q,onClick:r?void 0:p},a.children)}),L=c.forwardRef((a,b)=>{let{heading:d,children:e,forceMount:f,...g}=a,h=(0,x.useId)(),i=c.useRef(null),j=c.useRef(null),k=(0,x.useId)(),l=c.useContext(G),m=U(a=>!!f||!1===l.filter()||!a.search||a.filtered.groups.has(h));S(()=>l.group(h),[]),V(h,i,[a.value,a.heading,j]);let n=c.useMemo(()=>({id:h,forceMount:f}),[f]);return c.createElement(w.Primitive.div,{ref:(0,y.composeRefs)(i,b),...g,"cmdk-group":"",role:"presentation",hidden:!m||void 0},d&&c.createElement("div",{ref:j,"cmdk-group-heading":"","aria-hidden":!0,id:k},d),X(a,a=>c.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":d?k:void 0},c.createElement(I.Provider,{value:n},a))))}),M=c.forwardRef((a,b)=>{let{alwaysRender:d,...e}=a,f=c.useRef(null),g=U(a=>!a.search);return d||g?c.createElement(w.Primitive.div,{ref:(0,y.composeRefs)(f,b),...e,"cmdk-separator":"",role:"separator"}):null}),N=c.forwardRef((a,b)=>{let{onValueChange:d,...e}=a,f=null!=a.value,g=c.useContext(H),h=U(a=>a.search),i=U(a=>a.selectedItemId),j=c.useContext(G);return c.useEffect(()=>{null!=a.value&&g.setState("search",a.value)},[a.value]),c.createElement(w.Primitive.input,{ref:b,...e,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":j.listId,"aria-labelledby":j.labelId,"aria-activedescendant":i,id:j.inputId,type:"text",value:f?a.value:h,onChange:a=>{f||g.setState("search",a.target.value),null==d||d(a.target.value)}})}),O=c.forwardRef((a,b)=>{let{children:d,label:e="Suggestions",...f}=a,g=c.useRef(null),h=c.useRef(null),i=U(a=>a.selectedItemId),j=c.useContext(G);return c.useEffect(()=>{if(h.current&&g.current){let a=h.current,b=g.current,c,d=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let c=a.offsetHeight;b.style.setProperty("--cmdk-list-height",c.toFixed(1)+"px")})});return d.observe(a),()=>{cancelAnimationFrame(c),d.unobserve(a)}}},[]),c.createElement(w.Primitive.div,{ref:(0,y.composeRefs)(g,b),...f,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":e,id:j.listId},X(a,a=>c.createElement("div",{ref:(0,y.composeRefs)(h,j.listInnerRef),"cmdk-list-sizer":""},a)))}),P=c.forwardRef((a,b)=>{let{open:d,onOpenChange:e,overlayClassName:f,contentClassName:g,container:h,...i}=a;return c.createElement(v.Root,{open:d,onOpenChange:e},c.createElement(v.Portal,{container:h},c.createElement(v.Overlay,{"cmdk-overlay":"",className:f}),c.createElement(v.Content,{"aria-label":a.label,"cmdk-dialog":"",className:g},c.createElement(J,{ref:b,...i}))))}),Q=Object.assign(J,{List:O,Item:K,Input:N,Group:L,Separator:M,Dialog:P,Empty:c.forwardRef((a,b)=>U(a=>0===a.filtered.count)?c.createElement(w.Primitive.div,{ref:b,...a,"cmdk-empty":"",role:"presentation"}):null),Loading:c.forwardRef((a,b)=>{let{progress:d,children:e,label:f="Loading...",...g}=a;return c.createElement(w.Primitive.div,{ref:b,...g,"cmdk-loading":"",role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100,"aria-label":f},X(a,a=>c.createElement("div",{"aria-hidden":!0},a)))})});function R(a){let b=c.useRef(a);return S(()=>{b.current=a}),b}var S=c.useEffect;function T(a){let b=c.useRef();return void 0===b.current&&(b.current=a()),b}function U(a){let b=c.useContext(H),d=()=>a(b.snapshot());return c.useSyncExternalStore(b.subscribe,d,d)}function V(a,b,d,e=[]){let f=c.useRef(),g=c.useContext(G);return S(()=>{var c;let h=(()=>{var a;for(let b of d){if("string"==typeof b)return b.trim();if("object"==typeof b&&"current"in b)return b.current?null==(a=b.current.textContent)?void 0:a.trim():f.current}})(),i=e.map(a=>a.trim());g.value(a,h,i),null==(c=b.current)||c.setAttribute(E,h),f.current=h}),f}var W=()=>{let[a,b]=c.useState(),d=T(()=>new Map);return S(()=>{d.current.forEach(a=>a()),d.current=new Map},[a]),(a,c)=>{d.current.set(a,c),b({})}};function X({asChild:a,children:b},d){let e;return a&&c.isValidElement(b)?c.cloneElement("function"==typeof(e=b.type)?e(b.props):"render"in e?e.render(b.props):b,{ref:b.ref},d(b.props.children)):d(b)}var Y={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},Z=a.i(587532),$=a.i(189736);a.i(632246);let _=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Q,{ref:d,className:(0,$.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...c}));_.displayName=Q.displayName;let aa=c.forwardRef(({className:a,...c},d)=>(0,b.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,b.jsx)(Z.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,b.jsx)(Q.Input,{ref:d,className:(0,$.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...c})]}));aa.displayName=Q.Input.displayName;let ab=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Q.List,{ref:d,className:(0,$.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...c}));ab.displayName=Q.List.displayName;let ac=c.forwardRef((a,c)=>(0,b.jsx)(Q.Empty,{ref:c,className:"py-6 text-center text-sm",...a}));ac.displayName=Q.Empty.displayName;let ad=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Q.Group,{ref:d,className:(0,$.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...c}));ad.displayName=Q.Group.displayName,c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Q.Separator,{ref:d,className:(0,$.cn)("-mx-1 h-px bg-border",a),...c})).displayName=Q.Separator.displayName;let ae=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Q.Item,{ref:d,className:(0,$.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...c}));ae.displayName=Q.Item.displayName;var af=a.i(424371),ag=a.i(821374),ah=a.i(872089),ai=a.i(73570),aj=a.i(533441);let ak=(0,a.i(170106).default)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var al=a.i(596221),am=a.i(276725),an=a.i(370025),ao=a.i(971871),ap=a.i(238246),aq=a.i(88162);let ar=f.z.object({brokerId:f.z.string().min(1,"Please select a broker"),rating:f.z.number().min(1,"Please select a rating").max(5),reviewTitle:f.z.string().min(10,"Title must be at least 10 characters").max(200),reviewBody:f.z.string().min(100,"Review must be at least 100 characters for coin reward").max(2e3),isScamReport:f.z.boolean()});function as({initialBrokers:a}){let{toast:f}=(0,am.useToast)(),[q,r]=(0,c.useState)(0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),K=(0,d.useForm)({resolver:(0,e.zodResolver)(ar),defaultValues:{brokerId:"",rating:0,reviewTitle:"",reviewBody:"",isScamReport:!1}});(0,c.useEffect)(()=>{let a=setTimeout(async()=>{if(y.trim().length>=2){D(!0);try{let a=await fetch(`/api/brokers/search?q=${encodeURIComponent(y)}`),b=await a.json();B(Array.isArray(b)?b:b.brokers||[])}catch(a){console.error("Search error:",a),B([])}finally{D(!1)}}else B([])},300);return()=>clearTimeout(a)},[y]);let L=(0,an.useMutation)({mutationFn:async a=>{let b=(0,aq.default)(a.name,{lower:!0,strict:!0}),c=null;if(a.websiteUrl)try{let b=await (0,ao.apiRequest)("POST","/api/brokers/fetch-logo",{websiteUrl:a.websiteUrl,brokerName:a.name});c=(await b.json()).logoUrl}catch(a){console.error("Logo fetch error:",a)}return(await (0,ao.apiRequest)("POST","/api/brokers",{name:a.name,slug:b,websiteUrl:a.websiteUrl||null,logoUrl:c,status:"pending"})).json()},onSuccess:a=>{F({id:a.id,name:a.name,slug:a.slug,websiteUrl:a.websiteUrl,logoUrl:a.logoUrl,isVerified:!1,overallRating:null,reviewCount:0}),J(a.logoUrl),K.setValue("brokerId",a.id),t(!1),v(""),x(""),f({title:"Broker Added",description:`${a.name} has been added to the list.`}),ao.queryClient.invalidateQueries({queryKey:["/api/brokers"]})},onError:a=>{f({variant:"destructive",title:"Failed to Add Broker",description:a.message||"Could not create the new broker. Please try again."})}}),M=(0,an.useMutation)({mutationFn:async a=>(await (0,ao.apiRequest)("POST","/api/brokers/review",a)).json(),onSuccess:()=>{f({title:"Review Submitted!",description:"Your review will be approved shortly. You'll earn +50 coins once approved."}),K.reset(),r(0),v(""),x(""),F(null),z(""),J(null),t(!1)},onError:a=>{f({variant:"destructive",title:"Submission Failed",description:a.message||"Failed to submit review. Please check your connection and try again."})}}),N=()=>{u.trim()?L.mutate({name:u.trim(),websiteUrl:w.trim()||void 0}):f({variant:"destructive",title:"Invalid Broker Name",description:"Please enter a valid broker name."})},O=K.watch("reviewBody")?.split(/\s+/).filter(Boolean).length||0,P=O>=200;return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(g.default,{}),(0,b.jsxs)("main",{className:"container max-w-4xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",className:"mb-4","data-testid":"button-back-to-brokers",asChild:!0,children:(0,b.jsx)(ap.default,{href:"/brokers",children:"← Back to Broker Directory"})}),(0,b.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Submit Broker Review"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:"Share your experience and help the community make informed decisions"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Your Review"}),(0,b.jsx)(i.CardDescription,{children:"Provide honest feedback about your experience with this broker"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)(p.Form,{...K,children:(0,b.jsxs)("form",{onSubmit:K.handleSubmit(a=>{a.brokerId?M.mutate(a):f({variant:"destructive",title:"Missing Broker",description:"Please select or add a broker before submitting."})}),className:"space-y-6",children:[(0,b.jsx)(p.FormField,{control:K.control,name:"brokerId",render:({field:a})=>(0,b.jsxs)(p.FormItem,{className:"flex flex-col",children:[(0,b.jsx)(p.FormLabel,{children:"Select Broker"}),s?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Input,{placeholder:"Enter broker name...",value:u,onChange:a=>v(a.target.value),"data-testid":"input-new-broker-name",disabled:L.isPending}),(0,b.jsx)(k.Input,{placeholder:"Broker website URL (optional, for logo fetch)...",value:w,onChange:a=>x(a.target.value),"data-testid":"input-new-broker-website",disabled:L.isPending}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Providing a website URL helps us automatically fetch the broker's logo"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{type:"button",onClick:N,disabled:L.isPending||!u.trim(),"data-testid":"button-add-broker",children:L.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(al.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Broker"}),(0,b.jsx)(j.Button,{type:"button",variant:"ghost",onClick:()=>{t(!1),v(""),x("")},"data-testid":"button-cancel-add-broker",children:"Cancel"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(af.Popover,{open:G,onOpenChange:H,children:[(0,b.jsx)(af.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(p.FormControl,{children:(0,b.jsxs)(j.Button,{variant:"outline",role:"combobox","aria-expanded":G,className:(0,$.cn)("w-full justify-between",!E&&"text-muted-foreground"),"data-testid":"button-select-broker",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[E&&I&&(0,b.jsxs)(o.Avatar,{className:"h-5 w-5",children:[(0,b.jsx)(o.AvatarImage,{src:I,alt:E.name}),(0,b.jsx)(o.AvatarFallback,{children:E.name.charAt(0)})]}),(0,b.jsx)("span",{className:"truncate",children:E?E.name:"Search for a broker..."})]}),(0,b.jsx)(ak,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,b.jsx)(af.PopoverContent,{className:"w-[400px] p-0",align:"start",children:(0,b.jsxs)(_,{shouldFilter:!1,children:[(0,b.jsx)(aa,{placeholder:"Type to search brokers...",value:y,onValueChange:z,"data-testid":"input-broker-search"}),(0,b.jsx)(ab,{children:C?(0,b.jsxs)("div",{className:"flex items-center justify-center py-6",children:[(0,b.jsx)(al.Loader2,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}):A.length>0?(0,b.jsx)(ad,{heading:"Brokers",children:A.map(a=>(0,b.jsx)(ae,{value:a.name,onSelect:()=>{F(a),J(a.logoUrl),K.setValue("brokerId",a.id),H(!1),z(a.name)},"data-testid":`broker-option-${a.id}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,b.jsxs)(o.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(o.AvatarImage,{src:a.logoUrl||void 0,alt:a.name}),(0,b.jsx)(o.AvatarFallback,{children:a.name.charAt(0)})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.name}),a.isVerified&&(0,b.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:"Verified"})]}),a.reviewCount>0&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.reviewCount," reviews"]})]}),E?.id===a.id&&(0,b.jsx)(aj.Check,{className:"h-4 w-4"})]})},a.id))}):y.length>=2?(0,b.jsx)(ac,{children:(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:['No broker found with name "',y,'"']}),(0,b.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{v(y),t(!0),H(!1)},"data-testid":"button-add-new-from-search",children:['Add "',y,'" as new broker']})]})}):(0,b.jsx)("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"Type at least 2 characters to search"})})]})})]}),E&&I&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[(0,b.jsxs)(o.Avatar,{className:"h-12 w-12",children:[(0,b.jsx)(o.AvatarImage,{src:I,alt:E.name}),(0,b.jsx)(o.AvatarFallback,{children:E.name.charAt(0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:E.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Logo preview"})]})]})]}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:K.control,name:"rating",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Your Rating"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(c=>(0,b.jsx)(ag.Star,{className:`h-8 w-8 cursor-pointer transition-colors ${c<=(q||a.value)?"fill-primary text-primary":"text-muted-foreground hover:text-primary"}`,onClick:()=>{r(c),a.onChange(c)},"data-testid":`star-rating-${c}`},c)),q>0&&(0,b.jsxs)("span",{className:"ml-2 font-semibold",children:[q,"/5"]})]})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:K.control,name:"reviewTitle",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Review Title"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"Sum up your experience in one line...",...a,"data-testid":"input-review-title"})}),(0,b.jsxs)(p.FormDescription,{"data-testid":"text-title-character-count",children:[a.value.length,"/200 characters"]}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:K.control,name:"reviewBody",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Your Review"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(l.Textarea,{placeholder:"Share your detailed experience with this broker. Include information about spreads, execution speed, customer service, withdrawals, etc.",className:"min-h-[200px]",...a,"data-testid":"textarea-review-body"})}),(0,b.jsxs)(p.FormDescription,{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{"data-testid":"text-word-count",children:[O," words (minimum 100, recommended 200+ for coins)"]}),P&&(0,b.jsxs)(n.Badge,{variant:"secondary",className:"flex items-center gap-1","data-testid":"badge-coin-eligible",children:[(0,b.jsx)(ah.Coins,{className:"h-3 w-3 text-primary"}),"Eligible for +50 Coins"]})]}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:K.control,name:"isScamReport",render:({field:a})=>(0,b.jsxs)(p.FormItem,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 bg-destructive/5",children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(m.Checkbox,{checked:a.value,onCheckedChange:a.onChange,"data-testid":"checkbox-scam-report"})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsxs)(p.FormLabel,{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)(ai.AlertTriangle,{className:"h-4 w-4"}),"This is a SCAM REPORT"]}),(0,b.jsx)(p.FormDescription,{children:"Check this box only if you're reporting fraudulent activity, withdrawal issues, or deceptive practices. Provide detailed evidence in your review."})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(j.Button,{type:"submit",size:"lg",disabled:M.isPending,"data-testid":"button-submit-review",children:M.isPending?"Submitting...":"Submit Review"}),(0,b.jsx)(j.Button,{type:"button",size:"lg",variant:"outline",onClick:()=>{K.reset(),r(0),t(!1),v(""),x(""),F(null),z(""),J(null)},"data-testid":"button-reset-form",children:"Reset"})]})]})})})]})}),(0,b.jsxs)("aside",{className:"space-y-6",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Earn Gold Coins"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-primary/10 rounded-md border border-primary/20",children:[(0,b.jsx)(ah.Coins,{className:"h-5 w-5 text-primary flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:"+50 Gold Coins"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"For quality reviews (200+ words)"})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your review will be verified by our moderators before approval. Helpful, detailed reviews earn coins faster!"})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Review Tips"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-3 text-sm text-muted-foreground",children:[(0,b.jsx)("p",{children:"✓ Be specific about spreads, execution speed, and costs"}),(0,b.jsx)("p",{children:"✓ Share actual numbers and dates when possible"}),(0,b.jsx)("p",{children:"✓ Include both positives and negatives"}),(0,b.jsx)("p",{children:"✓ Mention the account type you used"}),(0,b.jsx)("p",{children:"✓ Upload screenshots if reporting issues"})]})]})]})]})]}),(0,b.jsx)(h.default,{})]})}a.s(["default",()=>as],655827)}];

//# sourceMappingURL=app_brokers_submit-review_SubmitBrokerReviewClient_tsx_a95c2504._.js.map