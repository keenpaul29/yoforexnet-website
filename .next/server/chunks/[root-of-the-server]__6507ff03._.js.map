{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/lib/metadata/generate/utils.ts","turbopack:///[project]/node_modules/next/src/build/webpack/loaders/metadata/resolve-route-data.ts"],"sourcesContent":["function resolveArray<T>(value: T | T[]): T[] {\n  if (Array.isArray(value)) {\n    return value as any\n  }\n  return [value] as any\n}\n\nfunction resolveAsArrayOrUndefined<T>(\n  value: T | T[] | undefined | null\n): T extends undefined | null ? undefined : T[] {\n  if (typeof value === 'undefined' || value === null) {\n    return undefined as any\n  }\n  return resolveArray(value) as any\n}\n\nfunction getOrigin(url: string | URL): string | undefined {\n  let origin = undefined\n  if (typeof url === 'string') {\n    try {\n      url = new URL(url)\n      origin = url.origin\n    } catch {}\n  }\n  return origin\n}\n\nexport { resolveAsArrayOrUndefined, resolveArray, getOrigin }\n","import type { MetadataRoute } from '../../../../lib/metadata/types/metadata-interface'\nimport { resolveArray } from '../../../../lib/metadata/generate/utils'\n\n// convert robots data to txt string\nexport function resolveRobots(data: MetadataRoute.Robots): string {\n  let content = ''\n  const rules = Array.isArray(data.rules) ? data.rules : [data.rules]\n  for (const rule of rules) {\n    const userAgent = resolveArray(rule.userAgent || ['*'])\n    for (const agent of userAgent) {\n      content += `User-Agent: ${agent}\\n`\n    }\n    if (rule.allow) {\n      const allow = resolveArray(rule.allow)\n      for (const item of allow) {\n        content += `Allow: ${item}\\n`\n      }\n    }\n    if (rule.disallow) {\n      const disallow = resolveArray(rule.disallow)\n      for (const item of disallow) {\n        content += `Disallow: ${item}\\n`\n      }\n    }\n    if (rule.crawlDelay) {\n      content += `Crawl-delay: ${rule.crawlDelay}\\n`\n    }\n    content += '\\n'\n  }\n  if (data.host) {\n    content += `Host: ${data.host}\\n`\n  }\n  if (data.sitemap) {\n    const sitemap = resolveArray(data.sitemap)\n    // TODO-METADATA: support injecting sitemap url into robots.txt\n    sitemap.forEach((item) => {\n      content += `Sitemap: ${item}\\n`\n    })\n  }\n\n  return content\n}\n\n// TODO-METADATA: support multi sitemap files\n// convert sitemap data to xml string\nexport function resolveSitemap(data: MetadataRoute.Sitemap): string {\n  const hasAlternates = data.some(\n    (item) => Object.keys(item.alternates ?? {}).length > 0\n  )\n  const hasImages = data.some((item) => Boolean(item.images?.length))\n  const hasVideos = data.some((item) => Boolean(item.videos?.length))\n\n  let content = ''\n  content += '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n'\n  content += '<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"'\n  if (hasImages) {\n    content += ' xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"'\n  }\n  if (hasVideos) {\n    content += ' xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\"'\n  }\n  if (hasAlternates) {\n    content += ' xmlns:xhtml=\"http://www.w3.org/1999/xhtml\">\\n'\n  } else {\n    content += '>\\n'\n  }\n  for (const item of data) {\n    content += '<url>\\n'\n    content += `<loc>${item.url}</loc>\\n`\n\n    const languages = item.alternates?.languages\n    if (languages && Object.keys(languages).length) {\n      // Since sitemap is separated from the page rendering, there's not metadataBase accessible yet.\n      // we give the default setting that won't effect the languages resolving.\n      for (const language in languages) {\n        content += `<xhtml:link rel=\"alternate\" hreflang=\"${language}\" href=\"${\n          languages[language as keyof typeof languages]\n        }\" />\\n`\n      }\n    }\n    if (item.images?.length) {\n      for (const image of item.images) {\n        content += `<image:image>\\n<image:loc>${image}</image:loc>\\n</image:image>\\n`\n      }\n    }\n    if (item.videos?.length) {\n      for (const video of item.videos) {\n        let videoFields = [\n          `<video:video>`,\n          `<video:title>${video.title}</video:title>`,\n          `<video:thumbnail_loc>${video.thumbnail_loc}</video:thumbnail_loc>`,\n          `<video:description>${video.description}</video:description>`,\n          video.content_loc &&\n            `<video:content_loc>${video.content_loc}</video:content_loc>`,\n          video.player_loc &&\n            `<video:player_loc>${video.player_loc}</video:player_loc>`,\n          video.duration &&\n            `<video:duration>${video.duration}</video:duration>`,\n          video.view_count &&\n            `<video:view_count>${video.view_count}</video:view_count>`,\n          video.tag && `<video:tag>${video.tag}</video:tag>`,\n          video.rating && `<video:rating>${video.rating}</video:rating>`,\n          video.expiration_date &&\n            `<video:expiration_date>${video.expiration_date}</video:expiration_date>`,\n          video.publication_date &&\n            `<video:publication_date>${video.publication_date}</video:publication_date>`,\n          video.family_friendly &&\n            `<video:family_friendly>${video.family_friendly}</video:family_friendly>`,\n          video.requires_subscription &&\n            `<video:requires_subscription>${video.requires_subscription}</video:requires_subscription>`,\n          video.live && `<video:live>${video.live}</video:live>`,\n          video.restriction &&\n            `<video:restriction relationship=\"${video.restriction.relationship}\">${video.restriction.content}</video:restriction>`,\n          video.platform &&\n            `<video:platform relationship=\"${video.platform.relationship}\">${video.platform.content}</video:platform>`,\n          video.uploader &&\n            `<video:uploader${video.uploader.info && ` info=\"${video.uploader.info}\"`}>${video.uploader.content}</video:uploader>`,\n          `</video:video>\\n`,\n        ].filter(Boolean)\n        content += videoFields.join('\\n')\n      }\n    }\n    if (item.lastModified) {\n      const serializedDate =\n        item.lastModified instanceof Date\n          ? item.lastModified.toISOString()\n          : item.lastModified\n\n      content += `<lastmod>${serializedDate}</lastmod>\\n`\n    }\n\n    if (item.changeFrequency) {\n      content += `<changefreq>${item.changeFrequency}</changefreq>\\n`\n    }\n\n    if (typeof item.priority === 'number') {\n      content += `<priority>${item.priority}</priority>\\n`\n    }\n\n    content += '</url>\\n'\n  }\n\n  content += '</urlset>\\n'\n\n  return content\n}\n\nexport function resolveManifest(data: MetadataRoute.Manifest): string {\n  return JSON.stringify(data)\n}\n\nexport function resolveRouteData(\n  data: MetadataRoute.Robots | MetadataRoute.Sitemap | MetadataRoute.Manifest,\n  fileType: 'robots' | 'sitemap' | 'manifest'\n): string {\n  if (fileType === 'robots') {\n    return resolveRobots(data as MetadataRoute.Robots)\n  }\n  if (fileType === 'sitemap') {\n    return resolveSitemap(data as MetadataRoute.Sitemap)\n  }\n  if (fileType === 'manifest') {\n    return resolveManifest(data as MetadataRoute.Manifest)\n  }\n  return ''\n}\n"],"names":["getOrigin","resolveArray","resolveAsArrayOrUndefined","value","Array","isArray","undefined","url","origin","URL","resolveManifest","resolveRobots","resolveRouteData","resolveSitemap","data","content","rules","rule","userAgent","agent","allow","item","disallow","crawlDelay","host","sitemap","forEach","hasAlternates","some","Object","keys","alternates","length","hasImages","Boolean","images","hasVideos","videos","languages","language","image","video","videoFields","title","thumbnail_loc","description","content_loc","player_loc","duration","view_count","tag","rating","expiration_date","publication_date","family_friendly","requires_subscription","live","restriction","relationship","platform","uploader","info","filter","join","lastModified","serializedDate","Date","toISOString","changeFrequency","priority","JSON","stringify","fileType"],"mappings":"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","ignoreList":[0,1]}