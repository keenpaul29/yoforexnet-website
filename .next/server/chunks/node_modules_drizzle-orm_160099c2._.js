module.exports=[44988,e=>{"use strict";let t=Symbol.for("drizzle:entityKind"),n=Symbol.for("drizzle:hasOwnEntityKind");function i(e,n){if(!e||"object"!=typeof e)return!1;if(e instanceof n)return!0;if(!Object.prototype.hasOwnProperty.call(n,t))throw Error(`Class "${n.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(e).constructor;if(i)for(;i;){if(t in i&&i[t]===n[t])return!0;i=Object.getPrototypeOf(i)}return!1}e.s(["entityKind",()=>t,"hasOwnEntityKind",()=>n,"is",()=>i])},7932,e=>{"use strict";var t=e.i(44988);class n{static [t.entityKind]="ConsoleLogWriter";write(e){console.log(e)}}class i{static [t.entityKind]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new n}logQuery(e,t){let n=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),i=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}}class r{static [t.entityKind]="NoopLogger";logQuery(){}}e.s(["ConsoleLogWriter",()=>n,"DefaultLogger",()=>i,"NoopLogger",()=>r])},98020,e=>{"use strict";var t=e.i(44988);class n{static [t.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}e.s(["QueryPromise",()=>n])},49507,22360,e=>{"use strict";let t,n;function i(e,...t){return e(...t)}e.s(["iife",()=>i],49507);let r={startActiveSpan:(e,r)=>t?(n||(n=t.trace.getTracer("drizzle-orm","0.39.1")),i((t,n)=>n.startActiveSpan(e,e=>{try{return r(e)}catch(n){throw e.setStatus({code:t.SpanStatusCode.ERROR,message:n instanceof Error?n.message:"Unknown error"}),n}finally{e.end()}}),t,n)):r()};e.s(["tracer",()=>r],22360)},56325,43179,4775,92352,88274,69e3,18899,e=>{"use strict";var t,n=e.i(44988);class i{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [n.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}e.s(["Column",()=>i],56325);class r{static [n.entityKind]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}e.s(["ColumnBuilder",()=>r],43179);let s=Symbol.for("drizzle:Name");class l{static [n.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new o(e,this)}}class o{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [n.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),r=n.map(e=>e.name),l=[this.table[s],...i,n[0].table[s],...r];return e??`${l.join("_")}_fk`}}var a=e.i(49507);function u(e,t){return`${e[s]}_${t.join("_")}_unique`}class c{constructor(e,t){this.name=t,this.columns=e}static [n.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new d(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class m{static [n.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new c(e,this.name)}}class d{constructor(e,t,n,i){this.table=e,this.columns=t,this.name=i??u(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}static [n.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function g(e,t,n){for(let i=t;i<e.length;i++){let r=e[i];if("\\"===r){i++;continue}if('"'===r)return[e.slice(t,i).replace(/\\/g,""),i+1];if(!n&&(","===r||"}"===r))return[e.slice(t,i).replace(/\\/g,""),i]}return[e.slice(t).replace(/\\/g,""),e.length]}class f extends r{foreignKeyConfigs=[];static [n.entityKind]="PgColumnBuilder";array(e){return new b(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>(0,a.iife)((n,i)=>{let r=new l(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&r.onUpdate(i.onUpdate),i.onDelete&&r.onDelete(i.onDelete),r.build(t)},n,i))}buildExtraConfigColumn(e){return new p(e,this.config)}}class h extends i{constructor(e,t){t.uniqueName||(t.uniqueName=u(e,[t.name])),super(e,t),this.table=e}static [n.entityKind]="PgColumn"}class p extends h{static [n.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class y{static [n.entityKind]="IndexedColumn";constructor(e,t,n,i){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=i}name;keyAsName;type;indexConfig}class b extends f{static [n.entityKind]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new P(e,this.config,t)}}class P extends h{constructor(e,t,n,i){super(e,t),this.baseColumn=n,this.range=i,this.size=t.size}size;static [n.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,n=0){let i=[],r=n,s=!1;for(;r<t.length;){let l=t[r];if(","===l){(s||r===n)&&i.push(""),s=!0,r++;continue}if(s=!1,"\\"===l){r+=2;continue}if('"'===l){let[e,n]=g(t,r+1,!0);i.push(e),r=n;continue}if("}"===l)return[i,r+1];if("{"===l){let[n,s]=e(t,r+1);i.push(n),r=s;continue}let[o,a]=g(t,r,!1);i.push(o),r=a}return[i,r]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let i=e.map(e=>null===e?null:(0,n.is)(this.baseColumn,P)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?i:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(i)}}e.s(["IndexedColumn",()=>y,"PgColumn",()=>h,"PgColumnBuilder",()=>f],4775);let C=Symbol.for("drizzle:isPgEnum");class w extends f{static [n.entityKind]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new S(e,this.config)}}class S extends h{static [n.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}class T{static [n.entityKind]="Subquery";constructor(e,t,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:i}}}class v extends T{static [n.entityKind]="WithSubquery"}e.s(["Subquery",()=>T,"WithSubquery",()=>v],92352);var N=e.i(22360);let x=Symbol.for("drizzle:ViewBaseConfig");e.s(["ViewBaseConfig",()=>x],88274);let K=Symbol.for("drizzle:Schema"),B=Symbol.for("drizzle:Columns"),q=Symbol.for("drizzle:ExtraConfigColumns"),$=Symbol.for("drizzle:OriginalName"),D=Symbol.for("drizzle:BaseName"),L=Symbol.for("drizzle:IsAlias"),V=Symbol.for("drizzle:ExtraConfigBuilder"),Q=Symbol.for("drizzle:IsDrizzleTable");class A{static [n.entityKind]="Table";static Symbol={Name:s,Schema:K,OriginalName:$,Columns:B,ExtraConfigColumns:q,BaseName:D,IsAlias:L,ExtraConfigBuilder:V};[s];[$];[K];[B];[q];[D];[L]=!1;[Q]=!0;[V]=void 0;constructor(e,t,n){this[s]=this[$]=e,this[K]=t,this[D]=n}}function z(e){return"object"==typeof e&&null!==e&&Q in e}function F(e){return e[s]}function O(e){return`${e[K]??"public"}.${e[s]}`}e.s(["BaseName",()=>D,"Columns",()=>B,"ExtraConfigBuilder",()=>V,"ExtraConfigColumns",()=>q,"IsAlias",()=>L,"OriginalName",()=>$,"Schema",()=>K,"Table",()=>A,"getTableName",()=>F,"getTableUniqueName",()=>O,"isTable",()=>z],69e3);class j{static [n.entityKind]="FakePrimitiveParam"}function I(e){return null!=e&&"function"==typeof e.getSQL}class k{static [n.entityKind]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new E([this])}}class E{constructor(e){this.queryChunks=e}static [n.entityKind]="SQL";decoder=J;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return N.tracer.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:l,escapeParam:o,prepareTyping:a,inlineParams:u,paramStartIndex:c}=r;var m=e.map(e=>{if((0,n.is)(e,k))return{sql:e.value.join(""),params:[]};if((0,n.is)(e,U))return{sql:l(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new k("(")];for(let[n,i]of e.entries())t.push(i),n<e.length-1&&t.push(new k(", "));return t.push(new k(")")),this.buildQueryFromSourceParams(t,r)}if((0,n.is)(e,E))return this.buildQueryFromSourceParams(e.queryChunks,{...r,inlineParams:u||e.shouldInlineParams});if((0,n.is)(e,A)){let t=e[A.Symbol.Schema],n=e[A.Symbol.Name];return{sql:void 0===t||e[L]?l(n):l(t)+"."+l(n),params:[]}}if((0,n.is)(e,i)){let n=s.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:l(n),params:[]};let i=e.table[A.Symbol.Schema];return{sql:e.table[L]||void 0===i?l(e.table[A.Symbol.Name])+"."+l(n):l(i)+"."+l(e.table[A.Symbol.Name])+"."+l(n),params:[]}}if((0,n.is)(e,er)){let t=e[x].schema,n=e[x].name;return{sql:void 0===t||e[x].isAlias?l(n):l(t)+"."+l(n),params:[]}}if((0,n.is)(e,W)){if((0,n.is)(e.value,ee))return{sql:o(c.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,n.is)(t,E))return this.buildQueryFromSourceParams([t],r);if(u)return{sql:this.mapInlineParam(t,r),params:[]};let i=["none"];return a&&(i=[a(e.encoder)]),{sql:o(c.value++,t),params:[t],typings:i}}return(0,n.is)(e,ee)?{sql:o(c.value++,e),params:[e],typings:["none"]}:(0,n.is)(e,E.Aliased)&&void 0!==e.fieldAlias?{sql:l(e.fieldAlias),params:[]}:(0,n.is)(e,T)?e._.isWith?{sql:l(e._.alias),params:[]}:this.buildQueryFromSourceParams([new k("("),e._.sql,new k(") "),new U(e._.alias)],r):e&&"function"==typeof e&&C in e&&!0===e[C]?e.schema?{sql:l(e.schema)+"."+l(e.enumName),params:[]}:{sql:l(e.enumName),params:[]}:I(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],r):this.buildQueryFromSourceParams([new k("("),e.getSQL(),new k(")")],r):u?{sql:this.mapInlineParam(e,r),params:[]}:{sql:o(c.value++,e),params:[e],typings:["none"]}});let d={sql:"",params:[]};for(let e of m)d.sql+=e.sql,d.params.push(...e.params),e.typings?.length&&(d.typings||(d.typings=[]),d.typings.push(...e.typings));return d}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let n=e.toString();return"[object Object]"===n?t(JSON.stringify(e)):t(n)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new E.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class U{constructor(e){this.value=e}static [n.entityKind]="Name";brand;getSQL(){return new E([this])}}function R(e){return new U(e)}function _(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}let J={mapFromDriverValue:e=>e},M={mapToDriverValue:e=>e},H={...J,...M};class W{constructor(e,t=M){this.value=e,this.encoder=t}static [n.entityKind]="Param";brand;getSQL(){return new E([this])}}function G(e,t){return new W(e,t)}function X(e,...t){let n=[];for(let[i,r]of((t.length>0||e.length>0&&""!==e[0])&&n.push(new k(e[0])),t.entries()))n.push(r,new k(e[i+1]));return new E(n)}(t=X||(X={})).empty=function(){return new E([])},t.fromList=function(e){return new E(e)},t.raw=function(e){return new E([new k(e)])},t.join=function(e,t){let n=[];for(let[i,r]of e.entries())i>0&&void 0!==t&&n.push(t),n.push(r);return new E(n)},t.identifier=function(e){return new U(e)},t.placeholder=function(e){return new ee(e)},t.param=function(e,t){return new W(e,t)};var Y=E||(E={});class Z{constructor(e,t){this.sql=e,this.fieldAlias=t}static [n.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new Z(this.sql,this.fieldAlias)}}Y.Aliased=Z;class ee{constructor(e){this.name=e}static [n.entityKind]="Placeholder";getSQL(){return new E([this])}}function et(e){return new ee(e)}function en(e,t){return e.map(e=>{if((0,n.is)(e,ee)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if((0,n.is)(e,W)&&(0,n.is)(e.value,ee)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}let ei=Symbol.for("drizzle:IsDrizzleView");class er{static [n.entityKind]="View";[x];[ei]=!0;constructor({name:e,schema:t,selectedFields:n,query:i}){this[x]={name:e,originalName:e,schema:t,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new E([this])}}function es(e){return"object"==typeof e&&null!==e&&ei in e}function el(e){return e[x].name}i.prototype.getSQL=function(){return new E([this])},A.prototype.getSQL=function(){return new E([this])},T.prototype.getSQL=function(){return new E([this])},e.s(["FakePrimitiveParam",()=>j,"Name",()=>U,"Param",()=>W,"Placeholder",()=>ee,"SQL",()=>E,"StringChunk",()=>k,"View",()=>er,"fillPlaceholders",()=>en,"getViewName",()=>el,"isDriverValueEncoder",()=>_,"isSQLWrapper",()=>I,"isView",()=>es,"name",()=>R,"noopDecoder",()=>J,"noopEncoder",()=>M,"noopMapper",()=>H,"param",()=>G,"placeholder",()=>et,"sql",()=>X],18899)},4313,e=>{"use strict";var t=e.i(56325),n=e.i(44988),i=e.i(18899),r=e.i(92352),s=e.i(69e3),l=e.i(88274);function o(e,r,l){let o={},a=e.reduce((e,{path:a,field:u},c)=>{let m;m=(0,n.is)(u,t.Column)?u:(0,n.is)(u,i.SQL)?u.decoder:u.sql.decoder;let d=e;for(let[e,i]of a.entries())if(e<a.length-1)i in d||(d[i]={}),d=d[i];else{let e=r[c],g=d[i]=null===e?null:m.mapFromDriverValue(e);if(l&&(0,n.is)(u,t.Column)&&2===a.length){let e=a[0];e in o?"string"==typeof o[e]&&o[e]!==(0,s.getTableName)(u.table)&&(o[e]=!1):o[e]=null===g&&(0,s.getTableName)(u.table)}}return e},{});if(l&&Object.keys(o).length>0)for(let[e,t]of Object.entries(o))"string"!=typeof t||l[t]||(a[e]=null);return a}function a(e,t){let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let[e,t]of n.entries())if(t!==i[e])return!1;return!0}function u(e,r){let l=Object.entries(r).filter(([,e])=>void 0!==e).map(([r,l])=>(0,n.is)(l,i.SQL)||(0,n.is)(l,t.Column)?[r,l]:[r,new i.Param(l,e[s.Table.Symbol.Columns][r])]);if(0===l.length)throw Error("No values to set");return Object.fromEntries(l)}function c(e,t){for(let n of t)for(let t of Object.getOwnPropertyNames(n.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(n.prototype,t)||Object.create(null))}function m(e){return e[s.Table.Symbol.Columns]}function d(e){return e[l.ViewBaseConfig].selectedFields}function g(e){return(0,n.is)(e,r.Subquery)?e._.alias:(0,n.is)(e,i.View)?e[l.ViewBaseConfig].name:(0,n.is)(e,i.SQL)?void 0:e[s.Table.Symbol.IsAlias]?e[s.Table.Symbol.Name]:e[s.Table.Symbol.BaseName]}function f(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}function h(e){if("object"!=typeof e||null===e||"Object"!==e.constructor.name)return!1;if("logger"in e){let t=typeof e.logger;return"boolean"===t||"object"===t&&"function"==typeof e.logger.logQuery||"undefined"===t}if("schema"in e){let t=typeof e.logger;return"object"===t||"undefined"===t}if("casing"in e){let t=typeof e.logger;return"string"===t||"undefined"===t}if("mode"in e)return"default"===e.mode&&"planetscale"===e.mode&&void 0===e.mode;if("connection"in e){let t=typeof e.connection;return"string"===t||"object"===t||"undefined"===t}if("client"in e){let t=typeof e.client;return"object"===t||"function"===t||"undefined"===t}return 0===Object.keys(e).length}e.s(["applyMixins",()=>c,"getColumnNameAndConfig",()=>f,"getTableColumns",()=>m,"getTableLikeName",()=>g,"getViewSelectedFields",()=>d,"haveSameKeys",()=>a,"isConfig",()=>h,"mapResultRow",()=>o,"mapUpdateSet",()=>u,"orderSelectedFields",()=>function e(r,l){return Object.entries(r).reduce((r,[o,a])=>{if("string"!=typeof o)return r;let u=l?[...l,o]:[o];return(0,n.is)(a,t.Column)||(0,n.is)(a,i.SQL)||(0,n.is)(a,i.SQL.Aliased)?r.push({path:u,field:a}):(0,n.is)(a,s.Table)?r.push(...e(a[s.Table.Symbol.Columns],u)):r.push(...e(a,u)),r},[])}])},5672,71783,e=>{"use strict";var t=e.i(56325),n=e.i(44988),i=e.i(18899),r=e.i(69e3),s=e.i(88274);class l{constructor(e){this.table=e}static [n.entityKind]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class o{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [n.entityKind]="TableAliasProxyHandler";get(e,i){if(i===r.Table.Symbol.IsAlias)return!0;if(i===r.Table.Symbol.Name||this.replaceOriginalName&&i===r.Table.Symbol.OriginalName)return this.alias;if(i===s.ViewBaseConfig)return{...e[s.ViewBaseConfig],name:this.alias,isAlias:!0};if(i===r.Table.Symbol.Columns){let t=e[r.Table.Symbol.Columns];if(!t)return t;let n={};return Object.keys(t).map(i=>{n[i]=new Proxy(t[i],new l(new Proxy(e,this)))}),n}let o=e[i];return(0,n.is)(o,t.Column)?new Proxy(o,new l(new Proxy(e,this))):o}}class a{constructor(e){this.alias=e}static [n.entityKind]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?u(e.sourceTable,this.alias):e[t]}}function u(e,t){return new Proxy(e,new o(t,!1))}function c(e,t){return new Proxy(e,new a(t))}function m(e,t){return new Proxy(e,new l(new Proxy(e.table,new o(t,!1))))}function d(e,t){return new i.SQL.Aliased(g(e.sql,t),e.fieldAlias)}function g(e,r){return i.sql.join(e.queryChunks.map(e=>(0,n.is)(e,t.Column)?m(e,r):(0,n.is)(e,i.SQL)?g(e,r):(0,n.is)(e,i.SQL.Aliased)?d(e,r):e))}e.s(["ColumnAliasProxyHandler",()=>l,"RelationTableAliasProxyHandler",()=>a,"TableAliasProxyHandler",()=>o,"aliasedRelation",()=>c,"aliasedTable",()=>u,"aliasedTableColumn",()=>m,"mapColumnsInAliasedSQLToAlias",()=>d,"mapColumnsInSQLToAlias",()=>g],5672);class f extends Error{static [n.entityKind]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class h extends f{static [n.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}e.s(["DrizzleError",()=>f,"TransactionRollbackError",()=>h],71783)},56923,41248,e=>{"use strict";var t=e.i(44988),n=e.i(4313),i=e.i(4775),r=e.i(18899),s=i;class l extends s.PgColumnBuilder{static [t.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(r.sql`now()`)}}e.s(["PgDateColumnBaseBuilder",()=>l],41248);class o extends l{static [t.entityKind]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new a(e,this.config)}}class a extends i.PgColumn{static [t.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class u extends l{static [t.entityKind]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new c(e,this.config)}}class c extends i.PgColumn{static [t.entityKind]="PgDateString";getSQLType(){return"date"}}function m(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return r?.mode==="date"?new o(i):new u(i)}e.s(["PgDate",()=>a,"PgDateString",()=>c,"date",()=>m],56923)},1727,38257,e=>{"use strict";var t=e.i(44988),n=e.i(4775);class i extends n.PgColumnBuilder{static [t.entityKind]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new r(e,this.config)}}class r extends n.PgColumn{static [t.entityKind]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function s(e){return new i(e??"")}e.s(["PgJson",()=>r,"json",()=>s],1727);var l=n;class o extends l.PgColumnBuilder{static [t.entityKind]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new a(e,this.config)}}class a extends l.PgColumn{static [t.entityKind]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function u(e){return new o(e??"")}e.s(["PgJsonb",()=>a,"jsonb",()=>u],38257)},48209,e=>{"use strict";var t=e.i(44988),n=e.i(4313),i=e.i(4775);class r extends i.PgColumnBuilder{static [t.entityKind]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new s(e,this.config)}}class s extends i.PgColumn{static [t.entityKind]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function l(e,t){let{name:i,config:s}=(0,n.getColumnNameAndConfig)(e,t);return new r(i,s?.precision,s?.scale)}e.s(["PgNumeric",()=>s,"decimal",()=>l,"numeric",()=>l])},93486,3090,67751,e=>{"use strict";var t=e.i(44988),n=e.i(4313),i=e.i(4775),r=e.i(41248);class s extends r.PgDateColumnBaseBuilder{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static [t.entityKind]="PgTimeBuilder";build(e){return new l(e,this.config)}}class l extends i.PgColumn{static [t.entityKind]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}function o(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return new s(i,r.withTimezone??!1,r.precision)}e.s(["PgTime",()=>l,"time",()=>o],93486);var a=i,u=r;class c extends u.PgDateColumnBaseBuilder{static [t.entityKind]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new m(e,this.config)}}class m extends a.PgColumn{static [t.entityKind]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class d extends u.PgDateColumnBaseBuilder{static [t.entityKind]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new g(e,this.config)}}class g extends a.PgColumn{static [t.entityKind]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}function f(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return r?.mode==="string"?new d(i,r.withTimezone??!1,r.precision):new c(i,r?.withTimezone??!1,r?.precision)}e.s(["PgTimestamp",()=>m,"PgTimestampString",()=>g,"timestamp",()=>f],3090);var h=e.i(18899),p=i;class y extends p.PgColumnBuilder{static [t.entityKind]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(h.sql`gen_random_uuid()`)}build(e){return new b(e,this.config)}}class b extends p.PgColumn{static [t.entityKind]="PgUUID";getSQLType(){return"uuid"}}function P(e){return new y(e??"")}e.s(["PgUUID",()=>b,"uuid",()=>P],67751)},90429,29714,12122,2847,37054,82060,12592,e=>{"use strict";var t=e.i(44988),n=e.i(4313),i=e.i(4775),r=i;class s extends r.PgColumnBuilder{static [t.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}e.s(["PgIntColumnBaseBuilder",()=>s],29714);class l extends s{static [t.entityKind]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new o(e,this.config)}}class o extends i.PgColumn{static [t.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class a extends s{static [t.entityKind]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new u(e,this.config)}}class u extends i.PgColumn{static [t.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function c(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return"number"===r.mode?new l(i):new a(i)}e.s(["bigint",()=>c],90429);var m=i;class d extends m.PgColumnBuilder{static [t.entityKind]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new g(e,this.config)}}class g extends m.PgColumn{static [t.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class f extends m.PgColumnBuilder{static [t.entityKind]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new h(e,this.config)}}class h extends m.PgColumn{static [t.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function p(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return"number"===r.mode?new d(i):new f(i)}e.s(["bigserial",()=>p],12122);var y=i;class b extends y.PgColumnBuilder{static [t.entityKind]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new P(e,this.config)}}class P extends y.PgColumn{static [t.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function C(e){return new b(e??"")}e.s(["boolean",()=>C],2847);var w=i;class S extends w.PgColumnBuilder{static [t.entityKind]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new T(e,this.config)}}class T extends w.PgColumn{static [t.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function v(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return new S(i,r)}e.s(["char",()=>v],37054);var N=i;class x extends N.PgColumnBuilder{static [t.entityKind]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new K(e,this.config)}}class K extends N.PgColumn{static [t.entityKind]="PgCidr";getSQLType(){return"cidr"}}function B(e){return new x(e??"")}e.s(["cidr",()=>B],82060);var q=i;class $ extends q.PgColumnBuilder{static [t.entityKind]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new D(e,this.config)}}class D extends q.PgColumn{static [t.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function L(e){return(t,i)=>{let{name:r,config:s}=(0,n.getColumnNameAndConfig)(t,i);return new $(r,s,e)}}e.s(["customType",()=>L],12592)},13262,56573,70988,296,e=>{"use strict";var t=e.i(44988),n=e.i(4775);class i extends n.PgColumnBuilder{static [t.entityKind]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new r(e,this.config)}}class r extends n.PgColumn{static [t.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function s(e){return new i(e??"")}e.s(["doublePrecision",()=>s],13262);var l=n;class o extends l.PgColumnBuilder{static [t.entityKind]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new a(e,this.config)}}class a extends l.PgColumn{static [t.entityKind]="PgInet";getSQLType(){return"inet"}}function u(e){return new o(e??"")}e.s(["inet",()=>u],56573);var c=n,m=e.i(29714);class d extends m.PgIntColumnBaseBuilder{static [t.entityKind]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new g(e,this.config)}}class g extends c.PgColumn{static [t.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function f(e){return new d(e??"")}e.s(["integer",()=>f],70988);var h=e.i(4313),p=n;class y extends p.PgColumnBuilder{static [t.entityKind]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new b(e,this.config)}}class b extends p.PgColumn{static [t.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function P(e,t={}){let{name:n,config:i}=(0,h.getColumnNameAndConfig)(e,t);return new y(n,i)}e.s(["interval",()=>P],296)},73844,60328,2801,e=>{"use strict";var t=e.i(44988),n=e.i(4313),i=e.i(4775);class r extends i.PgColumnBuilder{static [t.entityKind]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new s(e,this.config)}}class s extends i.PgColumn{static [t.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class l extends i.PgColumnBuilder{static [t.entityKind]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new o(e,this.config)}}class o extends i.PgColumn{static [t.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function a(e,t){let{name:i,config:s}=(0,n.getColumnNameAndConfig)(e,t);return s?.mode&&"tuple"!==s.mode?new l(i):new r(i)}e.s(["line",()=>a],73844);var u=i;class c extends u.PgColumnBuilder{static [t.entityKind]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new m(e,this.config)}}class m extends u.PgColumn{static [t.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function d(e){return new c(e??"")}e.s(["macaddr",()=>d],60328);var g=i;class f extends g.PgColumnBuilder{static [t.entityKind]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new h(e,this.config)}}class h extends g.PgColumn{static [t.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function p(e){return new f(e??"")}e.s(["macaddr8",()=>p],2801)},51324,51204,89705,5694,19398,90352,84259,e=>{"use strict";var t=e.i(44988),n=e.i(4313),i=e.i(4775);class r extends i.PgColumnBuilder{static [t.entityKind]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new s(e,this.config)}}class s extends i.PgColumn{static [t.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class l extends i.PgColumnBuilder{static [t.entityKind]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new o(e,this.config)}}class o extends i.PgColumn{static [t.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function a(e,t){let{name:i,config:s}=(0,n.getColumnNameAndConfig)(e,t);return s?.mode&&"tuple"!==s.mode?new l(i):new r(i)}e.s(["point",()=>a],51324);var u=i;function c(e,t){let n=new DataView(new ArrayBuffer(8));for(let i=0;i<8;i++)n.setUint8(i,e[t+i]);return n.getFloat64(0,!0)}function m(e){let t=function(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}(e),n=0,i=t[0];n+=1;let r=new DataView(t.buffer),s=r.getUint32(n,1===i);if(n+=4,0x20000000&s&&(r.getUint32(n,1===i),n+=4),(65535&s)==1){let e=c(t,n),i=c(t,n+=8);return n+=8,[e,i]}throw Error("Unsupported geometry type")}class d extends u.PgColumnBuilder{static [t.entityKind]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new g(e,this.config)}}class g extends u.PgColumn{static [t.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return m(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class f extends u.PgColumnBuilder{static [t.entityKind]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new h(e,this.config)}}class h extends u.PgColumn{static [t.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=m(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function p(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return r?.mode&&"tuple"!==r.mode?new f(i):new d(i)}e.s(["geometry",()=>p],51204);var y=i;class b extends y.PgColumnBuilder{static [t.entityKind]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new P(e,this.config)}}class P extends y.PgColumn{static [t.entityKind]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function C(e){return new b(e??"")}e.s(["real",()=>C],89705);var w=i;class S extends w.PgColumnBuilder{static [t.entityKind]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new T(e,this.config)}}class T extends w.PgColumn{static [t.entityKind]="PgSerial";getSQLType(){return"serial"}}function v(e){return new S(e??"")}e.s(["serial",()=>v],5694);var N=i,x=e.i(29714);class K extends x.PgIntColumnBaseBuilder{static [t.entityKind]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new B(e,this.config)}}class B extends N.PgColumn{static [t.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}function q(e){return new K(e??"")}e.s(["smallint",()=>q],19398);var $=i;class D extends $.PgColumnBuilder{static [t.entityKind]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new L(e,this.config)}}class L extends $.PgColumn{static [t.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function V(e){return new D(e??"")}e.s(["smallserial",()=>V],90352);var Q=i;class A extends Q.PgColumnBuilder{static [t.entityKind]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new z(e,this.config)}}class z extends Q.PgColumn{static [t.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function F(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return new A(i,r)}e.s(["text",()=>F],84259)},94093,23624,e=>{"use strict";var t=e.i(44988),n=e.i(69e3),i=e.i(90429),r=e.i(12122),s=e.i(2847),l=e.i(37054),o=e.i(82060),a=e.i(12592),u=e.i(56923),c=e.i(13262),m=e.i(56573),d=e.i(70988),g=e.i(296),f=e.i(1727),h=e.i(38257),p=e.i(73844),y=e.i(60328),b=e.i(2801),P=e.i(48209),C=e.i(51324),w=e.i(51204),S=e.i(89705),T=e.i(5694),v=e.i(19398),N=e.i(90352),x=e.i(84259),K=e.i(93486),B=e.i(3090),q=e.i(67751),$=e.i(4313),D=e.i(4775);class L extends D.PgColumnBuilder{static [t.entityKind]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new V(e,this.config)}}class V extends D.PgColumn{static [t.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function Q(e,t={}){let{name:n,config:i}=(0,$.getColumnNameAndConfig)(e,t);return new L(n,i)}e.s(["varchar",()=>Q],23624);var A=D;class z extends A.PgColumnBuilder{static [t.entityKind]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new F(e,this.config)}}class F extends A.PgColumn{static [t.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function O(e,t){let{name:n,config:i}=(0,$.getColumnNameAndConfig)(e,t);return new z(n,i)}var j=D;class I extends j.PgColumnBuilder{static [t.entityKind]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new k(e,this.config)}}class k extends j.PgColumn{static [t.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function E(e,t){let{name:n,config:i}=(0,$.getColumnNameAndConfig)(e,t);return new I(n,i)}var U=D;class R extends U.PgColumnBuilder{static [t.entityKind]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new _(e,this.config)}}class _ extends U.PgColumn{static [t.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function J(e,t){let{name:n,config:i}=(0,$.getColumnNameAndConfig)(e,t);return new R(n,i)}var M=D;class H extends M.PgColumnBuilder{static [t.entityKind]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new W(e,this.config)}}class W extends M.PgColumn{static [t.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function G(e,t){let{name:n,config:i}=(0,$.getColumnNameAndConfig)(e,t);return new H(n,i)}let X=Symbol.for("drizzle:PgInlineForeignKeys"),Y=Symbol.for("drizzle:EnableRLS");class Z extends n.Table{static [t.entityKind]="PgTable";static Symbol=Object.assign({},n.Table.Symbol,{InlineForeignKeys:X,EnableRLS:Y});[X]=[];[Y]=!1;[n.Table.Symbol.ExtraConfigBuilder]=void 0}let ee=(e,t,$)=>(function(e,t,$,D,L=e){let V=new Z(e,D,L),A="function"==typeof t?t({bigint:i.bigint,bigserial:r.bigserial,boolean:s.boolean,char:l.char,cidr:o.cidr,customType:a.customType,date:u.date,doublePrecision:c.doublePrecision,inet:m.inet,integer:d.integer,interval:g.interval,json:f.json,jsonb:h.jsonb,line:p.line,macaddr:y.macaddr,macaddr8:b.macaddr8,numeric:P.numeric,point:C.point,geometry:w.geometry,real:S.real,serial:T.serial,smallint:v.smallint,smallserial:N.smallserial,text:x.text,time:K.time,timestamp:B.timestamp,uuid:q.uuid,varchar:Q,bit:O,halfvec:E,sparsevec:J,vector:G}):t,z=Object.fromEntries(Object.entries(A).map(([e,t])=>{t.setName(e);let n=t.build(V);return V[X].push(...t.buildForeignKeys(n,V)),[e,n]})),F=Object.fromEntries(Object.entries(A).map(([e,t])=>(t.setName(e),[e,t.buildExtraConfigColumn(V)]))),j=Object.assign(V,z);return j[n.Table.Symbol.Columns]=z,j[n.Table.Symbol.ExtraConfigColumns]=F,$&&(j[Z.Symbol.ExtraConfigBuilder]=$),Object.assign(j,{enableRLS:()=>(j[Z.Symbol.EnableRLS]=!0,j)})})(e,t,$,void 0);e.s(["PgTable",()=>Z,"pgTable",()=>ee],94093)},75225,e=>{"use strict";var t=e.i(56325),n=e.i(44988),i=e.i(69e3),r=e.i(18899);function s(e,s){return!(0,r.isDriverValueEncoder)(s)||(0,r.isSQLWrapper)(e)||(0,n.is)(e,r.Param)||(0,n.is)(e,r.Placeholder)||(0,n.is)(e,t.Column)||(0,n.is)(e,i.Table)||(0,n.is)(e,r.View)?e:new r.Param(e,s)}let l=(e,t)=>r.sql`${e} = ${s(t,e)}`,o=(e,t)=>r.sql`${e} <> ${s(t,e)}`;function a(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new r.SQL(1===t.length?t:[new r.StringChunk("("),r.sql.join(t,new r.StringChunk(" and ")),new r.StringChunk(")")])}function u(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new r.SQL(1===t.length?t:[new r.StringChunk("("),r.sql.join(t,new r.StringChunk(" or ")),new r.StringChunk(")")])}function c(e){return r.sql`not ${e}`}let m=(e,t)=>r.sql`${e} > ${s(t,e)}`,d=(e,t)=>r.sql`${e} >= ${s(t,e)}`,g=(e,t)=>r.sql`${e} < ${s(t,e)}`,f=(e,t)=>r.sql`${e} <= ${s(t,e)}`;function h(e,t){return Array.isArray(t)?0===t.length?r.sql`false`:r.sql`${e} in ${t.map(t=>s(t,e))}`:r.sql`${e} in ${s(t,e)}`}function p(e,t){return Array.isArray(t)?0===t.length?r.sql`true`:r.sql`${e} not in ${t.map(t=>s(t,e))}`:r.sql`${e} not in ${s(t,e)}`}function y(e){return r.sql`${e} is null`}function b(e){return r.sql`${e} is not null`}function P(e){return r.sql`exists ${e}`}function C(e){return r.sql`not exists ${e}`}function w(e,t,n){return r.sql`${e} between ${s(t,e)} and ${s(n,e)}`}function S(e,t,n){return r.sql`${e} not between ${s(t,e)} and ${s(n,e)}`}function T(e,t){return r.sql`${e} like ${t}`}function v(e,t){return r.sql`${e} not like ${t}`}function N(e,t){return r.sql`${e} ilike ${t}`}function x(e,t){return r.sql`${e} not ilike ${t}`}function K(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("arrayContains requires at least one value");let n=r.sql`${s(t,e)}`;return r.sql`${e} @> ${n}`}return r.sql`${e} @> ${s(t,e)}`}function B(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("arrayContained requires at least one value");let n=r.sql`${s(t,e)}`;return r.sql`${e} <@ ${n}`}return r.sql`${e} <@ ${s(t,e)}`}function q(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("arrayOverlaps requires at least one value");let n=r.sql`${s(t,e)}`;return r.sql`${e} && ${n}`}return r.sql`${e} && ${s(t,e)}`}e.s(["and",()=>a,"arrayContained",()=>B,"arrayContains",()=>K,"arrayOverlaps",()=>q,"between",()=>w,"bindIfParam",()=>s,"eq",()=>l,"exists",()=>P,"gt",()=>m,"gte",()=>d,"ilike",()=>N,"inArray",()=>h,"isNotNull",()=>b,"isNull",()=>y,"like",()=>T,"lt",()=>g,"lte",()=>f,"ne",()=>o,"not",()=>c,"notBetween",()=>S,"notExists",()=>C,"notIlike",()=>x,"notInArray",()=>p,"notLike",()=>v,"or",()=>u])},49129,e=>{"use strict";var t=e.i(18899);function n(e){return t.sql`${e} asc`}function i(e){return t.sql`${e} desc`}e.s(["asc",()=>n,"desc",()=>i])},79822,e=>{"use strict";var t=e.i(69e3),n=e.i(56325),i=e.i(44988),r=e.i(94093);class s{static [i.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new l(e,this.columns,this.name)}}class l{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static [i.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[r.PgTable.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}var o=e.i(75225),a=e.i(49129),u=e.i(18899);class c{constructor(e,n,i){this.sourceTable=e,this.referencedTable=n,this.relationName=i,this.referencedTableName=n[t.Table.Symbol.Name]}static [i.entityKind]="Relation";referencedTableName;fieldName}class m{constructor(e,t){this.table=e,this.config=t}static [i.entityKind]="Relations"}class d extends c{constructor(e,t,n,i){super(e,t,n?.relationName),this.config=n,this.isNullable=i}static [i.entityKind]="One";withFieldName(e){let t=new d(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class g extends c{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static [i.entityKind]="Many";withFieldName(e){let t=new g(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function f(){return{and:o.and,between:o.between,eq:o.eq,exists:o.exists,gt:o.gt,gte:o.gte,ilike:o.ilike,inArray:o.inArray,isNull:o.isNull,isNotNull:o.isNotNull,like:o.like,lt:o.lt,lte:o.lte,ne:o.ne,not:o.not,notBetween:o.notBetween,notExists:o.notExists,notLike:o.notLike,notIlike:o.notIlike,notInArray:o.notInArray,or:o.or,sql:u.sql}}function h(){return{sql:u.sql,asc:a.asc,desc:a.desc}}function p(e,n){1===Object.keys(e).length&&"default"in e&&!(0,i.is)(e.default,t.Table)&&(e=e.default);let r={},l={},o={};for(let[a,u]of Object.entries(e))if((0,i.is)(u,t.Table)){let e=(0,t.getTableUniqueName)(u),n=l[e];for(let i of(r[e]=a,o[a]={tsName:a,dbName:u[t.Table.Symbol.Name],schema:u[t.Table.Symbol.Schema],columns:u[t.Table.Symbol.Columns],relations:n?.relations??{},primaryKey:n?.primaryKey??[]},Object.values(u[t.Table.Symbol.Columns])))i.primary&&o[a].primaryKey.push(i);let c=u[t.Table.Symbol.ExtraConfigBuilder]?.(u[t.Table.Symbol.ExtraConfigColumns]);if(c)for(let e of Object.values(c))(0,i.is)(e,s)&&o[a].primaryKey.push(...e.columns)}else if((0,i.is)(u,m)){let e,i=(0,t.getTableUniqueName)(u.table),s=r[i];for(let[t,r]of Object.entries(u.config(n(u.table))))if(s){let n=o[s];n.relations[t]=r,e&&n.primaryKey.push(...e)}else i in l||(l[i]={relations:{},primaryKey:e}),l[i].relations[t]=r}return{tables:o,tableNamesMap:r}}function y(e,t){return new m(e,e=>Object.fromEntries(Object.entries(t(e)).map(([e,t])=>[e,t.withFieldName(e)])))}function b(e){return function(t,n){return new d(e,t,n,n?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)}}function P(e){return function(t,n){return new g(e,t,n)}}function C(e,n,r){if((0,i.is)(r,d)&&r.config)return{fields:r.config.fields,references:r.config.references};let s=n[(0,t.getTableUniqueName)(r.referencedTable)];if(!s)throw Error(`Table "${r.referencedTable[t.Table.Symbol.Name]}" not found in schema`);let l=e[s];if(!l)throw Error(`Table "${s}" not found in schema`);let o=r.sourceTable,a=n[(0,t.getTableUniqueName)(o)];if(!a)throw Error(`Table "${o[t.Table.Symbol.Name]}" not found in schema`);let u=[];for(let e of Object.values(l.relations))(r.relationName&&r!==e&&e.relationName===r.relationName||!r.relationName&&e.referencedTable===r.sourceTable)&&u.push(e);if(u.length>1)throw r.relationName?Error(`There are multiple relations with name "${r.relationName}" in table "${s}"`):Error(`There are multiple relations between "${s}" and "${r.sourceTable[t.Table.Symbol.Name]}". Please specify relation name`);if(u[0]&&(0,i.is)(u[0],d)&&u[0].config)return{fields:u[0].config.references,references:u[0].config.fields};throw Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}function w(e){return{one:b(e),many:P(e)}}e.s(["Many",()=>g,"One",()=>d,"Relation",()=>c,"Relations",()=>m,"createMany",()=>P,"createOne",()=>b,"createTableRelationsHelpers",()=>w,"extractTablesRelationalConfig",()=>p,"getOperators",()=>f,"getOrderByOperators",()=>h,"mapRelationalRow",()=>function e(t,r,s,l,o=e=>e){let a={};for(let[c,m]of l.entries())if(m.isJson){let n=r.relations[m.tsKey],l=s[c],u="string"==typeof l?JSON.parse(l):l;a[m.tsKey]=(0,i.is)(n,d)?u&&e(t,t[m.relationTableTsKey],u,m.selection,o):u.map(n=>e(t,t[m.relationTableTsKey],n,m.selection,o))}else{let e,t=o(s[c]),r=m.field;e=(0,i.is)(r,n.Column)?r:(0,i.is)(r,u.SQL)?r.decoder:r.sql.decoder,a[m.tsKey]=null===t?null:e.mapFromDriverValue(t)}return a},"normalizeRelation",()=>C,"relations",()=>y],79822)}];

//# sourceMappingURL=node_modules_drizzle-orm_160099c2._.js.map