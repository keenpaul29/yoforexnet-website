module.exports=[844988,e=>{"use strict";let t=Symbol.for("drizzle:entityKind"),n=Symbol.for("drizzle:hasOwnEntityKind");function i(e,n){if(!e||"object"!=typeof e)return!1;if(e instanceof n)return!0;if(!Object.prototype.hasOwnProperty.call(n,t))throw Error(`Class "${n.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(e).constructor;if(i)for(;i;){if(t in i&&i[t]===n[t])return!0;i=Object.getPrototypeOf(i)}return!1}e.s(["entityKind",()=>t,"hasOwnEntityKind",()=>n,"is",()=>i])},307932,398020,e=>{"use strict";var t=e.i(844988);class n{static [t.entityKind]="ConsoleLogWriter";write(e){console.log(e)}}class i{static [t.entityKind]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new n}logQuery(e,t){let n=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),i=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}}class r{static [t.entityKind]="NoopLogger";logQuery(){}}e.s(["ConsoleLogWriter",()=>n,"DefaultLogger",()=>i,"NoopLogger",()=>r],307932);class s{static [t.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}e.s(["QueryPromise",()=>s],398020)},5672,156325,643179,304775,792352,722360,88274,369e3,518899,e=>{"use strict";let t,n;var i,r=e.i(844988);class s{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [r.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}e.s(["Column",()=>s],156325);class o{static [r.entityKind]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}e.s(["ColumnBuilder",()=>o],643179);let l=Symbol.for("drizzle:Name");class a{static [r.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new u(e,this)}}class u{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [r.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),r=n.map(e=>e.name),s=[this.table[l],...i,n[0].table[l],...r];return e??`${s.join("_")}_fk`}}function c(e,...t){return e(...t)}function m(e,t){return`${e[l]}_${t.join("_")}_unique`}class d{constructor(e,t){this.name=t,this.columns=e}static [r.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new f(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class g{static [r.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new d(e,this.name)}}class f{constructor(e,t,n,i){this.table=e,this.columns=t,this.name=i??m(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}static [r.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function h(e,t,n){for(let i=t;i<e.length;i++){let r=e[i];if("\\"===r){i++;continue}if('"'===r)return[e.slice(t,i).replace(/\\/g,""),i+1];if(!n&&(","===r||"}"===r))return[e.slice(t,i).replace(/\\/g,""),i]}return[e.slice(t).replace(/\\/g,""),e.length]}class p extends o{foreignKeyConfigs=[];static [r.entityKind]="PgColumnBuilder";array(e){return new C(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>c((n,i)=>{let r=new a(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&r.onUpdate(i.onUpdate),i.onDelete&&r.onDelete(i.onDelete),r.build(t)},n,i))}buildExtraConfigColumn(e){return new b(e,this.config)}}class y extends s{constructor(e,t){t.uniqueName||(t.uniqueName=m(e,[t.name])),super(e,t),this.table=e}static [r.entityKind]="PgColumn"}class b extends y{static [r.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class P{static [r.entityKind]="IndexedColumn";constructor(e,t,n,i){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=i}name;keyAsName;type;indexConfig}class C extends p{static [r.entityKind]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new w(e,this.config,t)}}class w extends y{constructor(e,t,n,i){super(e,t),this.baseColumn=n,this.range=i,this.size=t.size}size;static [r.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,n=0){let i=[],r=n,s=!1;for(;r<t.length;){let o=t[r];if(","===o){(s||r===n)&&i.push(""),s=!0,r++;continue}if(s=!1,"\\"===o){r+=2;continue}if('"'===o){let[e,n]=h(t,r+1,!0);i.push(e),r=n;continue}if("}"===o)return[i,r+1];if("{"===o){let[n,s]=e(t,r+1);i.push(n),r=s;continue}let[l,a]=h(t,r,!1);i.push(l),r=a}return[i,r]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let n=e.map(e=>null===e?null:(0,r.is)(this.baseColumn,w)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?n:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(n)}}e.s(["IndexedColumn",()=>P,"PgColumn",()=>y,"PgColumnBuilder",()=>p],304775);let S=Symbol.for("drizzle:isPgEnum");class T extends p{static [r.entityKind]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new v(e,this.config)}}class v extends y{static [r.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}class N{static [r.entityKind]="Subquery";constructor(e,t,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:i}}}class x extends N{static [r.entityKind]="WithSubquery"}e.s(["Subquery",()=>N,"WithSubquery",()=>x],792352);let K={startActiveSpan:(e,i)=>t?(n||(n=t.trace.getTracer("drizzle-orm","0.39.1")),c((t,n)=>n.startActiveSpan(e,e=>{try{return i(e)}catch(n){throw e.setStatus({code:t.SpanStatusCode.ERROR,message:n instanceof Error?n.message:"Unknown error"}),n}finally{e.end()}}),t,n)):i()};e.s(["tracer",()=>K],722360);let B=Symbol.for("drizzle:ViewBaseConfig");e.s(["ViewBaseConfig",()=>B],88274);let $=Symbol.for("drizzle:Schema"),q=Symbol.for("drizzle:Columns"),D=Symbol.for("drizzle:ExtraConfigColumns"),L=Symbol.for("drizzle:OriginalName"),V=Symbol.for("drizzle:BaseName"),A=Symbol.for("drizzle:IsAlias"),Q=Symbol.for("drizzle:ExtraConfigBuilder"),z=Symbol.for("drizzle:IsDrizzleTable");class F{static [r.entityKind]="Table";static Symbol={Name:l,Schema:$,OriginalName:L,Columns:q,ExtraConfigColumns:D,BaseName:V,IsAlias:A,ExtraConfigBuilder:Q};[l];[L];[$];[q];[D];[V];[A]=!1;[z]=!0;[Q]=void 0;constructor(e,t,n){this[l]=this[L]=e,this[$]=t,this[V]=n}}function O(e){return"object"==typeof e&&null!==e&&z in e}function j(e){return e[l]}function I(e){return`${e[$]??"public"}.${e[l]}`}e.s(["BaseName",()=>V,"Columns",()=>q,"ExtraConfigBuilder",()=>Q,"ExtraConfigColumns",()=>D,"IsAlias",()=>A,"OriginalName",()=>L,"Schema",()=>$,"Table",()=>F,"getTableName",()=>j,"getTableUniqueName",()=>I,"isTable",()=>O],369e3);class k{static [r.entityKind]="FakePrimitiveParam"}function E(e){return null!=e&&"function"==typeof e.getSQL}class U{static [r.entityKind]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new R([this])}}class R{constructor(e){this.queryChunks=e}static [r.entityKind]="SQL";decoder=H;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return K.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:i,escapeName:o,escapeParam:l,prepareTyping:a,inlineParams:u,paramStartIndex:c}=n;var m=e.map(e=>{if((0,r.is)(e,U))return{sql:e.value.join(""),params:[]};if((0,r.is)(e,_))return{sql:o(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new U("(")];for(let[n,i]of e.entries())t.push(i),n<e.length-1&&t.push(new U(", "));return t.push(new U(")")),this.buildQueryFromSourceParams(t,n)}if((0,r.is)(e,R))return this.buildQueryFromSourceParams(e.queryChunks,{...n,inlineParams:u||e.shouldInlineParams});if((0,r.is)(e,F)){let t=e[F.Symbol.Schema],n=e[F.Symbol.Name];return{sql:void 0===t||e[A]?o(n):o(t)+"."+o(n),params:[]}}if((0,r.is)(e,s)){let n=i.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:o(n),params:[]};let r=e.table[F.Symbol.Schema];return{sql:e.table[A]||void 0===r?o(e.table[F.Symbol.Name])+"."+o(n):o(r)+"."+o(e.table[F.Symbol.Name])+"."+o(n),params:[]}}if((0,r.is)(e,eo)){let t=e[B].schema,n=e[B].name;return{sql:void 0===t||e[B].isAlias?o(n):o(t)+"."+o(n),params:[]}}if((0,r.is)(e,X)){if((0,r.is)(e.value,en))return{sql:l(c.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,r.is)(t,R))return this.buildQueryFromSourceParams([t],n);if(u)return{sql:this.mapInlineParam(t,n),params:[]};let i=["none"];return a&&(i=[a(e.encoder)]),{sql:l(c.value++,t),params:[t],typings:i}}return(0,r.is)(e,en)?{sql:l(c.value++,e),params:[e],typings:["none"]}:(0,r.is)(e,R.Aliased)&&void 0!==e.fieldAlias?{sql:o(e.fieldAlias),params:[]}:(0,r.is)(e,N)?e._.isWith?{sql:o(e._.alias),params:[]}:this.buildQueryFromSourceParams([new U("("),e._.sql,new U(") "),new _(e._.alias)],n):e&&"function"==typeof e&&S in e&&!0===e[S]?e.schema?{sql:o(e.schema)+"."+o(e.enumName),params:[]}:{sql:o(e.enumName),params:[]}:E(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],n):this.buildQueryFromSourceParams([new U("("),e.getSQL(),new U(")")],n):u?{sql:this.mapInlineParam(e,n),params:[]}:{sql:l(c.value++,e),params:[e],typings:["none"]}});let d={sql:"",params:[]};for(let e of m)d.sql+=e.sql,d.params.push(...e.params),e.typings?.length&&(d.typings||(d.typings=[]),d.typings.push(...e.typings));return d}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let n=e.toString();return"[object Object]"===n?t(JSON.stringify(e)):t(n)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new R.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class _{constructor(e){this.value=e}static [r.entityKind]="Name";brand;getSQL(){return new R([this])}}function J(e){return new _(e)}function M(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}let H={mapFromDriverValue:e=>e},W={mapToDriverValue:e=>e},G={...H,...W};class X{constructor(e,t=W){this.value=e,this.encoder=t}static [r.entityKind]="Param";brand;getSQL(){return new R([this])}}function Y(e,t){return new X(e,t)}function Z(e,...t){let n=[];for(let[i,r]of((t.length>0||e.length>0&&""!==e[0])&&n.push(new U(e[0])),t.entries()))n.push(r,new U(e[i+1]));return new R(n)}(i=Z||(Z={})).empty=function(){return new R([])},i.fromList=function(e){return new R(e)},i.raw=function(e){return new R([new U(e)])},i.join=function(e,t){let n=[];for(let[i,r]of e.entries())i>0&&void 0!==t&&n.push(t),n.push(r);return new R(n)},i.identifier=function(e){return new _(e)},i.placeholder=function(e){return new en(e)},i.param=function(e,t){return new X(e,t)};var ee=R||(R={});class et{constructor(e,t){this.sql=e,this.fieldAlias=t}static [r.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new et(this.sql,this.fieldAlias)}}ee.Aliased=et;class en{constructor(e){this.name=e}static [r.entityKind]="Placeholder";getSQL(){return new R([this])}}function ei(e){return new en(e)}function er(e,t){return e.map(e=>{if((0,r.is)(e,en)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if((0,r.is)(e,X)&&(0,r.is)(e.value,en)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}let es=Symbol.for("drizzle:IsDrizzleView");class eo{static [r.entityKind]="View";[B];[es]=!0;constructor({name:e,schema:t,selectedFields:n,query:i}){this[B]={name:e,originalName:e,schema:t,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new R([this])}}function el(e){return"object"==typeof e&&null!==e&&es in e}function ea(e){return e[B].name}s.prototype.getSQL=function(){return new R([this])},F.prototype.getSQL=function(){return new R([this])},N.prototype.getSQL=function(){return new R([this])},e.s(["FakePrimitiveParam",()=>k,"Name",()=>_,"Param",()=>X,"Placeholder",()=>en,"SQL",()=>R,"StringChunk",()=>U,"View",()=>eo,"fillPlaceholders",()=>er,"getViewName",()=>ea,"isDriverValueEncoder",()=>M,"isSQLWrapper",()=>E,"isView",()=>el,"name",()=>J,"noopDecoder",()=>H,"noopEncoder",()=>W,"noopMapper",()=>G,"param",()=>Y,"placeholder",()=>ei,"sql",()=>Z],518899);class eu{constructor(e){this.table=e}static [r.entityKind]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class ec{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [r.entityKind]="TableAliasProxyHandler";get(e,t){if(t===F.Symbol.IsAlias)return!0;if(t===F.Symbol.Name||this.replaceOriginalName&&t===F.Symbol.OriginalName)return this.alias;if(t===B)return{...e[B],name:this.alias,isAlias:!0};if(t===F.Symbol.Columns){let t=e[F.Symbol.Columns];if(!t)return t;let n={};return Object.keys(t).map(i=>{n[i]=new Proxy(t[i],new eu(new Proxy(e,this)))}),n}let n=e[t];return(0,r.is)(n,s)?new Proxy(n,new eu(new Proxy(e,this))):n}}class em{constructor(e){this.alias=e}static [r.entityKind]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?ed(e.sourceTable,this.alias):e[t]}}function ed(e,t){return new Proxy(e,new ec(t,!1))}function eg(e,t){return new Proxy(e,new em(t))}function ef(e,t){return new Proxy(e,new eu(new Proxy(e.table,new ec(t,!1))))}function eh(e,t){return new R.Aliased(ep(e.sql,t),e.fieldAlias)}function ep(e,t){return Z.join(e.queryChunks.map(e=>(0,r.is)(e,s)?ef(e,t):(0,r.is)(e,R)?ep(e,t):(0,r.is)(e,R.Aliased)?eh(e,t):e))}e.s(["ColumnAliasProxyHandler",()=>eu,"RelationTableAliasProxyHandler",()=>em,"TableAliasProxyHandler",()=>ec,"aliasedRelation",()=>eg,"aliasedTable",()=>ed,"aliasedTableColumn",()=>ef,"mapColumnsInAliasedSQLToAlias",()=>eh,"mapColumnsInSQLToAlias",()=>ep],5672)},704313,e=>{"use strict";var t=e.i(156325),n=e.i(844988),i=e.i(518899),r=e.i(792352),s=e.i(369e3),o=e.i(88274);function l(e,r,o){let l={},a=e.reduce((e,{path:a,field:u},c)=>{let m;m=(0,n.is)(u,t.Column)?u:(0,n.is)(u,i.SQL)?u.decoder:u.sql.decoder;let d=e;for(let[e,i]of a.entries())if(e<a.length-1)i in d||(d[i]={}),d=d[i];else{let e=r[c],g=d[i]=null===e?null:m.mapFromDriverValue(e);if(o&&(0,n.is)(u,t.Column)&&2===a.length){let e=a[0];e in l?"string"==typeof l[e]&&l[e]!==(0,s.getTableName)(u.table)&&(l[e]=!1):l[e]=null===g&&(0,s.getTableName)(u.table)}}return e},{});if(o&&Object.keys(l).length>0)for(let[e,t]of Object.entries(l))"string"!=typeof t||o[t]||(a[e]=null);return a}function a(e,t){let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let[e,t]of n.entries())if(t!==i[e])return!1;return!0}function u(e,r){let o=Object.entries(r).filter(([,e])=>void 0!==e).map(([r,o])=>(0,n.is)(o,i.SQL)||(0,n.is)(o,t.Column)?[r,o]:[r,new i.Param(o,e[s.Table.Symbol.Columns][r])]);if(0===o.length)throw Error("No values to set");return Object.fromEntries(o)}function c(e,t){for(let n of t)for(let t of Object.getOwnPropertyNames(n.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(n.prototype,t)||Object.create(null))}function m(e){return e[s.Table.Symbol.Columns]}function d(e){return e[o.ViewBaseConfig].selectedFields}function g(e){return(0,n.is)(e,r.Subquery)?e._.alias:(0,n.is)(e,i.View)?e[o.ViewBaseConfig].name:(0,n.is)(e,i.SQL)?void 0:e[s.Table.Symbol.IsAlias]?e[s.Table.Symbol.Name]:e[s.Table.Symbol.BaseName]}function f(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}function h(e){if("object"!=typeof e||null===e||"Object"!==e.constructor.name)return!1;if("logger"in e){let t=typeof e.logger;return"boolean"===t||"object"===t&&"function"==typeof e.logger.logQuery||"undefined"===t}if("schema"in e){let t=typeof e.logger;return"object"===t||"undefined"===t}if("casing"in e){let t=typeof e.logger;return"string"===t||"undefined"===t}if("mode"in e)return"default"===e.mode&&"planetscale"===e.mode&&void 0===e.mode;if("connection"in e){let t=typeof e.connection;return"string"===t||"object"===t||"undefined"===t}if("client"in e){let t=typeof e.client;return"object"===t||"function"===t||"undefined"===t}return 0===Object.keys(e).length}e.s(["applyMixins",()=>c,"getColumnNameAndConfig",()=>f,"getTableColumns",()=>m,"getTableLikeName",()=>g,"getViewSelectedFields",()=>d,"haveSameKeys",()=>a,"isConfig",()=>h,"mapResultRow",()=>l,"mapUpdateSet",()=>u,"orderSelectedFields",()=>function e(r,o){return Object.entries(r).reduce((r,[l,a])=>{if("string"!=typeof l)return r;let u=o?[...o,l]:[l];return(0,n.is)(a,t.Column)||(0,n.is)(a,i.SQL)||(0,n.is)(a,i.SQL.Aliased)?r.push({path:u,field:a}):(0,n.is)(a,s.Table)?r.push(...e(a[s.Table.Symbol.Columns],u)):r.push(...e(a,u)),r},[])}])},71783,e=>{"use strict";var t=e.i(844988);class n extends Error{static [t.entityKind]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class i extends n{static [t.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}e.s(["DrizzleError",()=>n,"TransactionRollbackError",()=>i])},556923,441248,e=>{"use strict";var t=e.i(844988),n=e.i(704313),i=e.i(304775),r=e.i(518899),s=i;class o extends s.PgColumnBuilder{static [t.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(r.sql`now()`)}}e.s(["PgDateColumnBaseBuilder",()=>o],441248);class l extends o{static [t.entityKind]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new a(e,this.config)}}class a extends i.PgColumn{static [t.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class u extends o{static [t.entityKind]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new c(e,this.config)}}class c extends i.PgColumn{static [t.entityKind]="PgDateString";getSQLType(){return"date"}}function m(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return r?.mode==="date"?new l(i):new u(i)}e.s(["PgDate",()=>a,"PgDateString",()=>c,"date",()=>m],556923)},501727,438257,e=>{"use strict";var t=e.i(844988),n=e.i(304775);class i extends n.PgColumnBuilder{static [t.entityKind]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new r(e,this.config)}}class r extends n.PgColumn{static [t.entityKind]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function s(e){return new i(e??"")}e.s(["PgJson",()=>r,"json",()=>s],501727);var o=n;class l extends o.PgColumnBuilder{static [t.entityKind]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new a(e,this.config)}}class a extends o.PgColumn{static [t.entityKind]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function u(e){return new l(e??"")}e.s(["PgJsonb",()=>a,"jsonb",()=>u],438257)},848209,e=>{"use strict";var t=e.i(844988),n=e.i(704313),i=e.i(304775);class r extends i.PgColumnBuilder{static [t.entityKind]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new s(e,this.config)}}class s extends i.PgColumn{static [t.entityKind]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function o(e,t){let{name:i,config:s}=(0,n.getColumnNameAndConfig)(e,t);return new r(i,s?.precision,s?.scale)}e.s(["PgNumeric",()=>s,"numeric",()=>o])},593486,303090,467751,e=>{"use strict";var t=e.i(844988),n=e.i(704313),i=e.i(304775),r=e.i(441248);class s extends r.PgDateColumnBaseBuilder{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static [t.entityKind]="PgTimeBuilder";build(e){return new o(e,this.config)}}class o extends i.PgColumn{static [t.entityKind]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}function l(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return new s(i,r.withTimezone??!1,r.precision)}e.s(["PgTime",()=>o,"time",()=>l],593486);var a=i,u=r;class c extends u.PgDateColumnBaseBuilder{static [t.entityKind]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new m(e,this.config)}}class m extends a.PgColumn{static [t.entityKind]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class d extends u.PgDateColumnBaseBuilder{static [t.entityKind]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new g(e,this.config)}}class g extends a.PgColumn{static [t.entityKind]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}function f(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return r?.mode==="string"?new d(i,r.withTimezone??!1,r.precision):new c(i,r?.withTimezone??!1,r?.precision)}e.s(["PgTimestamp",()=>m,"PgTimestampString",()=>g,"timestamp",()=>f],303090);var h=e.i(518899),p=i;class y extends p.PgColumnBuilder{static [t.entityKind]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(h.sql`gen_random_uuid()`)}build(e){return new b(e,this.config)}}class b extends p.PgColumn{static [t.entityKind]="PgUUID";getSQLType(){return"uuid"}}function P(e){return new y(e??"")}e.s(["PgUUID",()=>b,"uuid",()=>P],467751)},690429,29714,712122,802847,137054,982060,112592,e=>{"use strict";var t=e.i(844988),n=e.i(704313),i=e.i(304775),r=i;class s extends r.PgColumnBuilder{static [t.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}e.s(["PgIntColumnBaseBuilder",()=>s],29714);class o extends s{static [t.entityKind]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new l(e,this.config)}}class l extends i.PgColumn{static [t.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class a extends s{static [t.entityKind]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new u(e,this.config)}}class u extends i.PgColumn{static [t.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function c(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return"number"===r.mode?new o(i):new a(i)}e.s(["bigint",()=>c],690429);var m=i;class d extends m.PgColumnBuilder{static [t.entityKind]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new g(e,this.config)}}class g extends m.PgColumn{static [t.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class f extends m.PgColumnBuilder{static [t.entityKind]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new h(e,this.config)}}class h extends m.PgColumn{static [t.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function p(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return"number"===r.mode?new d(i):new f(i)}e.s(["bigserial",()=>p],712122);var y=i;class b extends y.PgColumnBuilder{static [t.entityKind]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new P(e,this.config)}}class P extends y.PgColumn{static [t.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function C(e){return new b(e??"")}e.s(["boolean",()=>C],802847);var w=i;class S extends w.PgColumnBuilder{static [t.entityKind]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new T(e,this.config)}}class T extends w.PgColumn{static [t.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function v(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return new S(i,r)}e.s(["char",()=>v],137054);var N=i;class x extends N.PgColumnBuilder{static [t.entityKind]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new K(e,this.config)}}class K extends N.PgColumn{static [t.entityKind]="PgCidr";getSQLType(){return"cidr"}}function B(e){return new x(e??"")}e.s(["cidr",()=>B],982060);var $=i;class q extends $.PgColumnBuilder{static [t.entityKind]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new D(e,this.config)}}class D extends $.PgColumn{static [t.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function L(e){return(t,i)=>{let{name:r,config:s}=(0,n.getColumnNameAndConfig)(t,i);return new q(r,s,e)}}e.s(["customType",()=>L],112592)},613262,656573,870988,296,e=>{"use strict";var t=e.i(844988),n=e.i(304775);class i extends n.PgColumnBuilder{static [t.entityKind]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new r(e,this.config)}}class r extends n.PgColumn{static [t.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function s(e){return new i(e??"")}e.s(["doublePrecision",()=>s],613262);var o=n;class l extends o.PgColumnBuilder{static [t.entityKind]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new a(e,this.config)}}class a extends o.PgColumn{static [t.entityKind]="PgInet";getSQLType(){return"inet"}}function u(e){return new l(e??"")}e.s(["inet",()=>u],656573);var c=n,m=e.i(29714);class d extends m.PgIntColumnBaseBuilder{static [t.entityKind]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new g(e,this.config)}}class g extends c.PgColumn{static [t.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function f(e){return new d(e??"")}e.s(["integer",()=>f],870988);var h=e.i(704313),p=n;class y extends p.PgColumnBuilder{static [t.entityKind]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new b(e,this.config)}}class b extends p.PgColumn{static [t.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function P(e,t={}){let{name:n,config:i}=(0,h.getColumnNameAndConfig)(e,t);return new y(n,i)}e.s(["interval",()=>P],296)},773844,560328,402801,e=>{"use strict";var t=e.i(844988),n=e.i(704313),i=e.i(304775);class r extends i.PgColumnBuilder{static [t.entityKind]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new s(e,this.config)}}class s extends i.PgColumn{static [t.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class o extends i.PgColumnBuilder{static [t.entityKind]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new l(e,this.config)}}class l extends i.PgColumn{static [t.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function a(e,t){let{name:i,config:s}=(0,n.getColumnNameAndConfig)(e,t);return s?.mode&&"tuple"!==s.mode?new o(i):new r(i)}e.s(["line",()=>a],773844);var u=i;class c extends u.PgColumnBuilder{static [t.entityKind]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new m(e,this.config)}}class m extends u.PgColumn{static [t.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function d(e){return new c(e??"")}e.s(["macaddr",()=>d],560328);var g=i;class f extends g.PgColumnBuilder{static [t.entityKind]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new h(e,this.config)}}class h extends g.PgColumn{static [t.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function p(e){return new f(e??"")}e.s(["macaddr8",()=>p],402801)},951324,651204,389705,405694,119398,90352,484259,e=>{"use strict";var t=e.i(844988),n=e.i(704313),i=e.i(304775);class r extends i.PgColumnBuilder{static [t.entityKind]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new s(e,this.config)}}class s extends i.PgColumn{static [t.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class o extends i.PgColumnBuilder{static [t.entityKind]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new l(e,this.config)}}class l extends i.PgColumn{static [t.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function a(e,t){let{name:i,config:s}=(0,n.getColumnNameAndConfig)(e,t);return s?.mode&&"tuple"!==s.mode?new o(i):new r(i)}e.s(["point",()=>a],951324);var u=i;function c(e,t){let n=new DataView(new ArrayBuffer(8));for(let i=0;i<8;i++)n.setUint8(i,e[t+i]);return n.getFloat64(0,!0)}function m(e){let t=function(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}(e),n=0,i=t[0];n+=1;let r=new DataView(t.buffer),s=r.getUint32(n,1===i);if(n+=4,0x20000000&s&&(r.getUint32(n,1===i),n+=4),(65535&s)==1){let e=c(t,n),i=c(t,n+=8);return n+=8,[e,i]}throw Error("Unsupported geometry type")}class d extends u.PgColumnBuilder{static [t.entityKind]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new g(e,this.config)}}class g extends u.PgColumn{static [t.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return m(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class f extends u.PgColumnBuilder{static [t.entityKind]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new h(e,this.config)}}class h extends u.PgColumn{static [t.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=m(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function p(e,t){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return r?.mode&&"tuple"!==r.mode?new f(i):new d(i)}e.s(["geometry",()=>p],651204);var y=i;class b extends y.PgColumnBuilder{static [t.entityKind]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new P(e,this.config)}}class P extends y.PgColumn{static [t.entityKind]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function C(e){return new b(e??"")}e.s(["real",()=>C],389705);var w=i;class S extends w.PgColumnBuilder{static [t.entityKind]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new T(e,this.config)}}class T extends w.PgColumn{static [t.entityKind]="PgSerial";getSQLType(){return"serial"}}function v(e){return new S(e??"")}e.s(["serial",()=>v],405694);var N=i,x=e.i(29714);class K extends x.PgIntColumnBaseBuilder{static [t.entityKind]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new B(e,this.config)}}class B extends N.PgColumn{static [t.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}function $(e){return new K(e??"")}e.s(["smallint",()=>$],119398);var q=i;class D extends q.PgColumnBuilder{static [t.entityKind]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new L(e,this.config)}}class L extends q.PgColumn{static [t.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function V(e){return new D(e??"")}e.s(["smallserial",()=>V],90352);var A=i;class Q extends A.PgColumnBuilder{static [t.entityKind]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new z(e,this.config)}}class z extends A.PgColumn{static [t.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function F(e,t={}){let{name:i,config:r}=(0,n.getColumnNameAndConfig)(e,t);return new Q(i,r)}e.s(["text",()=>F],484259)},144902,923624,794093,e=>{"use strict";var t=e.i(844988),n=e.i(369e3),i=e.i(690429),r=e.i(712122),s=e.i(802847),o=e.i(137054),l=e.i(982060),a=e.i(112592),u=e.i(556923),c=e.i(613262),m=e.i(656573),d=e.i(870988),g=e.i(296),f=e.i(501727),h=e.i(438257),p=e.i(773844),y=e.i(560328),b=e.i(402801),P=e.i(848209),C=e.i(951324),w=e.i(651204),S=e.i(389705),T=e.i(405694),v=e.i(119398),N=e.i(90352),x=e.i(484259),K=e.i(593486),B=e.i(303090),$=e.i(467751),q=e.i(704313),D=e.i(304775);class L extends D.PgColumnBuilder{static [t.entityKind]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new V(e,this.config)}}class V extends D.PgColumn{static [t.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function A(e,t={}){let{name:n,config:i}=(0,q.getColumnNameAndConfig)(e,t);return new L(n,i)}e.s(["varchar",()=>A],923624);var Q=D;class z extends Q.PgColumnBuilder{static [t.entityKind]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new F(e,this.config)}}class F extends Q.PgColumn{static [t.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function O(e,t){let{name:n,config:i}=(0,q.getColumnNameAndConfig)(e,t);return new z(n,i)}var j=D;class I extends j.PgColumnBuilder{static [t.entityKind]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new k(e,this.config)}}class k extends j.PgColumn{static [t.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function E(e,t){let{name:n,config:i}=(0,q.getColumnNameAndConfig)(e,t);return new I(n,i)}var U=D;class R extends U.PgColumnBuilder{static [t.entityKind]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new _(e,this.config)}}class _ extends U.PgColumn{static [t.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function J(e,t){let{name:n,config:i}=(0,q.getColumnNameAndConfig)(e,t);return new R(n,i)}var M=D;class H extends M.PgColumnBuilder{static [t.entityKind]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new W(e,this.config)}}class W extends M.PgColumn{static [t.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function G(e,t){let{name:n,config:i}=(0,q.getColumnNameAndConfig)(e,t);return new H(n,i)}let X=Symbol.for("drizzle:PgInlineForeignKeys"),Y=Symbol.for("drizzle:EnableRLS");class Z extends n.Table{static [t.entityKind]="PgTable";static Symbol=Object.assign({},n.Table.Symbol,{InlineForeignKeys:X,EnableRLS:Y});[X]=[];[Y]=!1;[n.Table.Symbol.ExtraConfigBuilder]=void 0}let ee=(e,t,q)=>(function(e,t,q,D,L=e){let V=new Z(e,D,L),Q="function"==typeof t?t({bigint:i.bigint,bigserial:r.bigserial,boolean:s.boolean,char:o.char,cidr:l.cidr,customType:a.customType,date:u.date,doublePrecision:c.doublePrecision,inet:m.inet,integer:d.integer,interval:g.interval,json:f.json,jsonb:h.jsonb,line:p.line,macaddr:y.macaddr,macaddr8:b.macaddr8,numeric:P.numeric,point:C.point,geometry:w.geometry,real:S.real,serial:T.serial,smallint:v.smallint,smallserial:N.smallserial,text:x.text,time:K.time,timestamp:B.timestamp,uuid:$.uuid,varchar:A,bit:O,halfvec:E,sparsevec:J,vector:G}):t,z=Object.fromEntries(Object.entries(Q).map(([e,t])=>{t.setName(e);let n=t.build(V);return V[X].push(...t.buildForeignKeys(n,V)),[e,n]})),F=Object.fromEntries(Object.entries(Q).map(([e,t])=>(t.setName(e),[e,t.buildExtraConfigColumn(V)]))),j=Object.assign(V,z);return j[n.Table.Symbol.Columns]=z,j[n.Table.Symbol.ExtraConfigColumns]=F,q&&(j[Z.Symbol.ExtraConfigBuilder]=q),Object.assign(j,{enableRLS:()=>(j[Z.Symbol.EnableRLS]=!0,j)})})(e,t,q,void 0);e.s(["PgTable",()=>Z,"pgTable",()=>ee],794093);class et{static [t.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new en(e,this.columns,this.name)}}class en{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static [t.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Z.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}e.s(["PrimaryKeyBuilder",()=>et],144902)},875225,349129,e=>{"use strict";var t=e.i(156325),n=e.i(844988),i=e.i(369e3),r=e.i(518899);function s(e,s){return!(0,r.isDriverValueEncoder)(s)||(0,r.isSQLWrapper)(e)||(0,n.is)(e,r.Param)||(0,n.is)(e,r.Placeholder)||(0,n.is)(e,t.Column)||(0,n.is)(e,i.Table)||(0,n.is)(e,r.View)?e:new r.Param(e,s)}let o=(e,t)=>r.sql`${e} = ${s(t,e)}`,l=(e,t)=>r.sql`${e} <> ${s(t,e)}`;function a(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new r.SQL(1===t.length?t:[new r.StringChunk("("),r.sql.join(t,new r.StringChunk(" and ")),new r.StringChunk(")")])}function u(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new r.SQL(1===t.length?t:[new r.StringChunk("("),r.sql.join(t,new r.StringChunk(" or ")),new r.StringChunk(")")])}function c(e){return r.sql`not ${e}`}let m=(e,t)=>r.sql`${e} > ${s(t,e)}`,d=(e,t)=>r.sql`${e} >= ${s(t,e)}`,g=(e,t)=>r.sql`${e} < ${s(t,e)}`,f=(e,t)=>r.sql`${e} <= ${s(t,e)}`;function h(e,t){return Array.isArray(t)?0===t.length?r.sql`false`:r.sql`${e} in ${t.map(t=>s(t,e))}`:r.sql`${e} in ${s(t,e)}`}function p(e,t){return Array.isArray(t)?0===t.length?r.sql`true`:r.sql`${e} not in ${t.map(t=>s(t,e))}`:r.sql`${e} not in ${s(t,e)}`}function y(e){return r.sql`${e} is null`}function b(e){return r.sql`${e} is not null`}function P(e){return r.sql`exists ${e}`}function C(e){return r.sql`not exists ${e}`}function w(e,t,n){return r.sql`${e} between ${s(t,e)} and ${s(n,e)}`}function S(e,t,n){return r.sql`${e} not between ${s(t,e)} and ${s(n,e)}`}function T(e,t){return r.sql`${e} like ${t}`}function v(e,t){return r.sql`${e} not like ${t}`}function N(e,t){return r.sql`${e} ilike ${t}`}function x(e,t){return r.sql`${e} not ilike ${t}`}function K(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("arrayContains requires at least one value");let n=r.sql`${s(t,e)}`;return r.sql`${e} @> ${n}`}return r.sql`${e} @> ${s(t,e)}`}function B(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("arrayContained requires at least one value");let n=r.sql`${s(t,e)}`;return r.sql`${e} <@ ${n}`}return r.sql`${e} <@ ${s(t,e)}`}function $(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("arrayOverlaps requires at least one value");let n=r.sql`${s(t,e)}`;return r.sql`${e} && ${n}`}return r.sql`${e} && ${s(t,e)}`}function q(e){return r.sql`${e} asc`}function D(e){return r.sql`${e} desc`}e.s(["and",()=>a,"arrayContained",()=>B,"arrayContains",()=>K,"arrayOverlaps",()=>$,"between",()=>w,"bindIfParam",()=>s,"eq",()=>o,"exists",()=>P,"gt",()=>m,"gte",()=>d,"ilike",()=>N,"inArray",()=>h,"isNotNull",()=>b,"isNull",()=>y,"like",()=>T,"lt",()=>g,"lte",()=>f,"ne",()=>l,"not",()=>c,"notBetween",()=>S,"notExists",()=>C,"notIlike",()=>x,"notInArray",()=>p,"notLike",()=>v,"or",()=>u],875225),e.s(["asc",()=>q,"desc",()=>D],349129)},479822,e=>{"use strict";var t=e.i(369e3),n=e.i(156325),i=e.i(844988),r=e.i(144902),s=e.i(875225),o=e.i(349129),l=e.i(518899);class a{constructor(e,n,i){this.sourceTable=e,this.referencedTable=n,this.relationName=i,this.referencedTableName=n[t.Table.Symbol.Name]}static [i.entityKind]="Relation";referencedTableName;fieldName}class u{constructor(e,t){this.table=e,this.config=t}static [i.entityKind]="Relations"}class c extends a{constructor(e,t,n,i){super(e,t,n?.relationName),this.config=n,this.isNullable=i}static [i.entityKind]="One";withFieldName(e){let t=new c(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class m extends a{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static [i.entityKind]="Many";withFieldName(e){let t=new m(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function d(){return{and:s.and,between:s.between,eq:s.eq,exists:s.exists,gt:s.gt,gte:s.gte,ilike:s.ilike,inArray:s.inArray,isNull:s.isNull,isNotNull:s.isNotNull,like:s.like,lt:s.lt,lte:s.lte,ne:s.ne,not:s.not,notBetween:s.notBetween,notExists:s.notExists,notLike:s.notLike,notIlike:s.notIlike,notInArray:s.notInArray,or:s.or,sql:l.sql}}function g(){return{sql:l.sql,asc:o.asc,desc:o.desc}}function f(e,n){1===Object.keys(e).length&&"default"in e&&!(0,i.is)(e.default,t.Table)&&(e=e.default);let s={},o={},l={};for(let[a,c]of Object.entries(e))if((0,i.is)(c,t.Table)){let e=(0,t.getTableUniqueName)(c),n=o[e];for(let i of(s[e]=a,l[a]={tsName:a,dbName:c[t.Table.Symbol.Name],schema:c[t.Table.Symbol.Schema],columns:c[t.Table.Symbol.Columns],relations:n?.relations??{},primaryKey:n?.primaryKey??[]},Object.values(c[t.Table.Symbol.Columns])))i.primary&&l[a].primaryKey.push(i);let u=c[t.Table.Symbol.ExtraConfigBuilder]?.(c[t.Table.Symbol.ExtraConfigColumns]);if(u)for(let e of Object.values(u))(0,i.is)(e,r.PrimaryKeyBuilder)&&l[a].primaryKey.push(...e.columns)}else if((0,i.is)(c,u)){let e,i=(0,t.getTableUniqueName)(c.table),r=s[i];for(let[t,s]of Object.entries(c.config(n(c.table))))if(r){let n=l[r];n.relations[t]=s,e&&n.primaryKey.push(...e)}else i in o||(o[i]={relations:{},primaryKey:e}),o[i].relations[t]=s}return{tables:l,tableNamesMap:s}}function h(e,t){return new u(e,e=>Object.fromEntries(Object.entries(t(e)).map(([e,t])=>[e,t.withFieldName(e)])))}function p(e){return function(t,n){return new c(e,t,n,n?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)}}function y(e){return function(t,n){return new m(e,t,n)}}function b(e,n,r){if((0,i.is)(r,c)&&r.config)return{fields:r.config.fields,references:r.config.references};let s=n[(0,t.getTableUniqueName)(r.referencedTable)];if(!s)throw Error(`Table "${r.referencedTable[t.Table.Symbol.Name]}" not found in schema`);let o=e[s];if(!o)throw Error(`Table "${s}" not found in schema`);let l=r.sourceTable,a=n[(0,t.getTableUniqueName)(l)];if(!a)throw Error(`Table "${l[t.Table.Symbol.Name]}" not found in schema`);let u=[];for(let e of Object.values(o.relations))(r.relationName&&r!==e&&e.relationName===r.relationName||!r.relationName&&e.referencedTable===r.sourceTable)&&u.push(e);if(u.length>1)throw r.relationName?Error(`There are multiple relations with name "${r.relationName}" in table "${s}"`):Error(`There are multiple relations between "${s}" and "${r.sourceTable[t.Table.Symbol.Name]}". Please specify relation name`);if(u[0]&&(0,i.is)(u[0],c)&&u[0].config)return{fields:u[0].config.references,references:u[0].config.fields};throw Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}function P(e){return{one:p(e),many:y(e)}}e.s(["Many",()=>m,"One",()=>c,"Relation",()=>a,"Relations",()=>u,"createMany",()=>y,"createOne",()=>p,"createTableRelationsHelpers",()=>P,"extractTablesRelationalConfig",()=>f,"getOperators",()=>d,"getOrderByOperators",()=>g,"mapRelationalRow",()=>function e(t,r,s,o,a=e=>e){let u={};for(let[m,d]of o.entries())if(d.isJson){let n=r.relations[d.tsKey],o=s[m],l="string"==typeof o?JSON.parse(o):o;u[d.tsKey]=(0,i.is)(n,c)?l&&e(t,t[d.relationTableTsKey],l,d.selection,a):l.map(n=>e(t,t[d.relationTableTsKey],n,d.selection,a))}else{let e,t=a(s[m]),r=d.field;e=(0,i.is)(r,n.Column)?r:(0,i.is)(r,l.SQL)?r.decoder:r.sql.decoder,u[d.tsKey]=null===t?null:e.mapFromDriverValue(t)}return u},"normalizeRelation",()=>b,"relations",()=>h])}];

//# sourceMappingURL=node_modules_drizzle-orm_ac044067._.js.map