(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,207443,e=>{"use strict";var s=e.i(843476),t=e.i(266027),a=e.i(522016),r=e.i(353501),i=e.i(686311),l=e.i(761911),n=e.i(981997),d=e.i(21218),c=e.i(16715),o=e.i(407398),x=e.i(271645);function m({onRefresh:e,label:t="Refresh",size:a="sm",variant:r="ghost",className:i=""}){let[l,n]=(0,x.useState)(!1),d=async()=>{n(!0);try{await e()}finally{n(!1)}};return"icon"===a?(0,s.jsx)(o.Button,{onClick:d,disabled:l,size:"icon",variant:r,className:i,"data-testid":"button-refresh",children:(0,s.jsx)(c.RefreshCw,{className:`h-4 w-4 ${l?"animate-spin":""}`})}):(0,s.jsxs)(o.Button,{onClick:d,disabled:l,size:a,variant:r,className:i,"data-testid":"button-refresh",children:[(0,s.jsx)(c.RefreshCw,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),t]})}function h({initialStats:e}){let{data:a,isLoading:r,refetch:c}=(0,t.useQuery)({queryKey:["/api/stats"],initialData:e,enabled:!1,staleTime:3e5}),o=[{label:"Forum Threads",value:a?.totalThreads?.toLocaleString()||"0",icon:i.MessageSquare,key:"threads"},{label:"Community Members",value:a?.totalMembers?.toLocaleString()||"0",icon:l.Users,key:"members"},{label:"Total Replies",value:a?.totalPosts?.toLocaleString()||"0",icon:n.MessagesSquare,key:"replies"},{label:"Active Today",value:a?.todayActivity?.threads?`+${a.todayActivity.threads}`:"+0",icon:d.Activity,key:"activity"}];return r&&!a?(0,s.jsx)("div",{className:"border-y bg-muted/30",children:(0,s.jsx)("div",{className:"container max-w-7xl mx-auto px-4 py-4",children:(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 animate-pulse",children:[(0,s.jsx)("div",{className:"bg-muted rounded-lg h-11 w-11"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 w-20 bg-muted rounded"}),(0,s.jsx)("div",{className:"h-4 w-24 bg-muted rounded"})]})]},e))})})}):(0,s.jsx)("div",{className:"border-y bg-muted/30",children:(0,s.jsxs)("div",{className:"container max-w-7xl mx-auto px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Platform Statistics"}),(0,s.jsx)(m,{onRefresh:async()=>{await c()},size:"icon",variant:"ghost"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-primary/10 dark:bg-primary/20 rounded-lg p-2.5",children:(0,s.jsx)(e.icon,{className:"h-5 w-5 text-primary dark:text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold","data-testid":`text-stat-${e.key}`,children:e.value}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground font-medium truncate",children:e.label})]})]},e.key))})]})})}var u=e.i(178583),g=e.i(327025),p=e.i(635321);function v({categories:e,limit:t}){let r=e.filter(e=>!e.parentSlug),l=t?r.slice(0,t):r;return(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2.5","data-testid":"category-grid",children:l.map(e=>{var t;let r;return(0,s.jsx)(a.default,{href:`/category/${e.slug}`,"data-testid":`link-category-${e.slug}`,children:(0,s.jsx)(p.Card,{className:"border-0 shadow-sm hover-elevate active-elevate-2 h-full","data-testid":`card-category-${e.slug}`,children:(0,s.jsx)(p.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(t=e.color,r=`w-10 h-10 flex items-center justify-center rounded-md ${t}`,(0,s.jsx)("div",{className:r,children:(0,s.jsx)(g.Folder,{className:"w-5 h-5 text-white"})})),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm mb-1 line-clamp-2 leading-snug","data-testid":`text-category-name-${e.slug}`,children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2.5 leading-relaxed",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2.5 text-[11px] text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1","data-testid":`stat-threads-${e.slug}`,children:[(0,s.jsx)(i.MessageSquare,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.threadCount})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1","data-testid":`stat-posts-${e.slug}`,children:[(0,s.jsx)(u.FileText,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.postCount})]})]})]})]})})})},e.slug)})})}var j=e.i(30656),f=e.i(744793),b=e.i(194983),y=e.i(286536),N=e.i(25652),w=e.i(595468),k=e.i(575822),C=e.i(217923),T=e.i(618348),S=e.i(870273),A=e.i(810980),$=e.i(341240),B=e.i(758472),R=e.i(809637);let U={question:{icon:T.HelpCircle,label:"Question",color:"text-blue-600 dark:text-blue-400"},discussion:{icon:i.MessageSquare,label:"Discussion",color:"text-gray-600 dark:text-gray-400"},review:{icon:S.Star,label:"Review",color:"text-yellow-600 dark:text-yellow-400"},journal:{icon:A.BookOpen,label:"Journal",color:"text-purple-600 dark:text-purple-400"},guide:{icon:$.Lightbulb,label:"Guide",color:"text-green-600 dark:text-green-400"},program_sharing:{icon:B.Code,label:"Program",color:"text-indigo-600 dark:text-indigo-400"}};function D({id:e,slug:t,fullUrl:r,title:i,excerpt:l,author:n,category:c,threadType:o="discussion",replyCount:x,viewCount:m,coinsEarned:h=0,isAnswered:g=!1,isPinned:v=!1,hasSetFile:T=!1,hasBacktest:S=!1,isLiveVerified:A=!1,lastActivity:$}){let B,D=(B=c.toLowerCase()).includes("strategy")||B.includes("discussion")?{borderColor:"border-l-blue-500",badgeBg:"bg-blue-50 dark:bg-blue-950/50",badgeText:"text-blue-700 dark:text-blue-300"}:B.includes("performance")||B.includes("report")?{borderColor:"border-l-green-500",badgeBg:"bg-green-50 dark:bg-green-950/50",badgeText:"text-green-700 dark:text-green-300"}:B.includes("news")||B.includes("update")?{borderColor:"border-l-orange-500",badgeBg:"bg-orange-50 dark:bg-orange-950/50",badgeText:"text-orange-700 dark:text-orange-300"}:B.includes("ea")||B.includes("library")?{borderColor:"border-l-purple-500",badgeBg:"bg-purple-50 dark:bg-purple-950/50",badgeText:"text-purple-700 dark:text-purple-300"}:B.includes("algorithm")||B.includes("development")?{borderColor:"border-l-indigo-500",badgeBg:"bg-indigo-50 dark:bg-indigo-950/50",badgeText:"text-indigo-700 dark:text-indigo-300"}:B.includes("backtest")?{borderColor:"border-l-cyan-500",badgeBg:"bg-cyan-50 dark:bg-cyan-950/50",badgeText:"text-cyan-700 dark:text-cyan-300"}:{borderColor:"border-l-gray-300 dark:border-l-gray-700",badgeBg:"bg-gray-50 dark:bg-gray-900",badgeText:"text-gray-700 dark:text-gray-300"},F=r||(t?`/thread/${t}`:`/thread/${e}`),L=U[o],E=L.icon;return(0,s.jsx)(a.default,{href:F,"data-testid":`link-thread-${e}`,children:(0,s.jsxs)(p.Card,{className:`
          border-0 shadow-sm
          ${D.borderColor} border-l-[3px] 
          hover-elevate active-elevate-2
          transition-all
        `,"data-testid":"card-forum-thread",children:[(0,s.jsx)(p.CardHeader,{className:"pb-2.5",children:(0,s.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,s.jsxs)(f.Avatar,{className:"h-9 w-9 shrink-0",children:[(0,s.jsx)(f.AvatarImage,{src:n.avatar}),(0,s.jsx)(f.AvatarFallback,{className:"text-xs",children:n.name.slice(0,2).toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap mb-1",children:[v&&(0,s.jsx)(j.Badge,{variant:"secondary",className:"text-[10px] h-4 px-1.5",children:"Pinned"}),(0,s.jsxs)(j.Badge,{variant:"outline",className:`text-[10px] h-4 px-1.5 ${L.color}`,"data-testid":"badge-thread-type",children:[(0,s.jsx)(E,{className:"h-2.5 w-2.5 mr-0.5"}),L.label]}),(0,s.jsx)(j.Badge,{className:`text-[10px] h-4 px-1.5 border-0 ${D.badgeBg} ${D.badgeText}`,"data-testid":"badge-category",children:c}),g&&(0,s.jsxs)("div",{className:"flex items-center gap-0.5 text-[10px] text-green-600 dark:text-green-400",children:[(0,s.jsx)(w.CheckCircle2,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Solved"})]}),A&&(0,s.jsxs)(j.Badge,{variant:"default",className:"text-[10px] h-4 px-1.5 bg-green-600",children:[(0,s.jsx)(d.Activity,{className:"h-2.5 w-2.5 mr-0.5"}),"Live"]}),T&&(0,s.jsxs)(j.Badge,{variant:"outline",className:"text-[10px] h-4 px-1.5",children:[(0,s.jsx)(u.FileText,{className:"h-2.5 w-2.5 mr-0.5"}),"Set"]}),S&&(0,s.jsxs)(j.Badge,{variant:"outline",className:"text-[10px] h-4 px-1.5",children:[(0,s.jsx)(C.BarChart3,{className:"h-2.5 w-2.5 mr-0.5"}),"Test"]}),h>0&&(0,s.jsxs)("div",{className:"flex items-center gap-0.5 text-[10px] font-semibold text-amber-600 dark:text-amber-400",children:[(0,s.jsx)(k.Coins,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:["+",h]})]})]}),(0,s.jsx)("h3",{className:"font-semibold text-sm mb-1 line-clamp-2 leading-snug","data-testid":"text-thread-title",children:i}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2 leading-relaxed",children:l}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-[11px] text-muted-foreground",children:[(0,s.jsx)("span",{"data-testid":"text-author",className:"truncate max-w-[120px]",children:n.name}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)(N.TrendingUp,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:n.reputation})]}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"â€¢"}),(0,s.jsx)("span",{suppressHydrationWarning:!0,className:"hidden sm:inline truncate",children:(0,R.formatDistanceToNow)($,{addSuffix:!0})})]})]})]})}),(0,s.jsx)(p.CardContent,{className:"pt-0 pb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-[11px] text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1","data-testid":"stat-replies",children:[(0,s.jsx)(b.MessageCircle,{className:"h-3.5 w-3.5"}),(0,s.jsxs)("span",{children:[x," ",1===x?"reply":"replies"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1","data-testid":"stat-views",children:[(0,s.jsx)(y.Eye,{className:"h-3.5 w-3.5"}),(0,s.jsxs)("span",{children:[m.toLocaleString()," views"]})]})]})})]})})}var F=e.i(842009),L=e.i(107233),E=e.i(18148),M=e.i(864945);function P(){let{user:e}=(0,E.useAuth)(),{data:r,isLoading:i}=(0,t.useQuery)({queryKey:["/api/user",e?.id,"coins"],enabled:!!e?.id}),l=r?.totalCoins??0,n=r?.weeklyEarned??0,d=r?.rank??void 0,c=(0,M.coinsToUSD)(l);return i?(0,s.jsx)(p.Card,{"data-testid":"card-coin-balance",children:(0,s.jsx)(p.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-16 bg-muted rounded"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)("div",{className:"h-16 bg-muted rounded"}),(0,s.jsx)("div",{className:"h-16 bg-muted rounded"})]})]})})}):(0,s.jsx)(p.Card,{"data-testid":"card-coin-balance",children:(0,s.jsxs)(p.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)(a.default,{href:"/recharge",className:"flex items-center gap-2 cursor-pointer hover-elevate rounded-md p-1 -ml-1",children:[(0,s.jsx)("div",{className:"bg-primary/10 rounded-full p-2",children:(0,s.jsx)(k.Coins,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Your Balance"}),(0,s.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-1","data-testid":"text-coin-balance",children:[l.toLocaleString(),(0,s.jsx)(k.Coins,{className:"h-5 w-5 text-primary"})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["$",c.toFixed(2)," USD"]})]})]}),(0,s.jsx)(a.default,{href:"/recharge",children:(0,s.jsxs)(o.Button,{size:"sm",variant:"default","data-testid":"button-top-up",children:[(0,s.jsx)(L.Plus,{className:"h-4 w-4 mr-1"}),"Top Up"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[(0,s.jsx)(N.TrendingUp,{className:"h-4 w-4 text-chart-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"This Week"}),(0,s.jsxs)("div",{className:"font-semibold text-sm","data-testid":"text-weekly-earned",children:["+",n]})]})]}),d&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[(0,s.jsx)(F.Award,{className:"h-4 w-4 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Rank"}),(0,s.jsxs)("div",{className:"font-semibold text-sm","data-testid":"text-user-rank",children:["#",d]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a.default,{href:"/earn-coins",children:(0,s.jsxs)(o.Button,{size:"sm",variant:"outline",className:"w-full","data-testid":"button-earn-coins",children:[(0,s.jsx)(k.Coins,{className:"h-4 w-4 mr-1"}),"Ways to Earn"]})}),(0,s.jsx)(a.default,{href:"/transactions",children:(0,s.jsx)(o.Button,{size:"sm",variant:"ghost",className:"w-full","data-testid":"button-history",children:"View History"})})]})]})})}var q=e.i(664030),H=e.i(840176);let z=[{rank:1,name:"ProTrader99",username:"protrader99",coins:4520,metric:234,trend:"up"},{rank:2,name:"GoldScalper",username:"goldscalper",coins:3890,metric:198,trend:"up"},{rank:3,name:"DevCoder",username:"devcoder",coins:3210,metric:167,trend:"same"},{rank:4,name:"SwingMaster",username:"swingmaster",coins:2850,metric:145,trend:"down"},{rank:5,name:"BTCBreakout",username:"btcbreakout",coins:2340,metric:122,trend:"up"}],Q=[{rank:1,name:"EAMaster",username:"eamaster",coins:5200,metric:43,trend:"up"},{rank:2,name:"IndicatorPro",username:"indicatorpro",coins:4100,metric:38,trend:"up"},{rank:3,name:"CodeWizard",username:"codewizard",coins:3600,metric:31,trend:"same"},{rank:4,name:"SetFilePro",username:"setfilepro",coins:2900,metric:27,trend:"up"},{rank:5,name:"BacktestKing",username:"backtestking",coins:2400,metric:22,trend:"down"}],K=[{rank:1,name:"DailyTrader",username:"dailytrader",coins:890,metric:7,trend:"up"},{rank:2,name:"ConsistentOne",username:"consistentone",coins:780,metric:7,trend:"same"},{rank:3,name:"ActiveMember",username:"activemember",coins:650,metric:6,trend:"up"},{rank:4,name:"RegularJoe",username:"regularjoe",coins:540,metric:5,trend:"up"},{rank:5,name:"ForumFan",username:"forumfan",coins:430,metric:5,trend:"same"}];function I({topContributors:e=z,topUploaders:t=Q,weeklyStreaks:r=K}){let i=(e,t)=>(0,s.jsx)("div",{className:"space-y-1",children:e.map(e=>{var r;let i=e.username?`/user/${e.username}`:e.userId?`/user/${e.userId}`:"#";return(0,s.jsx)(a.default,{href:i,"data-testid":`link-leaderboard-user-${e.rank}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 py-1.5 px-2 rounded-lg hover-elevate active-elevate-2","data-testid":`leaderboard-user-${e.rank}`,children:[(0,s.jsx)("div",{className:"w-4 flex items-center justify-center shrink-0",children:(e=>{let t=[{icon:q.Trophy,color:"text-amber-500"},{icon:q.Trophy,color:"text-slate-400"},{icon:q.Trophy,color:"text-orange-600"}];if(e<=3){let{icon:a,color:r}=t[e-1];return(0,s.jsx)(a,{className:`h-3.5 w-3.5 ${r}`})}return(0,s.jsxs)("span",{className:"text-[10px] font-semibold text-muted-foreground",children:["#",e]})})(e.rank)}),(0,s.jsxs)(f.Avatar,{className:"h-7 w-7 shrink-0",children:[(0,s.jsx)(f.AvatarImage,{src:e.avatar}),(0,s.jsx)(f.AvatarFallback,{className:"text-[10px]",children:e.name.slice(0,2).toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-xs font-medium truncate","data-testid":`text-username-${e.rank}`,children:e.name}),(0,s.jsxs)("div",{className:"text-[10px] text-muted-foreground","data-testid":`text-metric-${e.rank}`,children:[e.metric," ",t]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:["up"===(r=e.trend)?(0,s.jsx)(N.TrendingUp,{className:"h-2.5 w-2.5 text-green-500"}):"down"===r?(0,s.jsx)(N.TrendingUp,{className:"h-2.5 w-2.5 text-red-500 rotate-180"}):null,(0,s.jsx)("span",{className:"text-xs font-semibold text-foreground","data-testid":`badge-coins-${e.rank}`,children:e.coins})]})]})},e.rank)})});return(0,s.jsxs)(p.Card,{className:"border-0 shadow-sm","data-testid":"card-leaderboard",children:[(0,s.jsx)(p.CardHeader,{className:"pb-2.5",children:(0,s.jsxs)(p.CardTitle,{className:"text-sm font-semibold flex items-center gap-1.5",children:[(0,s.jsx)(q.Trophy,{className:"h-3.5 w-3.5 text-primary"}),"Leaderboard"]})}),(0,s.jsx)(p.CardContent,{className:"px-3",children:(0,s.jsxs)(H.Tabs,{defaultValue:"contributors",className:"w-full",children:[(0,s.jsxs)(H.TabsList,{className:"grid w-full grid-cols-3 h-7 bg-muted/50",children:[(0,s.jsx)(H.TabsTrigger,{value:"contributors",className:"text-[11px] data-[state=active]:bg-background","data-testid":"tab-contributors",children:"Helpful"}),(0,s.jsx)(H.TabsTrigger,{value:"uploaders",className:"text-[11px] data-[state=active]:bg-background","data-testid":"tab-uploaders",children:"Uploads"}),(0,s.jsx)(H.TabsTrigger,{value:"streaks",className:"text-[11px] data-[state=active]:bg-background","data-testid":"tab-streaks",children:"Streaks"})]}),(0,s.jsx)(H.TabsContent,{value:"contributors",className:"mt-2",children:i(e,"solutions")}),(0,s.jsx)(H.TabsContent,{value:"uploaders",className:"mt-2",children:i(t,"uploads")}),(0,s.jsx)(H.TabsContent,{value:"streaks",className:"mt-2",children:i(r,"day streak")})]})})]})}var G=e.i(503116),V=e.i(618566);let W=new Date("2025-10-28T12:00:00Z"),O=[{id:"1",title:"XAUUSD CPI/NFP handling: disable or reduce lots?",category:"Strategy Discussion",author:"NewsTrader",replies:12,views:890,coins:23,lastActivity:new Date(W.getTime()-18e5)},{id:"2",title:"BTCUSD weekend behavior: do you pause?",category:"Performance Reports",author:"CryptoWeekend",replies:8,views:456,coins:15,lastActivity:new Date(W.getTime()-36e5)},{id:"3",title:"Gold trailing at 1R/2R/3R steps: best size?",category:"EA Development (MQL4/5)",author:"TrailMaster",replies:6,views:234,coins:12,lastActivity:new Date(W.getTime()-72e5)}],X=[{id:"4",title:"EURUSD M5 London session: stable set-files",category:"EA Library",author:"LondonTrader",replies:89,views:5670,coins:92,isAnswered:!0,lastActivity:new Date(W.getTime()-108e5)},{id:"5",title:"Gold H1 swing: 1:2 RRR with ATR stop",category:"Performance Reports",author:"SwingMaster",replies:67,views:4320,coins:78,lastActivity:new Date(W.getTime()-144e5)},{id:"6",title:"New to EA trading - where to start?",category:"Beginner Questions",author:"NewbieTom",replies:134,views:8900,coins:56,isAnswered:!0,lastActivity:new Date(W.getTime()-18e6)}],J=[{id:"7",title:"How to properly backtest an EA in MT4?",category:"Technical Support",author:"LearningTrader",replies:45,views:3210,coins:41,isAnswered:!0,lastActivity:new Date(W.getTime()-216e5)},{id:"8",title:"Symbol suffix issues (.a, .pro, .ecn) fix?",category:"Technical Support",author:"SymbolFixer",replies:28,views:1890,coins:34,isAnswered:!0,lastActivity:new Date(W.getTime()-252e5)},{id:"9",title:"Best scalping settings for EURUSD M5",category:"Strategy Discussion",author:"ScalpGuru",replies:52,views:2670,coins:48,isAnswered:!0,lastActivity:new Date(W.getTime()-288e5)}];function Y({newThreads:e=O,trendingThreads:a=X,solvedThreads:r=J}){let i=(0,V.useRouter)(),[l,n]=(0,x.useState)(10),{data:d,refetch:c}=(0,t.useQuery)({queryKey:["/api/threads",{sortBy:"trending",limit:l}],queryFn:async()=>{let e=await fetch(`/api/threads?sortBy=trending&limit=${l}`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch trending threads");return e.json()},staleTime:3e5}),{data:o,refetch:h}=(0,t.useQuery)({queryKey:["/api/threads",{sortBy:"newest",limit:l}],queryFn:async()=>{let e=await fetch(`/api/threads?sortBy=newest&limit=${l}`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch newest threads");return e.json()},staleTime:3e5}),{data:u,refetch:g}=(0,t.useQuery)({queryKey:["/api/threads",{sortBy:"answered",limit:l}],queryFn:async()=>{let e=await fetch(`/api/threads?sortBy=answered&limit=${l}`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch answered threads");return e.json()},staleTime:3e5}),v=async()=>{await Promise.all([h(),c(),g()])},f=new Map;o?.forEach(e=>f.set(e.id,e)),d?.forEach(e=>f.set(e.id,e)),u?.forEach(e=>f.set(e.id,e));let k=e=>{let s;try{s=new Date(e.lastActivityAt?e.lastActivityAt:e.createdAt),isNaN(s.getTime())&&(s=new Date(e.createdAt))}catch{s=new Date(e.createdAt)}return{id:e.id,title:e.title,category:e.categorySlug.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),author:e.authorId,replies:e.replyCount,views:e.views,coins:0,isAnswered:!1,lastActivity:s}},C=o&&o.length>0?o.map(k):e,T=d&&d.length>0?d.map(k):a,S=u&&u.length>0?u.map(k):r,A=e=>(0,s.jsx)("div",{className:"space-y-0 divide-y divide-border/40 max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/30",children:e.map((e,t)=>(0,s.jsx)("div",{className:"group py-4 px-3 -mx-3 rounded-lg hover:bg-muted/40 hover-elevate active-elevate-2 cursor-pointer transition-all duration-200","data-testid":`highlight-thread-${e.id}`,onClick:()=>{let s,t;return s=f.get(e.id),void((t=s?.fullUrl)?i.push(t):s?.slug?i.push(`/thread/${s.slug}`):i.push(`/thread/${e.id}`))},children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(j.Badge,{variant:"outline",className:"text-xs font-medium bg-primary/5 hover:bg-primary/10 border-primary/20 text-primary transition-colors","data-testid":`badge-category-${e.id}`,children:e.category}),e.isAnswered&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium text-green-600 dark:text-green-400","data-testid":`badge-solved-${e.id}`,children:[(0,s.jsx)(w.CheckCircle2,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:"Solved"})]})]}),(0,s.jsx)("h4",{className:"text-[15px] font-semibold leading-snug line-clamp-1 group-hover:text-primary transition-colors","data-testid":`text-title-${e.id}`,children:e.title}),(0,s.jsx)("div",{className:"text-[11px] text-muted-foreground/80 font-mono truncate",children:e.id}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(b.MessageCircle,{className:"h-3.5 w-3.5 text-blue-500/70"}),(0,s.jsx)("span",{className:"font-medium","data-testid":`text-replies-${e.id}`,children:e.replies})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(y.Eye,{className:"h-3.5 w-3.5 text-purple-500/70"}),(0,s.jsx)("span",{className:"font-medium","data-testid":`text-views-${e.id}`,children:e.views.toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(G.Clock,{className:"h-3.5 w-3.5 text-orange-500/70"}),(0,s.jsx)("span",{suppressHydrationWarning:!0,children:(0,R.formatDistanceToNow)(e.lastActivity,{addSuffix:!0})})]})]})]}),e.isAnswered?(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-lg bg-green-500/10 border border-green-500/20 transition-transform group-hover:scale-105",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400 leading-none",children:"0"})})}):e.coins&&e.coins>0?(0,s.jsxs)(j.Badge,{variant:"secondary",className:"text-xs font-semibold bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20","data-testid":`badge-coins-${e.id}`,children:["+",e.coins]}):null]})},e.id))});return(0,s.jsx)(p.Card,{"data-testid":"card-week-highlights",className:"overflow-hidden",children:(0,s.jsxs)(p.CardContent,{className:"p-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 p-5 pb-4 border-b bg-gradient-to-br from-primary/5 to-primary/0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.TrendingUp,{className:"h-5 w-5 text-primary"}),(0,s.jsx)("h3",{className:"font-semibold text-base",children:"This Week's Highlights"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Show:"}),(0,s.jsxs)("select",{value:l,onChange:e=>n(Number(e.target.value)),className:"h-7 px-2 rounded-md border border-input bg-background text-xs hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1 cursor-pointer transition-colors","data-testid":"select-limit",children:[(0,s.jsx)("option",{value:10,children:"10"}),(0,s.jsx)("option",{value:20,children:"20"}),(0,s.jsx)("option",{value:50,children:"50"})]})]}),(0,s.jsx)(m,{onRefresh:v,size:"icon",variant:"ghost"})]})]}),(0,s.jsxs)(H.Tabs,{defaultValue:"new",className:"w-full",children:[(0,s.jsxs)(H.TabsList,{className:"grid w-full grid-cols-3 rounded-none border-b bg-muted/30",children:[(0,s.jsx)(H.TabsTrigger,{value:"new","data-testid":"tab-new",className:"rounded-none data-[state=active]:shadow-none",children:"New"}),(0,s.jsx)(H.TabsTrigger,{value:"trending","data-testid":"tab-trending",className:"rounded-none data-[state=active]:shadow-none",children:"Trending"}),(0,s.jsx)(H.TabsTrigger,{value:"solved","data-testid":"tab-solved",className:"rounded-none data-[state=active]:shadow-none",children:"Solved"})]}),(0,s.jsxs)("div",{className:"px-5 py-1",children:[(0,s.jsx)(H.TabsContent,{value:"new",className:"mt-0",children:A(C)}),(0,s.jsx)(H.TabsContent,{value:"trending",className:"mt-0",children:A(T)}),(0,s.jsx)(H.TabsContent,{value:"solved",className:"mt-0",children:A(S)})]})]})]})})}var _=e.i(279779),Z=e.i(250121),ee=e.i(98919),es=e.i(569074);function et({currentLevel:e,xp:a,nextLevelXP:r,achievements:i}={}){let{user:l}=(0,E.useAuth)(),{data:n,isLoading:d}=(0,t.useQuery)({queryKey:["/api/users",l?.id,"stats"],enabled:!!l?.id,staleTime:3e5}),c=n?.currentLevel||e||"contributor",o=n?.xp||a||0,x=n?.nextLevelXP||r||2e3,m=n?.achievements||i||{uploads:0,verifiedSets:0,solutionsMarked:0},h={novice:{name:"Novice",color:"bg-chart-4",textColor:"text-chart-4",icon:ee.Shield},contributor:{name:"Contributor",color:"bg-chart-2",textColor:"text-chart-2",icon:b.MessageCircle},verified:{name:"Verified Trader",color:"bg-chart-3",textColor:"text-chart-3",icon:S.Star},pro:{name:"Pro Developer",color:"bg-primary",textColor:"text-primary",icon:es.Upload}}[c],u=h.icon,g=o/x*100;return d?(0,s.jsx)(p.Card,{"data-testid":"card-trust-level",children:(0,s.jsxs)(p.CardContent,{className:"p-4 space-y-4",children:[(0,s.jsx)(Z.Skeleton,{className:"h-12 w-full"}),(0,s.jsx)(Z.Skeleton,{className:"h-8 w-full"}),(0,s.jsx)(Z.Skeleton,{className:"h-20 w-full"})]})}):(0,s.jsx)(p.Card,{"data-testid":"card-trust-level",children:(0,s.jsx)(p.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`${h.color} rounded-lg p-2`,children:(0,s.jsx)(u,{className:"h-4 w-4 text-primary-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Your Rank"}),(0,s.jsx)("div",{className:`font-semibold ${h.textColor}`,children:h.name})]})]}),(0,s.jsxs)(j.Badge,{variant:"outline",className:"text-xs",children:[o," XP"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Progress to next level"}),(0,s.jsxs)("span",{className:"font-medium",children:[o," / ",x]})]}),(0,s.jsx)(_.Progress,{value:g,className:"h-2"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-xs font-semibold",children:"Achievements"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"text-center p-2 bg-muted/50 rounded-md",children:[(0,s.jsx)("div",{className:"font-bold text-sm",children:m.uploads}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Uploads"})]}),(0,s.jsxs)("div",{className:"text-center p-2 bg-muted/50 rounded-md",children:[(0,s.jsx)("div",{className:"font-bold text-sm",children:m.verifiedSets}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Verified"})]}),(0,s.jsxs)("div",{className:"text-center p-2 bg-muted/50 rounded-md",children:[(0,s.jsx)("div",{className:"font-bold text-sm",children:m.solutionsMarked}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Solutions"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-semibold",children:"Unlocked Features"}),({novice:["Post threads","Reply to discussions"],contributor:["Upload attachments","Create polls"],verified:["Start bounty threads","Post in commercial"],pro:["All features unlocked","Verified badge"]})[c].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)("div",{className:"h-1 w-1 rounded-full bg-primary"}),(0,s.jsx)("span",{children:e})]},t))]})]})})})}var ea=e.i(958377),er=e.i(201928);function ei(){let{data:e,isLoading:r,refetch:l}=function(e,s={}){let{interval:a=3e4,enabled:r=!0}=s,i=(0,t.useQuery)({queryKey:[e],enabled:r,refetchInterval:a,refetchIntervalInBackground:!0,staleTime:a/2});return{data:i.data,isLoading:i.isLoading,isError:i.isError,error:i.error,isRefetching:i.isRefetching,lastUpdated:i.dataUpdatedAt>0?new Date(i.dataUpdatedAt):null,refetch:i.refetch}}("/api/hot?limit=5",{enabled:!0,interval:0});if(r&&!e)return null;let n=e?.items||[];return 0===n.length?null:(0,s.jsxs)(p.Card,{className:"overflow-hidden","data-testid":"card-whats-hot",children:[(0,s.jsx)(p.CardHeader,{className:"pb-4 bg-gradient-to-r from-orange-500/5 via-red-500/5 to-pink-500/5 dark:from-orange-500/3 dark:via-red-500/3 dark:to-pink-500/3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(p.CardTitle,{className:"flex items-center gap-2.5 text-xl",children:[(0,s.jsx)(ea.Flame,{className:"w-5 h-5 text-orange-500/70"}),(0,s.jsx)("span",{className:"text-foreground font-semibold",children:"What's Hot"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m,{onRefresh:async()=>{await l()},size:"icon",variant:"ghost"}),(0,s.jsx)(a.default,{href:"/hot","data-testid":"link-see-all-hot",children:(0,s.jsx)(o.Button,{variant:"ghost",size:"sm",className:"text-orange-500/80 hover:text-orange-600 dark:text-orange-400/70","data-testid":"button-see-all-hot",children:"See All"})})]})]})}),(0,s.jsx)(p.CardContent,{className:"space-y-2 pt-4",children:n.map((e,t)=>{let r=(e=>{switch(e){case"thread":return{label:"Discussion",icon:i.MessageSquare,color:"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-300/30 dark:border-blue-600/30"};case"ea":return{label:"EA",icon:er.ShoppingCart,color:"bg-green-500/15 text-green-700 dark:text-green-400 border-green-300/30 dark:border-green-600/30"};case"indicator":return{label:"Indicator",icon:N.TrendingUp,color:"bg-purple-500/15 text-purple-700 dark:text-purple-400 border-purple-300/30 dark:border-purple-600/30"};case"article":return{label:"Article",icon:y.Eye,color:"bg-indigo-500/15 text-indigo-700 dark:text-indigo-400 border-indigo-300/30 dark:border-indigo-600/30"};case"source_code":return{label:"Code",icon:er.ShoppingCart,color:"bg-cyan-500/15 text-cyan-700 dark:text-cyan-400 border-cyan-300/30 dark:border-cyan-600/30"};case"broker":return{label:"Broker",icon:S.Star,color:"bg-yellow-500/15 text-yellow-700 dark:text-yellow-400 border-yellow-300/30 dark:border-yellow-600/30"};default:return{label:"Content",icon:y.Eye,color:"bg-gray-500/15 text-gray-700 dark:text-gray-400 border-gray-300/30 dark:border-gray-600/30"}}})(e.type),l=r.icon;return(0,s.jsx)(a.default,{href:e.fullUrl?e.fullUrl:"thread"===e.type?`/thread/${e.slug}`:"broker"===e.type?`/brokers/${e.slug}`:`/content/${e.slug}`,"data-testid":`link-hot-${e.id}`,children:(0,s.jsxs)("div",{className:"group relative flex items-start gap-3 p-3 rounded-lg border border-border bg-card hover:border-orange-200/50 dark:hover:border-orange-800/30 hover-elevate active-elevate-2 cursor-pointer transition-all duration-200","data-testid":`card-hot-${e.id}`,children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-orange-500/3 to-red-500/3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),(0,s.jsx)("div",{className:`relative flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center text-sm font-semibold ${0===t?"bg-gradient-to-br from-yellow-500/20 to-orange-600/20 text-foreground border border-orange-300/30 dark:border-orange-600/30":1===t?"bg-gradient-to-br from-gray-400/15 to-gray-600/15 text-foreground border border-gray-300/30 dark:border-gray-600/30":2===t?"bg-gradient-to-br from-amber-600/20 to-amber-800/20 text-foreground border border-amber-300/30 dark:border-amber-600/30":"bg-muted/40 text-foreground border border-border/50"} transition-transform group-hover:scale-105`,children:t+1}),(0,s.jsxs)("div",{className:"relative flex-1 min-w-0 space-y-1.5",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-foreground line-clamp-2 leading-snug group-hover:text-orange-500/90 dark:group-hover:text-orange-400/80 transition-colors","data-testid":`text-hot-title-${e.id}`,children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[(0,s.jsxs)("span",{className:"truncate max-w-[120px]","data-testid":`text-hot-author-${e.id}`,children:["by ",e.author?.username||"Unknown"]}),(0,s.jsx)("span",{className:"text-border",children:"â€¢"}),"thread"===e.type&&void 0!==e.replyCount&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(i.MessageSquare,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:[e.replyCount," replies"]})]}),(0,s.jsx)("span",{className:"text-border",children:"â€¢"})]}),("ea"===e.type||"indicator"===e.type||"article"===e.type||"source_code"===e.type)&&(0,s.jsx)(s.Fragment,{children:!e.isFree&&e.priceCoins&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsxs)("span",{className:"text-yellow-600 dark:text-yellow-400",children:["ðŸª™ ",e.priceCoins]})}),(0,s.jsx)("span",{className:"text-border",children:"â€¢"})]})}),"broker"===e.type&&void 0!==e.overallRating&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(S.Star,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{children:(e.overallRating/100).toFixed(1)})]}),(0,s.jsx)("span",{className:"text-border",children:"â€¢"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(y.Eye,{className:"w-3.5 h-3.5"}),(0,s.jsx)("span",{"data-testid":`text-hot-views-${e.id}`,children:e.views?.toLocaleString()||0})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,s.jsx)(G.Clock,{className:"w-3 h-3"}),(0,s.jsx)("span",{suppressHydrationWarning:!0,children:(0,R.formatDistanceToNow)(new Date(e.createdAt),{addSuffix:!0})})]}),(0,s.jsxs)(j.Badge,{variant:"outline",className:`text-xs px-2 py-0 ${r.color}`,children:[(0,s.jsx)(l,{className:"w-3 h-3 mr-1"}),r.label]}),(0,s.jsx)(j.Badge,{variant:"outline",className:"text-xs px-2 py-0 bg-muted/50 border-border/50 hover:bg-muted transition-colors",children:e.categorySlug})]})]}),(0,s.jsx)("div",{className:"relative flex-shrink-0 self-start",children:(0,s.jsxs)(j.Badge,{variant:"secondary",className:"text-xs px-2 py-0.5 bg-orange-500/15 text-orange-700 dark:text-orange-400 border border-orange-300/30 dark:border-orange-600/30",children:[(0,s.jsx)(N.TrendingUp,{className:"w-3 h-3 mr-1"}),"Hot"]})})]})},e.id)})})]})}function el(){let{data:e,isLoading:r,refetch:i}=(0,t.useQuery)({queryKey:["/api/content/top-sellers"],staleTime:3e5}),l=e?.topSellers?.slice(0,5)||[];return(0,s.jsxs)(p.Card,{className:"border-0 shadow-sm",children:[(0,s.jsx)(p.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(p.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,s.jsx)(q.Trophy,{className:"w-4 h-4 text-amber-500"}),"Top Sellers"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m,{onRefresh:async()=>{await i()},size:"icon",variant:"ghost"}),(0,s.jsx)(a.default,{href:"/marketplace?sort=sales","data-testid":"link-see-all-sellers",children:(0,s.jsx)(o.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs","data-testid":"button-see-all-sellers",children:"See All"})})]})]})}),(0,s.jsx)(p.CardContent,{className:"space-y-2",children:r?Array.from({length:5}).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 py-2 px-2.5",children:[(0,s.jsx)(Z.Skeleton,{className:"w-10 h-10 rounded-md"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(Z.Skeleton,{className:"h-4 w-3/4"}),(0,s.jsx)(Z.Skeleton,{className:"h-3 w-1/2"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(Z.Skeleton,{className:"h-4 w-12"}),(0,s.jsx)(Z.Skeleton,{className:"h-4 w-16"})]})]},t)):0===l.length?(0,s.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No content available yet"}):l.map((e,t)=>{let r,i;return(0,s.jsx)(a.default,{href:e.fullUrl||`/content/${e.slug}`,"data-testid":`link-seller-${e.id}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3 py-2 px-2.5 rounded-lg hover-elevate active-elevate-2 cursor-pointer","data-testid":`card-seller-${e.id}`,children:[(0,s.jsxs)("div",{className:"flex-shrink-0 relative",children:[(0,s.jsxs)(f.Avatar,{className:"w-10 h-10 rounded-md",children:[(0,s.jsx)(f.AvatarImage,{src:e.postLogoUrl||void 0,alt:e.title}),(0,s.jsx)(f.AvatarFallback,{className:"rounded-md bg-muted text-muted-foreground text-xs",children:e.title.substring(0,2).toUpperCase()})]}),(i=(r=[{bg:"bg-amber-500",text:"text-white"},{bg:"bg-slate-400",text:"text-white"},{bg:"bg-orange-600",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-indigo-500",text:"text-white"}])[t]||r[4],(0,s.jsx)("div",{className:`absolute -top-1 -left-1 w-4 h-4 rounded-full flex items-center justify-center ${i.bg} ${i.text} text-[10px] font-bold shadow-sm`,children:t+1}))]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm line-clamp-1","data-testid":`text-seller-title-${e.id}`,children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground line-clamp-1","data-testid":`text-seller-author-${e.id}`,children:e.author.username||"Unknown"}),e.avgRating>0&&(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)(S.Star,{className:"w-3 h-3 fill-amber-500 text-amber-500"}),(0,s.jsx)("span",{className:"text-xs text-foreground font-medium",children:e.avgRating.toFixed(1)})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[e.isFree?(0,s.jsx)(j.Badge,{variant:"secondary",className:"text-[11px] h-5 px-1.5 font-semibold text-green-600",children:"FREE"}):(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-semibold text-amber-600",children:[(0,s.jsx)(k.Coins,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.priceCoins})]}),(0,s.jsxs)(j.Badge,{variant:"secondary",className:"text-[11px] h-5 px-1.5 font-normal",children:[(0,s.jsx)(N.TrendingUp,{className:"w-2.5 h-2.5 mr-0.5"}),e.totalSales," sales"]})]})]})},e.id)})})]})}var en=e.i(42422),ed=e.i(954616),ec=e.i(114683),eo=e.i(37727),ex=e.i(463059),em=e.i(501831);let eh=[{key:"profilePicture",label:"Complete your profile",coins:10,link:"/settings"},{key:"firstReply",label:"Post your first reply",coins:5,link:"/discussions"},{key:"twoReviews",label:"Submit 2 reviews",coins:6,link:"/brokers"},{key:"firstThread",label:"Create your own thread",coins:10,link:"/discussions/new"},{key:"firstPublish",label:"Publish your own EA",coins:30,link:"/publish"},{key:"fiftyFollowers",label:"Get 50 followers",coins:200,link:"/members"}];function eu(){let{data:e,isLoading:r}=(0,t.useQuery)({queryKey:["/api/me/onboarding"]}),i=(0,ed.useMutation)({mutationFn:async()=>(await (0,em.apiRequest)("POST","/api/me/onboarding/dismiss",{})).json(),onSuccess:()=>{em.queryClient.invalidateQueries({queryKey:["/api/me/onboarding"]})}});if(r||!e||e.dismissed)return null;let l=Object.values(e.progress).filter(Boolean).length,n=Object.keys(e.progress).length;return(0,s.jsxs)(p.Card,{className:"border-0 shadow-sm","data-testid":"card-onboarding",children:[(0,s.jsxs)(p.CardHeader,{className:"pb-3 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(p.CardTitle,{className:"text-base font-semibold",children:"Get Started"}),e.completed&&(0,s.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 -mr-2",onClick:()=>i.mutate(),"data-testid":"button-dismiss-onboarding",children:(0,s.jsx)(eo.X,{className:"h-4 w-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Complete these tasks to earn coins and unlock features"})]}),(0,s.jsxs)(p.CardContent,{className:"space-y-3",children:[(0,s.jsx)(_.Progress,{value:l/n*100,className:"h-2","data-testid":"progress-onboarding"}),(0,s.jsx)("div",{className:"space-y-1.5",children:eh.map(t=>{let r=e.progress[t.key];return(0,s.jsxs)(a.default,{href:t.link,className:`flex items-center justify-between py-2.5 px-3 rounded-lg transition-all ${r?"bg-muted/30":"hover-elevate active-elevate-2 cursor-pointer"}`,"data-testid":`task-${t.key}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5 flex-1",children:[r?(0,s.jsx)(w.CheckCircle2,{className:"w-4 h-4 text-green-500 shrink-0","data-testid":`icon-complete-${t.key}`}):(0,s.jsx)(ec.Circle,{className:"w-4 h-4 text-muted-foreground shrink-0","data-testid":`icon-incomplete-${t.key}`}),(0,s.jsx)("span",{className:`text-sm ${r?"text-muted-foreground line-through":"text-foreground"}`,children:t.label})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[(0,s.jsxs)("span",{className:"text-xs font-medium text-amber-600","data-testid":`coins-${t.key}`,children:["+",t.coins," coins"]}),!r&&(0,s.jsx)(ex.ChevronRight,{className:"w-3.5 h-3.5 text-muted-foreground"})]})]},t.key)})})]})]})}var eg=e.i(239616),ep=e.i(195116),ev=e.i(741929),ej=e.i(32095),ef=e.i(209912),eb=e.i(751737),ey=e.i(440160),eN=e.i(269638),ew=e.i(620278),ek=e.i(878894),eC=e.i(223945);let eT=(0,e.i(475254).default)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);function eS({initialStats:e,initialCategories:i,initialThreads:l}){let{data:n,isLoading:c}=(0,t.useQuery)({queryKey:["/api/categories/tree/top?limit=6"],initialData:i,staleTime:3e5}),{data:o,isLoading:x}=(0,t.useQuery)({queryKey:["/api/threads"],initialData:l,staleTime:3e5}),m=n||[],g=new Map((n||[]).map(e=>[e.slug,e.name])),j=o&&n?(o||[]).slice(0,8).map(e=>({...e,category:g.get(e.categorySlug)||e.categorySlug||"General Discussion",author:e.author||{name:"Anonymous",reputation:0},excerpt:e.body?.substring(0,200)||"",viewCount:e.views||0,coinsEarned:e.coinsEarned||0,isAnswered:e.isAnswered||!1,hasSetFile:e.hasSetFile||!1,hasBacktest:e.hasBacktest||!1,isLiveVerified:e.isLiveVerified||!1,lastActivity:e.lastActivityAt?new Date(e.lastActivityAt):new Date})):[];return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(r.default,{}),(0,s.jsx)(h,{initialStats:e}),(0,s.jsx)("main",{className:"container max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,s.jsxs)("aside",{className:"lg:col-span-1 space-y-3 order-2 lg:order-1",children:[(0,s.jsx)(eu,{}),(0,s.jsx)(P,{}),(0,s.jsx)(et,{})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-3 sm:space-y-4 order-1 lg:order-2",children:[(0,s.jsx)("section",{children:(0,s.jsx)(Y,{})}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"mb-3 sm:mb-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-1 sm:mb-2",children:"Forum Categories"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Choose the right category for your discussion"})]}),(0,s.jsx)(a.default,{href:"/categories",className:"text-xs sm:text-sm font-medium text-primary hover:underline shrink-0","data-testid":"link-see-all-categories",children:"See All â†’"})]}),(0,s.jsx)(v,{categories:m,limit:6})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-1 sm:mb-2",children:"Recent Discussions"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Latest active threads from the community"})]}),(0,s.jsx)("div",{className:"space-y-2 sm:space-y-3",children:j.map(e=>(0,s.jsx)(D,{...e},e.id))})]})]}),(0,s.jsxs)("aside",{className:"lg:col-span-1 space-y-3 order-3",children:[(0,s.jsx)(ei,{}),(0,s.jsx)(el,{}),(0,s.jsx)(I,{}),(0,s.jsxs)(p.Card,{className:"sticky top-24",id:"important-links",children:[(0,s.jsx)(p.CardHeader,{className:"pb-2",children:(0,s.jsx)(p.CardTitle,{className:"text-base",children:"Important Links"})}),(0,s.jsxs)(p.CardContent,{className:"space-y-1 max-h-[600px] overflow-y-auto",children:[(0,s.jsxs)(a.default,{href:"/guides/forum-rules",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-forum-rules",children:[(0,s.jsx)(A.BookOpen,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Forum Rules"})]}),(0,s.jsxs)(a.default,{href:"/guides/safe-download-guide",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-safe-download",children:[(0,s.jsx)(ey.Download,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Safe Download Guide"})]}),(0,s.jsxs)(a.default,{href:"/guides/verified-brokers",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-verified-brokers",children:[(0,s.jsx)(eN.CheckCircle,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Verified Brokers"})]}),(0,s.jsxs)(a.default,{href:"/guides/ea-coding-rules",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-ea-coding-rules",children:[(0,s.jsx)(ee.Shield,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"EA Coding Rules"})]}),(0,s.jsxs)(a.default,{href:"/guides/how-to-earn-coins",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-earn-coins",children:[(0,s.jsx)(k.Coins,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"How to Earn Coins"})]}),(0,s.jsxs)(a.default,{href:"/guides/how-to-get-your-thread-seen",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-thread-visibility",children:[(0,s.jsx)(y.Eye,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Get Your Thread Seen"})]}),(0,s.jsxs)(a.default,{href:"/guides/how-to-rank-articles-blogs",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-rank-articles",children:[(0,s.jsx)(ew.Target,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Rank Articles & Blogs"})]}),(0,s.jsxs)(a.default,{href:"/guides/how-to-rank-ea-publications",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-rank-ea",children:[(0,s.jsx)(N.TrendingUp,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Rank EA Publications"})]}),(0,s.jsxs)(a.default,{href:"/guides/new-member-quickstart",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-quickstart",children:[(0,s.jsx)(ef.Rocket,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"New Member Quickstart"})]}),(0,s.jsxs)(a.default,{href:"/guides/report-a-scam",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-report-scam",children:[(0,s.jsx)(ek.AlertTriangle,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Report a Scam"})]}),(0,s.jsxs)(a.default,{href:"/guides/badges-levels",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-badges",children:[(0,s.jsx)(F.Award,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Badges & Levels"})]}),(0,s.jsxs)(a.default,{href:"/guides/marketplace-seller-guide",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-seller-guide",children:[(0,s.jsx)(eC.Store,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Marketplace Seller Guide"})]}),(0,s.jsxs)(a.default,{href:"/guides/template-beginner-thread",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-template-thread",children:[(0,s.jsx)(u.FileText,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Template: Beginner Thread"})]}),(0,s.jsxs)(a.default,{href:"/guides/template-ea-review",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-template-review",children:[(0,s.jsx)(eT,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Template: EA Review"})]}),(0,s.jsxs)(a.default,{href:"/guides/template-trading-journal",className:"flex items-center gap-3 p-2 rounded-lg text-sm text-foreground hover-elevate active-elevate-2 transition-colors","data-testid":"link-template-journal",children:[(0,s.jsx)(d.Activity,{className:"w-4 h-4 text-primary dark:text-primary flex-shrink-0"}),(0,s.jsx)("span",{children:"Template: Trading Journal"})]})]})]})]})]})}),(0,s.jsx)(en.default,{})]})}$.Lightbulb,T.HelpCircle,N.TrendingUp,eg.Settings,B.Code,F.Award,A.BookOpen,d.Activity,ep.Wrench,ev.FileCode,ej.GraduationCap,b.MessageCircle,q.Trophy,C.BarChart3,ef.Rocket,eb.ShieldAlert,e.s(["default",()=>eS],207443)}]);