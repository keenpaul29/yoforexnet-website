(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,178583,e=>{"use strict";let t=(0,e.i(475254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],178583)},250121,e=>{"use strict";var t=e.i(843476),a=e.i(448020);function s({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}e.s(["Skeleton",()=>s])},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},138049,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(266027),r=e.i(618566),i=e.i(353501),d=e.i(42422),l=e.i(635321),n=e.i(407398),c=e.i(30656),o=e.i(250121),m=e.i(729085),x=e.i(991918),h=e.i(463059),u=e.i(475254);(0,u.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var g=e.i(448020);let j=a.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));j.displayName="Breadcrumb";let p=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("ol",{ref:s,className:(0,g.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...a}));p.displayName="BreadcrumbList";let f=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("li",{ref:s,className:(0,g.cn)("inline-flex items-center gap-1.5",e),...a}));f.displayName="BreadcrumbItem";let N=a.forwardRef(({asChild:e,className:a,...s},r)=>{let i=e?x.Slot:"a";return(0,t.jsx)(i,{ref:r,className:(0,g.cn)("transition-colors hover:text-foreground",a),...s})});N.displayName="BreadcrumbLink";let b=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,g.cn)("font-normal text-foreground",e),...a}));b.displayName="BreadcrumbPage";let y=({children:e,className:a,...s})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,g.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",a),...s,children:e??(0,t.jsx)(h.ChevronRight,{})});y.displayName="BreadcrumbSeparator";var v=e.i(522016),w=e.i(297801),k=e.i(686311),C=e.i(178583),S=e.i(107233),$=e.i(25652),B=e.i(503116),T=e.i(870273),q=e.i(555436);let L=(0,u.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);function M({slug:e,initialCategory:x,initialThreads:h}){let u=(0,r.useRouter)(),{requireAuth:g,AuthPrompt:M}=(0,w.useAuthPrompt)("create a thread"),[P,R]=(0,a.useState)("latest"),[z,A]=(0,a.useState)(""),[F,H]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=setTimeout(()=>{H(z)},300);return()=>clearTimeout(e)},[z]);let{data:D,isLoading:K}=(0,s.useQuery)({queryKey:["/api/categories",e],initialData:x,enabled:!!e}),{data:Q}=(0,s.useQuery)({queryKey:["/api/categories"]}),{data:U}=(0,s.useQuery)({queryKey:["/api/categories",e,"subcategories"],enabled:!!e}),{data:E,isLoading:I}=(0,s.useQuery)({queryKey:["/api/categories",e,"threads",P,F],queryFn:async()=>{let t=new URLSearchParams({tab:P});F&&t.append("q",F);let a=await fetch(`/api/categories/${e}/threads?${t}`);if(!a.ok)throw Error("Failed to fetch threads");return a.json()},initialData:h,enabled:!!e}),O=K||I,V=D?.parentSlug?Q?.find(e=>e.slug===D.parentSlug):null;return D||O?O&&!D?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.default,{}),(0,t.jsxs)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsx)(o.Skeleton,{className:"h-24 w-full mb-8"}),(0,t.jsx)("div",{className:"space-y-4",children:Array(8).fill(0).map((e,a)=>(0,t.jsx)(o.Skeleton,{className:"h-32"},a))})]}),(0,t.jsx)(d.default,{})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.default,{}),(0,t.jsxs)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsx)(j,{className:"mb-6","data-testid":"breadcrumb-navigation",children:(0,t.jsxs)(p,{children:[(0,t.jsx)(f,{children:(0,t.jsx)(N,{href:"/","data-testid":"breadcrumb-home",children:(0,t.jsx)(L,{className:"h-4 w-4"})})}),(0,t.jsx)(y,{}),V&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{children:(0,t.jsx)(N,{href:`/category/${V.slug}`,"data-testid":"breadcrumb-parent",children:V.name})}),(0,t.jsx)(y,{})]}),(0,t.jsx)(f,{children:(0,t.jsx)(b,{"data-testid":"breadcrumb-current",children:D?.name})})]})}),(0,t.jsx)(l.Card,{className:"mb-8","data-testid":"card-category-header",children:(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)(l.CardTitle,{className:"text-2xl","data-testid":"heading-category-name",children:D?.name}),(0,t.jsx)(c.Badge,{variant:"secondary","data-testid":"badge-active-status",children:"Active"})]}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4","data-testid":"text-category-description",children:D?.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(k.MessageSquare,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsxs)("span",{"data-testid":"stat-thread-count",children:[(0,t.jsx)("strong",{children:(D?.threadCount??0).toLocaleString()})," threads"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(C.FileText,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsxs)("span",{"data-testid":"stat-post-count",children:[(0,t.jsx)("strong",{children:(D?.postCount??0).toLocaleString()})," posts"]})]})]})]}),(0,t.jsxs)(n.Button,{size:"default","data-testid":"button-create-thread",onClick:()=>g(()=>{u.push(`/discussions/new?category=${e}`)}),children:[(0,t.jsx)(S.Plus,{className:"w-4 h-4 mr-2"}),"New Thread"]})]})})}),U&&U.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4","data-testid":"heading-subcategories",children:"Subcategories"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(e=>(0,t.jsx)(l.Card,{className:"hover-elevate active-elevate-2 cursor-pointer","data-testid":`card-subcategory-${e.slug}`,children:(0,t.jsxs)(v.default,{href:`/category/${e.slug}`,children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{className:"text-base","data-testid":`text-subcat-name-${e.slug}`,children:e.name}),(0,t.jsx)(l.CardDescription,{className:"text-sm","data-testid":`text-subcat-desc-${e.slug}`,children:e.description})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground","data-testid":`stat-subcat-threads-${e.slug}`,children:[e.threadCount," threads"]}),(0,t.jsxs)(n.Button,{size:"sm",variant:"outline",onClick:t=>{t.preventDefault(),g(()=>{u.push(`/discussions/new?category=${e.slug}`)})},"data-testid":`button-new-thread-${e.slug}`,children:[(0,t.jsx)(S.Plus,{className:"w-3 h-3 mr-1"}),"New"]})]})})]})},e.slug))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(m.Input,{type:"text",placeholder:`Search within ${D?.name}...`,value:z,onChange:e=>A(e.target.value),className:"pl-10","data-testid":"input-category-search"})]}),F&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-2","data-testid":"text-search-info",children:["Searching in: ",D?.name]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(n.Button,{variant:"latest"===P?"default":"ghost",size:"sm",onClick:()=>R("latest"),"data-testid":"filter-latest",children:[(0,t.jsx)(B.Clock,{className:"w-4 h-4 mr-2"}),"Latest"]}),(0,t.jsxs)(n.Button,{variant:"trending"===P?"default":"ghost",size:"sm",onClick:()=>R("trending"),"data-testid":"filter-trending",children:[(0,t.jsx)($.TrendingUp,{className:"w-4 h-4 mr-2"}),"Trending"]}),(0,t.jsxs)(n.Button,{variant:"answered"===P?"default":"ghost",size:"sm",onClick:()=>R("answered"),"data-testid":"filter-answered",children:[(0,t.jsx)(T.Star,{className:"w-4 h-4 mr-2"}),"Answered"]})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground","data-testid":"text-thread-count",children:["Showing ",E?.length||0," threads"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:I&&!E?[,,,,,].fill(0).map((e,a)=>(0,t.jsx)(o.Skeleton,{className:"h-32"},a)):E&&E.length>0?E.map(e=>(0,t.jsx)(v.default,{href:`/thread/${e.slug}`,"data-testid":`link-thread-${e.id}`,children:(0,t.jsx)(l.Card,{className:"hover-elevate active-elevate-2 cursor-pointer","data-testid":`card-thread-${e.id}`,children:(0,t.jsx)(l.CardContent,{className:"pt-6",children:(0,t.jsx)("div",{className:"flex items-start gap-4",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg","data-testid":`text-thread-title-${e.id}`,children:e.title}),e.isPinned&&(0,t.jsx)(c.Badge,{variant:"secondary","data-testid":`badge-pinned-${e.id}`,children:"Pinned"}),e.isSolved&&(0,t.jsx)(c.Badge,{variant:"default","data-testid":`badge-solved-${e.id}`,children:"Solved"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2","data-testid":`text-thread-description-${e.id}`,children:e.metaDescription}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.MessageSquare,{className:"w-4 h-4"}),(0,t.jsxs)("span",{"data-testid":`stat-reply-count-${e.id}`,children:[e.replyCount," replies"]})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(C.FileText,{className:"w-4 h-4"}),(0,t.jsxs)("span",{"data-testid":`stat-view-count-${e.id}`,children:[e.views," views"]})]}),(0,t.jsxs)("span",{"data-testid":`text-last-activity-${e.id}`,children:["Last activity: ",new Date(e.lastActivityAt).toLocaleDateString()]})]})]})})})})},e.id)):(0,t.jsxs)(l.Card,{className:"p-12 text-center","data-testid":"card-no-threads",children:[(0,t.jsx)(k.MessageSquare,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:F?"No threads found":"No threads yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:F?`No threads match your search for "${F}"`:"Be the first to start a discussion in this category!"}),!F&&(0,t.jsxs)(n.Button,{"data-testid":"button-create-first-thread",onClick:()=>g(()=>{u.push(`/discussions/new?category=${e}`)}),children:[(0,t.jsx)(S.Plus,{className:"w-4 h-4 mr-2"}),"Create First Thread"]})]})})]}),(0,t.jsx)(d.default,{}),(0,t.jsx)(M,{})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.default,{}),(0,t.jsx)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:(0,t.jsxs)(l.Card,{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Category Not Found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"The category you're looking for doesn't exist."}),(0,t.jsx)(v.default,{href:"/categories",children:(0,t.jsx)(n.Button,{children:"Browse Categories"})})]})}),(0,t.jsx)(d.default,{})]})}e.s(["default",()=>M],138049)}]);