(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49,e=>{"use strict";var a=e.i(18050),t=e.i(71645),s=e.i(53501),i=e.i(42422),l=e.i(40176),n=e.i(49498),r=e.i(1928),d=e.i(61911),o=e.i(75254);let c=(0,o.default)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var x=e.i(75822),h=e.i(20278),m=e.i(45423);let u=(0,o.default)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),g=(0,o.default)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);var j=e.i(66027),p=e.i(35321),v=e.i(25652),y=e.i(35408),f=e.i(50121);function b({title:e,value:t,icon:s,trend:i,trendLabel:l,loading:n,color:r="text-primary"}){return n?(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(f.Skeleton,{className:"h-4 w-24"}),(0,a.jsx)(f.Skeleton,{className:"h-4 w-4 rounded"})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsx)(f.Skeleton,{className:"h-8 w-32 mb-2"}),(0,a.jsx)(f.Skeleton,{className:"h-3 w-20"})]})]}):(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(p.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:e}),(0,a.jsx)(s,{className:`h-4 w-4 ${r}`})]}),(0,a.jsxs)(p.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t}),void 0!==i&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i>=0?(0,a.jsx)(v.TrendingUp,{className:"h-3 w-3 text-green-500"}):(0,a.jsx)(y.TrendingDown,{className:"h-3 w-3 text-red-500"}),(0,a.jsxs)("span",{className:i>=0?"text-green-500":"text-red-500",children:[Math.abs(i),"%"]}),l&&(0,a.jsx)("span",{children:l})]})]})]})}var N=e.i(7398),C=e.i(40160);function w({title:e,children:t,loading:s,error:i,onExport:l,actions:n}){return s?(0,a.jsxs)(p.Card,{children:[(0,a.jsx)(p.CardHeader,{children:(0,a.jsx)(f.Skeleton,{className:"h-6 w-48"})}),(0,a.jsx)(p.CardContent,{children:(0,a.jsx)(f.Skeleton,{className:"h-64 w-full"})})]}):i?(0,a.jsxs)(p.Card,{children:[(0,a.jsx)(p.CardHeader,{children:(0,a.jsx)(p.CardTitle,{children:e})}),(0,a.jsx)(p.CardContent,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:(0,a.jsx)("p",{children:i})})})]}):(0,a.jsxs)(p.Card,{children:[(0,a.jsxs)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,a.jsx)(p.CardTitle,{children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[n,l&&(0,a.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:l,children:[(0,a.jsx)(C.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),(0,a.jsx)(p.CardContent,{children:t})]})}var k=e.i(12426),S=e.i(55706),T=e.i(29228),R=e.i(85183),A=e.i(93230),D=e.i(72526),L=e.i(34239),P=e.i(44098);function $(){let{data:e,isLoading:t}=(0,j.useQuery)({queryKey:["/api/me/sales-dashboard"]}),{data:s,isLoading:i}=(0,j.useQuery)({queryKey:["/api/me/earnings-breakdown"]}),{data:l,isLoading:n}=(0,j.useQuery)({queryKey:["/api/me/goals"]});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Revenue",value:`$${e?.totalRevenue||0}`,icon:k.DollarSign,trend:12.5,trendLabel:"vs last week",loading:t,color:"text-green-500","data-testid":"kpi-total-revenue"}),(0,a.jsx)(b,{title:"Total Sales",value:e?.totalSales||0,icon:r.ShoppingCart,trend:8.2,trendLabel:"vs last week",loading:t,color:"text-blue-500","data-testid":"kpi-total-sales"}),(0,a.jsx)(b,{title:"Avg Sale Value",value:`$${e?.avgSale?.toFixed(2)||"0.00"}`,icon:v.TrendingUp,trend:3.1,loading:t,color:"text-purple-500","data-testid":"kpi-avg-sale-value"}),(0,a.jsx)(b,{title:"Active Goals",value:l?.filter(e=>"active"===e.status).length||0,icon:d.Users,loading:n,color:"text-orange-500","data-testid":"kpi-active-goals"})]}),(0,a.jsx)(w,{title:"Revenue Trend (Last 7 Days)",loading:t,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(T.LineChart,{data:[{date:"Mon",revenue:1200},{date:"Tue",revenue:1900},{date:"Wed",revenue:1500},{date:"Thu",revenue:2200},{date:"Fri",revenue:1800},{date:"Sat",revenue:2400},{date:"Sun",revenue:2100}],children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"date"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(S.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(w,{title:"Recent Activity",loading:t,children:(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b last:border-0",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(r.ShoppingCart,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"New sale: Expert Advisor Pro"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e," hours ago"]})]}),(0,a.jsx)("p",{className:"font-semibold",children:"+$50"})]},e))})}),(0,a.jsx)(w,{title:"Active Goals",loading:n,children:(0,a.jsx)("div",{className:"space-y-4",children:l?.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"font-medium",children:e.goalType}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.currentValue," / ",e.targetValue]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${e.currentValue/e.targetValue*100}%`}})})]},e.id))||(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No active goals"})})})]})]})}var K=e.i(35251),M=e.i(29085),B=e.i(73375),q=e.i(63059),F=e.i(55436);function V({columns:e,data:s,loading:i,searchable:l=!0,pageSize:n=10}){let[r,d]=(0,t.useState)(""),[o,c]=(0,t.useState)(0),x=r?s.filter(a=>e.some(e=>String(a[e.key]).toLowerCase().includes(r.toLowerCase()))):s,h=x.slice(o*n,(o+1)*n),m=Math.ceil(x.length/n);return i?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Skeleton,{className:"h-10 w-full"}),(0,a.jsx)(f.Skeleton,{className:"h-64 w-full"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[l&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(F.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(M.Input,{placeholder:"Search...",value:r,onChange:e=>d(e.target.value),className:"pl-9"})]}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(K.Table,{children:[(0,a.jsx)(K.TableHeader,{children:(0,a.jsx)(K.TableRow,{children:e.map(e=>(0,a.jsx)(K.TableHead,{children:e.label},e.key))})}),(0,a.jsx)(K.TableBody,{children:0===h.length?(0,a.jsx)(K.TableRow,{children:(0,a.jsx)(K.TableCell,{colSpan:e.length,className:"text-center text-muted-foreground",children:"No data available"})}):h.map((t,s)=>(0,a.jsx)(K.TableRow,{children:e.map(e=>(0,a.jsx)(K.TableCell,{children:e.render?e.render(t[e.key],t):t[e.key]},e.key))},s))})]})}),m>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",o*n+1," to ",Math.min((o+1)*n,x.length)," of ",x.length," results"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:()=>c(e=>Math.max(0,e-1)),disabled:0===o,children:[(0,a.jsx)(B.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:()=>c(e=>Math.min(m-1,e+1)),disabled:o===m-1,children:["Next",(0,a.jsx)(q.ChevronRight,{className:"h-4 w-4"})]})]})]})]})}var G=e.i(79966),I=e.i(70682),U=e.i(85024),O=e.i(61277),O=O,E=e.i(97548),Q=e.i(37727),z=e.i(45919);function Y({onFilterChange:e,showDateRange:s=!0,showCategory:i=!1,showStatus:l=!1,categories:n=[],statuses:r=[]}){let[d,o]=(0,t.useState)(),[c,x]=(0,t.useState)(),[h,m]=(0,t.useState)(),[u,g]=(0,t.useState)();return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-4 bg-muted/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(E.Filter,{className:"h-4 w-4"}),"Filters:"]}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(I.Popover,{children:[(0,a.jsx)(I.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(N.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(O.default,{className:"h-4 w-4 mr-2"}),d?(0,z.format)(d,"MMM d, yyyy"):"From"]})}),(0,a.jsx)(I.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(G.Calendar,{mode:"single",selected:d,onSelect:o})})]}),(0,a.jsxs)(I.Popover,{children:[(0,a.jsx)(I.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(N.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(O.default,{className:"h-4 w-4 mr-2"}),c?(0,z.format)(c,"MMM d, yyyy"):"To"]})}),(0,a.jsx)(I.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(G.Calendar,{mode:"single",selected:c,onSelect:x})})]})]}),i&&(0,a.jsxs)(U.Select,{value:h,onValueChange:m,children:[(0,a.jsx)(U.SelectTrigger,{className:"w-40",children:(0,a.jsx)(U.SelectValue,{placeholder:"Category"})}),(0,a.jsx)(U.SelectContent,{children:n.map(e=>(0,a.jsx)(U.SelectItem,{value:e,children:e},e))})]}),l&&(0,a.jsxs)(U.Select,{value:u,onValueChange:g,children:[(0,a.jsx)(U.SelectTrigger,{className:"w-32",children:(0,a.jsx)(U.SelectValue,{placeholder:"Status"})}),(0,a.jsx)(U.SelectContent,{children:r.map(e=>(0,a.jsx)(U.SelectItem,{value:e,children:e},e))})]}),(0,a.jsx)(N.Button,{size:"sm",onClick:()=>{e({dateFrom:d,dateTo:c,category:h,status:u})},children:"Apply"}),(0,a.jsxs)(N.Button,{size:"sm",variant:"ghost",onClick:()=>{o(void 0),x(void 0),m(void 0),g(void 0),e({})},children:[(0,a.jsx)(Q.X,{className:"h-4 w-4 mr-1"}),"Reset"]})]})}let H=(0,o.default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var W=e.i(80942),X=e.i(9694),J=e.i(38814),_=e.i(33808),Z=e.i(22787),ee=e.i(59559);function ea(){let[e,s]=(0,t.useState)({}),{data:i,isLoading:l}=(0,j.useQuery)({queryKey:["/api/me/sales-dashboard",e]}),n=[{name:"EA Pro",sales:45,revenue:2250},{name:"Indicator Pack",sales:32,revenue:960},{name:"Strategy Guide",sales:28,revenue:840},{name:"Trading Bot",sales:18,revenue:1440}],d=[{name:"Expert Advisors",value:45,color:"hsl(var(--chart-1))"},{name:"Indicators",value:30,color:"hsl(var(--chart-2))"},{name:"Articles",value:15,color:"hsl(var(--chart-3))"},{name:"Other",value:10,color:"hsl(var(--chart-4))"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Revenue",value:`$${i?.totalRevenue||0}`,icon:k.DollarSign,trend:15.3,trendLabel:"vs last month",loading:l,color:"text-green-500","data-testid":"kpi-total-revenue"}),(0,a.jsx)(b,{title:"Total Sales",value:i?.totalSales||0,icon:r.ShoppingCart,trend:8.7,loading:l,color:"text-blue-500","data-testid":"kpi-total-sales"}),(0,a.jsx)(b,{title:"Avg Sale Value",value:`$${i?.avgSale?.toFixed(2)||"0.00"}`,icon:v.TrendingUp,trend:-2.4,loading:l,color:"text-purple-500","data-testid":"kpi-avg-sale-value"}),(0,a.jsx)(b,{title:"Conversion Rate",value:`${i?.conversionRate||0}%`,icon:H,trend:4.1,loading:l,color:"text-orange-500","data-testid":"kpi-conversion-rate"})]}),(0,a.jsx)(Y,{onFilterChange:s,showDateRange:!0,showCategory:!0,categories:["Expert Advisors","Indicators","Articles"]}),(0,a.jsx)(w,{title:"Revenue Timeline (Last 30 Days)",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(T.LineChart,{data:n,children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"name"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(ee.Legend,{}),(0,a.jsx)(S.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(w,{title:"Top 10 Products",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(X.BarChart,{data:n,children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"name"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(W.Bar,{dataKey:"sales",fill:"hsl(var(--primary))"})]})})}),(0,a.jsx)(w,{title:"Sales by Product Type",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(_.PieChart,{children:[(0,a.jsx)(J.Pie,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:a})=>`${e}: ${(100*a).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d.map((e,t)=>(0,a.jsx)(Z.Cell,{fill:e.color},`cell-${t}`))}),(0,a.jsx)(L.Tooltip,{})]})})})]}),(0,a.jsx)(w,{title:"Recent Sales",loading:l,children:(0,a.jsx)(V,{columns:[{key:"product",label:"Product"},{key:"buyer",label:"Buyer"},{key:"price",label:"Price"},{key:"date",label:"Date"}],data:[{product:"EA Pro v2",buyer:"trader123",price:"$50",date:"2 hours ago"},{product:"Indicator Set",buyer:"forex_master",price:"$30",date:"5 hours ago"},{product:"Strategy Guide",buyer:"newbie_trader",price:"$25",date:"1 day ago"}],loading:l})})]})}var et=e.i(54616),es=e.i(1831),ei=e.i(15683);let el=(0,o.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var en=e.i(74886),er=e.i(43531),ed=e.i(62031),eo=e.i(237),ec=e.i(1725);function ex(){let[e,s]=(0,t.useState)(!1),{toast:i}=(0,ei.useToast)(),{data:l,isLoading:n}=(0,j.useQuery)({queryKey:["/api/me/referral-stats"]}),{data:r,isLoading:o}=(0,j.useQuery)({queryKey:["/api/me/referrals"]}),c=(0,et.useMutation)({mutationFn:()=>(0,es.apiRequest)("POST","/api/me/generate-referral-code"),onSuccess:()=>{es.queryClient.invalidateQueries({queryKey:["/api/me/referrals"]}),i({title:"Referral code generated!",description:"Share your new link to start earning."})}}),x="https://yoforex.com/ref/ABC123";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Referrals",value:l?.totalReferrals||0,icon:d.Users,trend:12,trendLabel:"this month",loading:n,color:"text-blue-500","data-testid":"kpi-total-referrals"}),(0,a.jsx)(b,{title:"Total Earnings",value:`$${l?.totalEarnings||0}`,icon:k.DollarSign,trend:18.5,loading:n,color:"text-green-500","data-testid":"kpi-referral-total-earnings"}),(0,a.jsx)(b,{title:"This Month",value:`$${l?.monthlyEarnings||0}`,icon:v.TrendingUp,loading:n,color:"text-purple-500","data-testid":"kpi-referral-month-earnings"}),(0,a.jsx)(b,{title:"Avg per User",value:`$${l?.totalReferrals?(l.totalEarnings/l.totalReferrals).toFixed(2):"0.00"}`,icon:k.DollarSign,loading:n,color:"text-orange-500","data-testid":"kpi-referral-avg-per-user"})]}),(0,a.jsx)(w,{title:"Your Referral Link",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(M.Input,{value:x,readOnly:!0,className:"flex-1","data-testid":"input-referral-link"}),(0,a.jsx)(N.Button,{onClick:()=>{navigator.clipboard.writeText(x),s(!0),i({title:"Copied!",description:"Referral link copied to clipboard"}),setTimeout(()=>s(!1),2e3)},variant:"outline","data-testid":"button-copy-link",children:e?(0,a.jsx)(er.Check,{className:"h-4 w-4"}):(0,a.jsx)(en.Copy,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(N.Button,{variant:"outline",size:"sm","data-testid":"button-share-twitter",children:[(0,a.jsx)(ed.Share2,{className:"h-4 w-4 mr-2"}),"Share on Twitter"]}),(0,a.jsxs)(N.Button,{variant:"outline",size:"sm","data-testid":"button-share-telegram",children:[(0,a.jsx)(ed.Share2,{className:"h-4 w-4 mr-2"}),"Share on Telegram"]}),(0,a.jsxs)(N.Button,{onClick:()=>c.mutate(),variant:"outline",size:"sm","data-testid":"button-generate-new",children:[(0,a.jsx)(el,{className:"h-4 w-4 mr-2"}),"Generate New Code"]})]})]})}),(0,a.jsx)(w,{title:"Referral Earnings Timeline",loading:n,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(ec.AreaChart,{data:[{month:"Jan",earnings:45},{month:"Feb",earnings:52},{month:"Mar",earnings:78},{month:"Apr",earnings:95},{month:"May",earnings:120},{month:"Jun",earnings:145}],children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"month"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(eo.Area,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3})]})})}),(0,a.jsx)(w,{title:"Your Referrals",loading:o,children:(0,a.jsx)(V,{columns:[{key:"username",label:"Username"},{key:"joined",label:"Joined Date"},{key:"earnings",label:"Your Earnings"},{key:"status",label:"Status"}],data:r||[{username:"trader123",joined:"2024-01-15",earnings:"$45",status:"Active"},{username:"forex_pro",joined:"2024-02-20",earnings:"$32",status:"Active"},{username:"newbie_t",joined:"2024-03-05",earnings:"$18",status:"Active"}],loading:o})})]})}var eh=e.i(86536),em=e.i(70273),eu=e.i(86311);function eg(){let{data:e,isLoading:t}=(0,j.useQuery)({queryKey:["/api/me/sales-dashboard"]}),s=[{name:"EA Pro v2",views:3450,downloads:1250,rating:4.8},{name:"Indicator Pack",views:2890,downloads:980,rating:4.6},{name:"Strategy Guide",views:2340,downloads:750,rating:4.9},{name:"Trading Bot",views:1890,downloads:520,rating:4.5}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Views",value:"15.2K",icon:eh.Eye,trend:12.5,trendLabel:"vs last month",loading:t,color:"text-blue-500","data-testid":"kpi-total-views"}),(0,a.jsx)(b,{title:"Total Downloads",value:"4.5K",icon:C.Download,trend:8.3,loading:t,color:"text-green-500","data-testid":"kpi-total-downloads"}),(0,a.jsx)(b,{title:"Avg Rating",value:"4.7",icon:em.Star,loading:t,color:"text-yellow-500","data-testid":"kpi-avg-rating"}),(0,a.jsx)(b,{title:"Total Reviews",value:"328",icon:eu.MessageSquare,trend:15.2,loading:t,color:"text-purple-500","data-testid":"kpi-total-reviews"})]}),(0,a.jsx)(w,{title:"Content Views & Downloads Trend",loading:t,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(T.LineChart,{data:[{date:"Jan",views:1200,downloads:450},{date:"Feb",views:1500,downloads:520},{date:"Mar",views:1800,downloads:680},{date:"Apr",views:2200,downloads:790},{date:"May",views:2500,downloads:850},{date:"Jun",views:2800,downloads:920}],children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"date"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(ee.Legend,{}),(0,a.jsx)(S.Line,{type:"monotone",dataKey:"views",stroke:"hsl(var(--primary))",strokeWidth:2}),(0,a.jsx)(S.Line,{type:"monotone",dataKey:"downloads",stroke:"hsl(var(--chart-2))",strokeWidth:2})]})})}),(0,a.jsx)(w,{title:"Top Content Performance",loading:t,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(X.BarChart,{data:s,children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"name"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(ee.Legend,{}),(0,a.jsx)(W.Bar,{dataKey:"views",fill:"hsl(var(--primary))"}),(0,a.jsx)(W.Bar,{dataKey:"downloads",fill:"hsl(var(--chart-2))"})]})})}),(0,a.jsx)(w,{title:"Content Performance Details",loading:t,children:(0,a.jsx)(V,{columns:[{key:"name",label:"Content"},{key:"views",label:"Views"},{key:"downloads",label:"Downloads"},{key:"rating",label:"Rating",render:e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(em.Star,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"}),e]})}],data:s,loading:t})})]})}var ej=e.i(52754);let ep=(0,o.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function ev(){let[e,s]=(0,t.useState)({}),{data:i,isLoading:l}=(0,j.useQuery)({queryKey:["/api/me/earnings-breakdown",e]}),n=[{name:"Sales",value:65,coins:13e3,color:"hsl(var(--chart-1))"},{name:"Referrals",value:20,coins:4e3,color:"hsl(var(--chart-2))"},{name:"Replies",value:10,coins:2e3,color:"hsl(var(--chart-3))"},{name:"Other",value:5,coins:1e3,color:"hsl(var(--chart-4))"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Earnings",value:`${i?.total||2e4} coins`,icon:x.Coins,trend:15.3,trendLabel:"vs last month",loading:l,color:"text-yellow-500","data-testid":"kpi-total-earnings"}),(0,a.jsx)(b,{title:"This Month",value:"920 coins",icon:v.TrendingUp,trend:8.2,loading:l,color:"text-green-500","data-testid":"kpi-month-earnings"}),(0,a.jsx)(b,{title:"Current Balance",value:"5,430 coins",icon:ej.Wallet,loading:l,color:"text-blue-500","data-testid":"kpi-current-balance"}),(0,a.jsx)(b,{title:"Pending Withdrawal",value:"0 coins",icon:ep,loading:l,color:"text-purple-500","data-testid":"kpi-pending-withdrawal"})]}),(0,a.jsx)(Y,{onFilterChange:s,showDateRange:!0,showCategory:!0,categories:["Sales","Referrals","Replies","Other"]}),(0,a.jsx)(w,{title:"Earnings Timeline",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(ec.AreaChart,{data:[{month:"Jan",earnings:450},{month:"Feb",earnings:520},{month:"Mar",earnings:680},{month:"Apr",earnings:790},{month:"May",earnings:850},{month:"Jun",earnings:920}],children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"month"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(eo.Area,{type:"monotone",dataKey:"earnings",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3})]})})}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(w,{title:"Earnings by Source",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(_.PieChart,{children:[(0,a.jsx)(J.Pie,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:a})=>`${e}: ${(100*a).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:n.map((e,t)=>(0,a.jsx)(Z.Cell,{fill:e.color},`cell-${t}`))}),(0,a.jsx)(L.Tooltip,{})]})})}),(0,a.jsx)(w,{title:"Source Breakdown",loading:l,children:(0,a.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold",children:[e.coins," coins"]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.value,"%"]})]})]},e.name))})})]}),(0,a.jsx)(w,{title:"Recent Transactions",loading:l,children:(0,a.jsx)(V,{columns:[{key:"type",label:"Type"},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:e=>(0,a.jsx)("span",{className:e.startsWith("+")?"text-green-500 font-semibold":"text-red-500 font-semibold",children:e})},{key:"date",label:"Date"}],data:[{type:"Sale",description:"EA Pro purchased",amount:"+500 coins",date:"2 hours ago"},{type:"Referral",description:"New user signup",amount:"+50 coins",date:"5 hours ago"},{type:"Reply",description:"Forum contribution",amount:"+1 coin",date:"1 day ago"},{type:"Withdrawal",description:"USDT withdrawal",amount:"-1000 coins",date:"2 days ago"}],loading:l})})]})}var ey=e.i(79196),ef=e.i(93753),eb=e.i(69638),eN=e.i(3116),eC=e.i(7233),ew=e.i(79779);function ek(){let[e,s]=(0,t.useState)(!1),[i,l]=(0,t.useState)(""),[n,r]=(0,t.useState)(""),{toast:d}=(0,ei.useToast)(),{data:o=[],isLoading:c}=(0,j.useQuery)({queryKey:["/api/me/goals"]}),{data:x,isLoading:m}=(0,j.useQuery)({queryKey:["/api/me/achievements"]}),u=(0,et.useMutation)({mutationFn:e=>(0,es.apiRequest)("POST","/api/me/goals",e),onSuccess:()=>{es.queryClient.invalidateQueries({queryKey:["/api/me/goals"]}),d({title:"Goal created!",description:"Your new goal has been set."}),s(!1)}}),g=o.filter(e=>"active"===e.status),p=o.filter(e=>"completed"===e.status);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Active Goals",value:g.length,icon:h.Target,loading:c,color:"text-blue-500","data-testid":"kpi-active-goals"}),(0,a.jsx)(b,{title:"Completed",value:p.length,icon:eb.CheckCircle,loading:c,color:"text-green-500","data-testid":"kpi-completed-goals"}),(0,a.jsx)(b,{title:"In Progress",value:g.filter(e=>e.currentValue>0).length,icon:v.TrendingUp,loading:c,color:"text-purple-500","data-testid":"kpi-in-progress-goals"}),(0,a.jsx)(b,{title:"Pending",value:g.filter(e=>0===e.currentValue).length,icon:eN.Clock,loading:c,color:"text-orange-500","data-testid":"kpi-pending-goals"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(ey.Dialog,{open:e,onOpenChange:s,children:[(0,a.jsx)(ey.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(N.Button,{"data-testid":"button-create-goal",children:[(0,a.jsx)(eC.Plus,{className:"h-4 w-4 mr-2"}),"Create New Goal"]})}),(0,a.jsxs)(ey.DialogContent,{children:[(0,a.jsx)(ey.DialogHeader,{children:(0,a.jsx)(ey.DialogTitle,{children:"Create New Goal"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ef.Label,{children:"Goal Type"}),(0,a.jsxs)(U.Select,{value:i,onValueChange:l,children:[(0,a.jsx)(U.SelectTrigger,{"data-testid":"select-goal-type",children:(0,a.jsx)(U.SelectValue,{placeholder:"Select goal type"})}),(0,a.jsxs)(U.SelectContent,{children:[(0,a.jsx)(U.SelectItem,{value:"sales",children:"Monthly Sales"}),(0,a.jsx)(U.SelectItem,{value:"revenue",children:"Revenue Target"}),(0,a.jsx)(U.SelectItem,{value:"referrals",children:"Referral Count"}),(0,a.jsx)(U.SelectItem,{value:"followers",children:"Follower Count"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ef.Label,{children:"Target Value"}),(0,a.jsx)(M.Input,{type:"number",value:n,onChange:e=>r(e.target.value),placeholder:"e.g., 100","data-testid":"input-target-value"})]}),(0,a.jsx)(N.Button,{onClick:()=>{let e=new Date,a=new Date;a.setMonth(a.getMonth()+1),u.mutate({goalType:i,targetValue:parseInt(n),currentValue:0,startDate:e.toISOString(),endDate:a.toISOString(),status:"active"})},disabled:!i||!n||u.isPending,className:"w-full","data-testid":"button-submit-goal",children:"Create Goal"})]})]})]})}),(0,a.jsx)(w,{title:"Active Goals",loading:c,children:(0,a.jsx)("div",{className:"space-y-6",children:0===g.length?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No active goals. Create one to get started!"}):g.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.goalType}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.currentValue," / ",e.targetValue]})]}),(0,a.jsxs)("span",{className:"text-sm font-semibold",children:[Math.round(e.currentValue/e.targetValue*100),"%"]})]}),(0,a.jsx)(ew.Progress,{value:e.currentValue/e.targetValue*100})]},e.id))})}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(w,{title:"Completed Goals",loading:c,children:(0,a.jsx)("div",{className:"space-y-4",children:0===p.length?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No completed goals yet"}):p.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b last:border-0",children:[(0,a.jsx)(eb.CheckCircle,{className:"h-5 w-5 text-green-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.goalType}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Target: ",e.targetValue]})]})]},e.id))})}),(0,a.jsx)(w,{title:"Achievement Badges",loading:m,children:(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:x?.slice(0,6).map(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:e.achievement?.icon||"ðŸ†"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.achievement?.name}),e.unlockedAt?(0,a.jsx)("span",{className:"text-xs text-green-500",children:"Unlocked"}):(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.progress,"/",e.achievement?.requirement]})]},e.id))||(0,a.jsx)("p",{className:"text-muted-foreground text-center col-span-3",children:"No achievements yet"})})})]})]})}let eS=(0,o.default)("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var eT=e.i(63488),eR=e.i(30656);function eA(){let[e,s]=(0,t.useState)({}),{toast:i}=(0,ei.useToast)(),{data:l,isLoading:n}=(0,j.useQuery)({queryKey:["/api/me/notifications",e]}),r=(0,et.useMutation)({mutationFn:async e=>await (0,es.apiRequest)("PATCH",`/api/notifications/${e}/read`),onSuccess:()=>{es.queryClient.invalidateQueries({queryKey:["/api/me/notifications"]}),i({title:"Success",description:"Notification marked as read"})}}),d=(0,et.useMutation)({mutationFn:async()=>await (0,es.apiRequest)("POST","/api/notifications/mark-all-read"),onSuccess:()=>{es.queryClient.invalidateQueries({queryKey:["/api/me/notifications"]}),i({title:"Success",description:"All notifications marked as read"})}}),o=l||[],c=o.filter(e=>!e.isRead).length,x=o.filter(e=>new Date(e.createdAt).toDateString()===new Date().toDateString()).length,h=[{type:"system",count:o.filter(e=>"system"===e.type).length},{type:"sale",count:o.filter(e=>"sale"===e.type).length},{type:"message",count:o.filter(e=>"message"===e.type).length},{type:"alert",count:o.filter(e=>"alert"===e.type).length}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Notifications",value:o.length,icon:m.Bell,loading:n,color:"text-blue-500","data-testid":"kpi-total-notifications"}),(0,a.jsx)(b,{title:"Unread",value:c,icon:eT.Mail,loading:n,color:"text-orange-500","data-testid":"kpi-unread-notifications"}),(0,a.jsx)(b,{title:"Today",value:x,icon:m.Bell,loading:n,color:"text-green-500","data-testid":"kpi-today-notifications"}),(0,a.jsx)(b,{title:"Read",value:o.length-c,icon:eb.CheckCircle,loading:n,color:"text-gray-500","data-testid":"kpi-read-notifications"})]}),(0,a.jsx)(Y,{onFilterChange:s,showCategory:!0,showStatus:!0,categories:["system","sale","message","alert"],statuses:["read","unread"]}),(0,a.jsx)(w,{title:"Notification Feed",loading:n,actions:(0,a.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:()=>d.mutate(),disabled:d.isPending||0===c,"data-testid":"button-mark-all-read",children:[(0,a.jsx)(eb.CheckCircle,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]}),children:(0,a.jsx)("div",{className:"space-y-2",children:0===o.length?(0,a.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,a.jsx)(eS,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No notifications"})]}):o.map(e=>(0,a.jsxs)("div",{className:`flex items-start gap-4 p-4 border rounded-lg ${!e.isRead?"bg-muted/50":""}`,"data-testid":`notification-${e.id}`,children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-semibold","data-testid":`notification-title-${e.id}`,children:e.title}),!e.isRead&&(0,a.jsx)(eR.Badge,{variant:"default","data-testid":`badge-unread-${e.id}`,children:"New"}),(0,a.jsx)(eR.Badge,{variant:"outline","data-testid":`badge-type-${e.id}`,children:e.type})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2","data-testid":`notification-description-${e.id}`,children:e.description}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString()})]}),!e.isRead&&(0,a.jsx)(N.Button,{variant:"ghost",size:"sm",onClick:()=>r.mutate(e.id),disabled:r.isPending,"data-testid":`button-mark-read-${e.id}`,children:(0,a.jsx)(eb.CheckCircle,{className:"h-4 w-4"})})]},e.id))})}),(0,a.jsx)(w,{title:"Notifications by Type",loading:n,children:(0,a.jsx)(V,{columns:[{key:"type",label:"Type"},{key:"count",label:"Count"}],data:h,loading:n,searchable:!1})})]})}var eD=e.i(79002),eL=e.i(44793);function eP(){let[e,s]=(0,t.useState)({}),{data:i,isLoading:l}=(0,j.useQuery)({queryKey:["/api/me/customers",e]}),{data:n,isLoading:r}=(0,j.useQuery)({queryKey:["/api/me/customer-stats"]}),o=i||[],c=o.length,x=o.filter(e=>new Date(e.joinedAt).getTime()>Date.now()-2592e6).length,m=o.filter(e=>"active"===e.segment||"high-value"===e.segment).length,u=[{name:"High Value",value:o.filter(e=>"high-value"===e.segment).length,color:"hsl(var(--chart-1))"},{name:"Active",value:o.filter(e=>"active"===e.segment).length,color:"hsl(var(--chart-2))"},{name:"New",value:o.filter(e=>"new"===e.segment).length,color:"hsl(var(--chart-3))"},{name:"Inactive",value:o.filter(e=>"inactive"===e.segment).length,color:"hsl(var(--chart-4))"}],g=[...o].sort((e,a)=>a.totalSpent-e.totalSpent).slice(0,5);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Total Customers",value:c,icon:d.Users,loading:l,color:"text-blue-500","data-testid":"kpi-total-customers"}),(0,a.jsx)(b,{title:"New This Month",value:x,icon:eD.UserPlus,trend:12.5,trendLabel:"vs last month",loading:l,color:"text-green-500","data-testid":"kpi-new-customers"}),(0,a.jsx)(b,{title:"Active Customers",value:m,icon:v.TrendingUp,loading:l,color:"text-purple-500","data-testid":"kpi-active-customers"}),(0,a.jsx)(b,{title:"Retention Rate",value:`${n?.retentionRate||85}%`,icon:h.Target,trend:3.2,loading:r,color:"text-orange-500","data-testid":"kpi-retention-rate"})]}),(0,a.jsx)(Y,{onFilterChange:s,showDateRange:!0,showCategory:!0,showStatus:!0,categories:["high-value","active","new","inactive"],statuses:["active","inactive"]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(w,{title:"Customer Segmentation",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(_.PieChart,{children:[(0,a.jsx)(J.Pie,{data:u,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:a})=>`${e}: ${(100*a).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:u.map((e,t)=>(0,a.jsx)(Z.Cell,{fill:e.color},`cell-${t}`))}),(0,a.jsx)(L.Tooltip,{})]})})}),(0,a.jsx)(w,{title:"Top 5 Customers by Spend",loading:l,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(X.BarChart,{data:g,children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"username"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(W.Bar,{dataKey:"totalSpent",fill:"hsl(var(--primary))"})]})})})]}),(0,a.jsx)(w,{title:"Customer List",loading:l,children:(0,a.jsx)(V,{columns:[{key:"username",label:"Customer",render:(e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(eL.Avatar,{className:"h-8 w-8",children:[(0,a.jsx)(eL.AvatarImage,{src:t.avatar}),(0,a.jsx)(eL.AvatarFallback,{children:e.substring(0,2).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium","data-testid":`customer-name-${t.id}`,children:e}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:t.email})]})]})},{key:"segment",label:"Segment",render:e=>(0,a.jsx)(eR.Badge,{variant:(e=>{switch(e){case"high-value":return"default";case"active":return"secondary";case"new":default:return"outline";case"inactive":return"destructive"}})(e),"data-testid":`segment-${e}`,children:e.replace("-"," ")})},{key:"totalPurchases",label:"Purchases",render:e=>(0,a.jsx)("span",{"data-testid":"customer-purchases",children:e})},{key:"totalSpent",label:"Total Spent",render:e=>(0,a.jsxs)("span",{className:"font-semibold","data-testid":"customer-spent",children:[e," coins"]})},{key:"lastPurchase",label:"Last Purchase",render:e=>(0,a.jsx)("span",{className:"text-sm",children:e?new Date(e).toLocaleDateString():"Never"})},{key:"id",label:"Actions",render:e=>(0,a.jsx)(N.Button,{variant:"outline",size:"sm","data-testid":`button-view-customer-${e}`,children:"View Profile"})}],data:o,loading:l})})]})}var e$=e.i(96112),eK=e.i(87945);function eM(){let[e,s]=(0,t.useState)({}),[i,l]=(0,t.useState)(!1),[n,r]=(0,t.useState)({name:"",type:"email",subject:"",content:""}),{toast:d}=(0,ei.useToast)(),{data:o,isLoading:c}=(0,j.useQuery)({queryKey:["/api/me/campaigns",e]}),{data:x,isLoading:h}=(0,j.useQuery)({queryKey:["/api/me/campaign-stats"]}),m=(0,et.useMutation)({mutationFn:async e=>await (0,es.apiRequest)("POST","/api/campaigns",e),onSuccess:()=>{es.queryClient.invalidateQueries({queryKey:["/api/me/campaigns"]}),l(!1),r({name:"",type:"email",subject:"",content:""}),d({title:"Success",description:"Campaign created successfully"})}}),u=o||[],g=u.filter(e=>"active"===e.status).length,p=u.reduce((e,a)=>e+a.sentCount,0),y=u.length>0?u.reduce((e,a)=>e+a.openRate,0)/u.length:0,f=u.length>0?u.reduce((e,a)=>e+a.clickRate,0)/u.length:0,C=u.map(e=>({name:e.name.length>15?e.name.substring(0,15)+"...":e.name,opens:e.openRate,clicks:e.clickRate})),$=u.filter(e=>e.revenue>0).map(e=>({name:e.name.length>15?e.name.substring(0,15)+"...":e.name,revenue:e.revenue}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(b,{title:"Active Campaigns",value:g,icon:eT.Mail,loading:c,color:"text-blue-500","data-testid":"kpi-active-campaigns"}),(0,a.jsx)(b,{title:"Total Sent",value:p.toLocaleString(),icon:v.TrendingUp,trend:15.3,trendLabel:"vs last month",loading:c,color:"text-green-500","data-testid":"kpi-total-sent"}),(0,a.jsx)(b,{title:"Avg Open Rate",value:`${y.toFixed(1)}%`,icon:eT.Mail,trend:2.4,loading:c,color:"text-purple-500","data-testid":"kpi-avg-open-rate"}),(0,a.jsx)(b,{title:"Avg Click Rate",value:`${f.toFixed(1)}%`,icon:e$.MousePointer,trend:1.8,loading:c,color:"text-orange-500","data-testid":"kpi-avg-click-rate"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(Y,{onFilterChange:s,showDateRange:!0,showCategory:!0,showStatus:!0,categories:["email","banner","social"],statuses:["draft","active","paused","completed"]}),(0,a.jsxs)(ey.Dialog,{open:i,onOpenChange:l,children:[(0,a.jsx)(ey.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(N.Button,{"data-testid":"button-create-campaign",children:[(0,a.jsx)(eC.Plus,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})}),(0,a.jsxs)(ey.DialogContent,{className:"max-w-2xl",children:[(0,a.jsxs)(ey.DialogHeader,{children:[(0,a.jsx)(ey.DialogTitle,{children:"Create New Campaign"}),(0,a.jsx)(ey.DialogDescription,{children:"Set up a new marketing campaign to engage your customers"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ef.Label,{htmlFor:"campaign-name",children:"Campaign Name"}),(0,a.jsx)(M.Input,{id:"campaign-name",placeholder:"e.g., Summer Sale 2024",value:n.name,onChange:e=>r({...n,name:e.target.value}),"data-testid":"input-campaign-name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ef.Label,{htmlFor:"campaign-type",children:"Type"}),(0,a.jsxs)(U.Select,{value:n.type,onValueChange:e=>r({...n,type:e}),children:[(0,a.jsx)(U.SelectTrigger,{id:"campaign-type","data-testid":"select-campaign-type",children:(0,a.jsx)(U.SelectValue,{})}),(0,a.jsxs)(U.SelectContent,{children:[(0,a.jsx)(U.SelectItem,{value:"email",children:"Email"}),(0,a.jsx)(U.SelectItem,{value:"banner",children:"Banner"}),(0,a.jsx)(U.SelectItem,{value:"social",children:"Social Media"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ef.Label,{htmlFor:"campaign-subject",children:"Subject Line"}),(0,a.jsx)(M.Input,{id:"campaign-subject",placeholder:"e.g., Get 50% off all EAs this week!",value:n.subject,onChange:e=>r({...n,subject:e.target.value}),"data-testid":"input-campaign-subject"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ef.Label,{htmlFor:"campaign-content",children:"Content"}),(0,a.jsx)(eK.Textarea,{id:"campaign-content",placeholder:"Write your campaign message...",rows:5,value:n.content,onChange:e=>r({...n,content:e.target.value}),"data-testid":"textarea-campaign-content"})]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(N.Button,{variant:"outline",onClick:()=>l(!1),"data-testid":"button-cancel-campaign",children:"Cancel"}),(0,a.jsx)(N.Button,{onClick:()=>{m.mutate(n)},disabled:m.isPending||!n.name,"data-testid":"button-submit-campaign",children:m.isPending?"Creating...":"Create Campaign"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(w,{title:"Campaign Performance (Open & Click Rates)",loading:c,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(X.BarChart,{data:C,children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"name"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(ee.Legend,{}),(0,a.jsx)(W.Bar,{dataKey:"opens",fill:"hsl(var(--chart-1))",name:"Open Rate %"}),(0,a.jsx)(W.Bar,{dataKey:"clicks",fill:"hsl(var(--chart-2))",name:"Click Rate %"})]})})}),(0,a.jsx)(w,{title:"Revenue by Campaign",loading:c,children:(0,a.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(T.LineChart,{data:$,children:[(0,a.jsx)(D.CartesianGrid,{strokeDasharray:"3 3"}),(0,a.jsx)(R.XAxis,{dataKey:"name"}),(0,a.jsx)(A.YAxis,{}),(0,a.jsx)(L.Tooltip,{}),(0,a.jsx)(S.Line,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),(0,a.jsx)(w,{title:"All Campaigns",loading:c,children:(0,a.jsx)(V,{columns:[{key:"name",label:"Campaign",render:e=>(0,a.jsx)("span",{className:"font-medium","data-testid":`campaign-name-${e}`,children:e})},{key:"type",label:"Type",render:e=>(0,a.jsx)(eR.Badge,{variant:"outline","data-testid":`campaign-type-${e}`,children:e})},{key:"status",label:"Status",render:e=>(0,a.jsx)(eR.Badge,{variant:(e=>{switch(e){case"active":return"default";case"draft":return"secondary";case"paused":default:return"outline";case"completed":return"destructive"}})(e),"data-testid":`campaign-status-${e}`,children:e})},{key:"sentCount",label:"Sent",render:e=>(0,a.jsx)("span",{"data-testid":"campaign-sent",children:e.toLocaleString()})},{key:"openRate",label:"Open Rate",render:e=>(0,a.jsxs)("span",{className:"text-green-500 font-semibold","data-testid":"campaign-open-rate",children:[e.toFixed(1),"%"]})},{key:"clickRate",label:"Click Rate",render:e=>(0,a.jsxs)("span",{className:"text-blue-500 font-semibold","data-testid":"campaign-click-rate",children:[e.toFixed(1),"%"]})},{key:"conversions",label:"Conversions",render:e=>(0,a.jsx)("span",{"data-testid":"campaign-conversions",children:e})},{key:"revenue",label:"Revenue",render:e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.DollarSign,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"font-semibold","data-testid":"campaign-revenue",children:e})]})}],data:u,loading:c})})]})}function eB(){let[e,o]=(0,t.useState)("overview");return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(s.default,{}),(0,a.jsxs)("main",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"Manage your business, track performance, and grow your revenue"})]}),(0,a.jsxs)(l.Tabs,{value:e,onValueChange:o,className:"space-y-6",children:[(0,a.jsxs)(l.TabsList,{className:"flex flex-wrap gap-2 h-auto bg-muted/50 p-2","data-testid":"tabs-dashboard-navigation",children:[(0,a.jsxs)(l.TabsTrigger,{value:"overview",className:"flex items-center gap-2","data-testid":"tab-overview",children:[(0,a.jsx)(n.LayoutDashboard,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"sales",className:"flex items-center gap-2","data-testid":"tab-sales",children:[(0,a.jsx)(r.ShoppingCart,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Sales"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"referrals",className:"flex items-center gap-2","data-testid":"tab-referrals",children:[(0,a.jsx)(d.Users,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Referrals"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"analytics",className:"flex items-center gap-2","data-testid":"tab-analytics",children:[(0,a.jsx)(c,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Analytics"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"earnings",className:"flex items-center gap-2","data-testid":"tab-earnings",children:[(0,a.jsx)(x.Coins,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Earnings"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"goals",className:"flex items-center gap-2","data-testid":"tab-goals",children:[(0,a.jsx)(h.Target,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Goals"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"notifications",className:"flex items-center gap-2","data-testid":"tab-notifications",children:[(0,a.jsx)(m.Bell,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Notifications"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"crm",className:"flex items-center gap-2","data-testid":"tab-crm",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"CRM"})]}),(0,a.jsxs)(l.TabsTrigger,{value:"marketing",className:"flex items-center gap-2","data-testid":"tab-marketing",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Marketing"})]})]}),(0,a.jsx)(l.TabsContent,{value:"overview","data-testid":"content-overview",children:(0,a.jsx)($,{})}),(0,a.jsx)(l.TabsContent,{value:"sales","data-testid":"content-sales",children:(0,a.jsx)(ea,{})}),(0,a.jsx)(l.TabsContent,{value:"referrals","data-testid":"content-referrals",children:(0,a.jsx)(ex,{})}),(0,a.jsx)(l.TabsContent,{value:"analytics","data-testid":"content-analytics",children:(0,a.jsx)(eg,{})}),(0,a.jsx)(l.TabsContent,{value:"earnings","data-testid":"content-earnings",children:(0,a.jsx)(ev,{})}),(0,a.jsx)(l.TabsContent,{value:"goals","data-testid":"content-goals",children:(0,a.jsx)(ek,{})}),(0,a.jsx)(l.TabsContent,{value:"notifications","data-testid":"content-notifications",children:(0,a.jsx)(eA,{})}),(0,a.jsx)(l.TabsContent,{value:"crm","data-testid":"content-crm",children:(0,a.jsx)(eP,{})}),(0,a.jsx)(l.TabsContent,{value:"marketing","data-testid":"content-marketing",children:(0,a.jsx)(eM,{})})]})]}),(0,a.jsx)(i.default,{})]})}e.s(["default",()=>eB],49)}]);